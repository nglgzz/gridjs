function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.apply(this,arguments)}var e;!function(t){t[t.Init=0]="Init",t[t.Loading=1]="Loading",t[t.Loaded=2]="Loaded",t[t.Rendered=3]="Rendered",t[t.Error=4]="Error"}(e||(e={}));var n,r,o,s,i,l,a,c={},u=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function p(t,e){for(var n in e)t[n]=e[n];return t}function h(t){var e=t.parentNode;e&&e.removeChild(t)}function _(t,e,r){var o,s,i,l={};for(i in e)"key"==i?o=e[i]:"ref"==i?s=e[i]:l[i]=e[i];if(arguments.length>2&&(l.children=arguments.length>3?n.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===l[i]&&(l[i]=t.defaultProps[i]);return f(t,l,o,s,null)}function f(t,e,n,s,i){var l={type:t,props:e,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++o:i};return null==i&&null!=r.vnode&&r.vnode(l),l}function m(){return{current:null}}function g(t){return t.children}function y(t,e){this.props=t,this.context=e}function v(t,e){if(null==e)return t.__?v(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?v(t):null}function b(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return b(t)}}function w(t){(!t.__d&&(t.__d=!0)&&i.push(t)&&!x.__r++||l!==r.debounceRendering)&&((l=r.debounceRendering)||setTimeout)(x)}function x(){for(var t;x.__r=i.length;)t=i.sort(function(t,e){return t.__v.__b-e.__v.__b}),i=[],t.some(function(t){var e,n,r,o,s,i;t.__d&&(s=(o=(e=t).__v).__e,(i=e.__P)&&(n=[],(r=p({},o)).__v=o.__v+1,L(i,o,r,e.__n,void 0!==i.ownerSVGElement,null!=o.__h?[s]:null,n,null==s?v(o):s,o.__h),T(n,o),o.__e!=s&&b(o)))})}function N(t,e,n,r,o,s,i,l,a,d){var p,h,_,m,y,b,w,x=r&&r.__k||u,N=x.length;for(n.__k=[],p=0;p<e.length;p++)if(null!=(m=n.__k[p]=null==(m=e[p])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?f(null,m,null,null,m):Array.isArray(m)?f(g,{children:m},null,null,null):m.__b>0?f(m.type,m.props,m.key,m.ref?m.ref:null,m.__v):m)){if(m.__=n,m.__b=n.__b+1,null===(_=x[p])||_&&m.key==_.key&&m.type===_.type)x[p]=void 0;else for(h=0;h<N;h++){if((_=x[h])&&m.key==_.key&&m.type===_.type){x[h]=void 0;break}_=null}L(t,m,_=_||c,o,s,i,l,a,d),y=m.__e,(h=m.ref)&&_.ref!=h&&(w||(w=[]),_.ref&&w.push(_.ref,null,m),w.push(h,m.__c||y,m)),null!=y?(null==b&&(b=y),"function"==typeof m.type&&m.__k===_.__k?m.__d=a=k(m,a,t):a=S(t,m,_,x,y,a),"function"==typeof n.type&&(n.__d=a)):a&&_.__e==a&&a.parentNode!=t&&(a=v(_))}for(n.__e=b,p=N;p--;)null!=x[p]&&D(x[p],x[p]);if(w)for(p=0;p<w.length;p++)H(w[p],w[++p],w[++p])}function k(t,e,n){for(var r,o=t.__k,s=0;o&&s<o.length;s++)(r=o[s])&&(r.__=t,e="function"==typeof r.type?k(r,e,n):S(n,r,r,o,r.__e,e));return e}function S(t,e,n,r,o,s){var i,l,a;if(void 0!==e.__d)i=e.__d,e.__d=void 0;else if(null==n||o!=s||null==o.parentNode)t:if(null==s||s.parentNode!==t)t.appendChild(o),i=null;else{for(l=s,a=0;(l=l.nextSibling)&&a<r.length;a+=1)if(l==o)break t;t.insertBefore(o,s),i=s}return void 0!==i?i:o.nextSibling}function C(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||d.test(e)?n:n+"px"}function P(t,e,n,r,o){var s;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||C(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||C(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r||t.addEventListener(e,s?I:E,s):t.removeEventListener(e,s?I:E,s);else if("dangerouslySetInnerHTML"!==e){if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&-1==e.indexOf("-")?t.removeAttribute(e):t.setAttribute(e,n))}}function E(t){this.l[t.type+!1](r.event?r.event(t):t)}function I(t){this.l[t.type+!0](r.event?r.event(t):t)}function L(t,e,n,o,s,i,l,a,c){var u,d,h,_,f,m,v,b,w,x,k,S,C,P,E,I=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(c=n.__h,a=e.__e=n.__e,e.__h=null,i=[a]),(u=r.__b)&&u(e);try{t:if("function"==typeof I){if(b=e.props,w=(u=I.contextType)&&o[u.__c],x=u?w?w.props.value:u.__:o,n.__c?v=(d=e.__c=n.__c).__=d.__E:("prototype"in I&&I.prototype.render?e.__c=d=new I(b,x):(e.__c=d=new y(b,x),d.constructor=I,d.render=M),w&&w.sub(d),d.props=b,d.state||(d.state={}),d.context=x,d.__n=o,h=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=I.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=p({},d.__s)),p(d.__s,I.getDerivedStateFromProps(b,d.__s))),_=d.props,f=d.state,h)null==I.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==I.getDerivedStateFromProps&&b!==_&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,x),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,x)||e.__v===n.__v){for(d.props=b,d.state=d.__s,e.__v!==n.__v&&(d.__d=!1),d.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(t){t&&(t.__=e)}),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[],d.__h.length&&l.push(d);break t}null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,x),null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(_,f,m)})}if(d.context=x,d.props=b,d.__v=e,d.__P=t,S=r.__r,C=0,"prototype"in I&&I.prototype.render){for(d.state=d.__s,d.__d=!1,S&&S(e),u=d.render(d.props,d.state,d.context),P=0;P<d._sb.length;P++)d.__h.push(d._sb[P]);d._sb=[]}else do{d.__d=!1,S&&S(e),u=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++C<25);d.state=d.__s,null!=d.getChildContext&&(o=p(p({},o),d.getChildContext())),h||null==d.getSnapshotBeforeUpdate||(m=d.getSnapshotBeforeUpdate(_,f)),E=null!=u&&u.type===g&&null==u.key?u.props.children:u,N(t,Array.isArray(E)?E:[E],e,n,o,s,i,l,a,c),d.base=e.__e,e.__h=null,d.__h.length&&l.push(d),v&&(d.__E=d.__=null),d.__e=!1}else null==i&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=A(n.__e,e,n,o,s,i,l,c);(u=r.diffed)&&u(e)}catch(t){e.__v=null,(c||null!=i)&&(e.__e=a,e.__h=!!c,i[i.indexOf(a)]=null),r.__e(t,e,n)}}function T(t,e){r.__c&&r.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){r.__e(t,e.__v)}})}function A(t,e,r,o,s,i,l,a){var u,d,p,_=r.props,f=e.props,m=e.type,g=0;if("svg"===m&&(s=!0),null!=i)for(;g<i.length;g++)if((u=i[g])&&"setAttribute"in u==!!m&&(m?u.localName===m:3===u.nodeType)){t=u,i[g]=null;break}if(null==t){if(null===m)return document.createTextNode(f);t=s?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,f.is&&f),i=null,a=!1}if(null===m)_===f||a&&t.data===f||(t.data=f);else{if(i=i&&n.call(t.childNodes),d=(_=r.props||c).dangerouslySetInnerHTML,p=f.dangerouslySetInnerHTML,!a){if(null!=i)for(_={},g=0;g<t.attributes.length;g++)_[t.attributes[g].name]=t.attributes[g].value;(p||d)&&(p&&(d&&p.__html==d.__html||p.__html===t.innerHTML)||(t.innerHTML=p&&p.__html||""))}if(function(t,e,n,r,o){var s;for(s in n)"children"===s||"key"===s||s in e||P(t,s,null,n[s],r);for(s in e)o&&"function"!=typeof e[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===e[s]||P(t,s,e[s],n[s],r)}(t,f,_,s,a),p)e.__k=[];else if(g=e.props.children,N(t,Array.isArray(g)?g:[g],e,r,o,s&&"foreignObject"!==m,i,l,i?i[0]:r.__k&&v(r,0),a),null!=i)for(g=i.length;g--;)null!=i[g]&&h(i[g]);a||("value"in f&&void 0!==(g=f.value)&&(g!==t.value||"progress"===m&&!g||"option"===m&&g!==_.value)&&P(t,"value",g,_.value,!1),"checked"in f&&void 0!==(g=f.checked)&&g!==t.checked&&P(t,"checked",g,_.checked,!1))}return t}function H(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){r.__e(t,n)}}function D(t,e,n){var o,s;if(r.unmount&&r.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||H(o,null,e)),null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){r.__e(t,e)}o.base=o.__P=null,t.__c=void 0}if(o=t.__k)for(s=0;s<o.length;s++)o[s]&&D(o[s],e,n||"function"!=typeof t.type);n||null==t.__e||h(t.__e),t.__=t.__e=t.__d=void 0}function M(t,e,n){return this.constructor(t,n)}function F(t,e,o){var s,i,l;r.__&&r.__(t,e),i=(s="function"==typeof o)?null:o&&o.__k||e.__k,l=[],L(e,t=(!s&&o||e).__k=_(g,null,[t]),i||c,c,void 0!==e.ownerSVGElement,!s&&o?[o]:i?null:e.firstChild?n.call(e.childNodes):null,l,!s&&o?o:i?i.__e:e.firstChild,s),T(l,t)}function R(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}n=u.slice,r={__e:function(t,e,n,r){for(var o,s,i;e=e.__;)if((o=e.__c)&&!o.__)try{if((s=o.constructor)&&null!=s.getDerivedStateFromError&&(o.setState(s.getDerivedStateFromError(t)),i=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,r||{}),i=o.__d),i)return o.__E=o}catch(e){t=e}throw t}},o=0,s=function(t){return null!=t&&void 0===t.constructor},y.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=p({},this.state),"function"==typeof t&&(t=t(p({},n),this.props)),t&&p(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),w(this))},y.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),w(this))},y.prototype.render=g,i=[],x.__r=0,a=0;class ${constructor(t){this._id=void 0,this._id=t||R()}get id(){return this._id}}function U(t){return _(t.parentElement||"span",{dangerouslySetInnerHTML:{__html:t.content}})}function j(t,e){return _(U,{content:t,parentElement:e})}class O extends ${constructor(t){super(),this.data=void 0,this.update(t)}cast(t){return t instanceof HTMLElement?j(t.outerHTML):t}update(t){return this.data=this.cast(t),this}}class W extends ${constructor(t){super(),this._cells=void 0,this.cells=t||[]}cell(t){return this._cells[t]}get cells(){return this._cells}set cells(t){this._cells=t}toArray(){return this.cells.map(t=>t.data)}static fromCells(t){return new W(t.map(t=>new O(t.data)))}get length(){return this.cells.length}}class B extends ${constructor(t){super(),this._rows=void 0,this._length=void 0,this.rows=t instanceof Array?t:t instanceof W?[t]:[]}get rows(){return this._rows}set rows(t){this._rows=t}get length(){return this._length||this.rows.length}set length(t){this._length=t}toArray(){return this.rows.map(t=>t.toArray())}static fromRows(t){return new B(t.map(t=>W.fromCells(t.cells)))}static fromArray(t){return t=function(t){return!t[0]||t[0]instanceof Array?t:[t]}(t),new B(t.map(t=>new W(t.map(t=>new O(t)))))}}function q(t,e){return t.split(/ *\bOR\b */).some(t=>t.split(/ *\bAND\b */).every(t=>{const n=t.trim();return"true"===n||""===n||"false"!==n&&e(n)}))}const z=/\\\(([^()]+)\\\)/g;function V(t,e){const n=t.replace(z,(t,n)=>String(q(n,e)));return z.test(n)?V(n,e):q(n,e)}function G(t,e,n,r,o){return t=t.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),new B(r.rows.filter((r,s)=>V(t,((t,r)=>s=>t.cells.some((t,i)=>function(t,e,n,r,{columns:o,ignoreHiddenColumns:s,selector:i}){if(!n)return!1;if(s&&o&&o[e]&&"object"==typeof o[e]&&o[e].hidden)return!1;let l="";if("function"==typeof i)l=i(n.data,t,e);else if("object"==typeof n.data){const t=n.data;t&&t.props&&t.props.content&&(l=t.props.content)}else l=String(n.data);return new RegExp(r,"gi").test(l)}(r,i,t,s,{columns:e,ignoreHiddenColumns:n,selector:o})))(r,s))))}class K{constructor(){this.callbacks=void 0}init(t){this.callbacks||(this.callbacks={}),t&&!this.callbacks[t]&&(this.callbacks[t]=[])}listeners(){return this.callbacks}on(t,e){return this.init(t),this.callbacks[t].push(e),this}off(t,e){const n=t;return this.init(),this.callbacks[n]&&0!==this.callbacks[n].length?(this.callbacks[n]=this.callbacks[n].filter(t=>t!=e),this):this}emit(t,...e){const n=t;return this.init(n),this.callbacks[n].length>0&&(this.callbacks[n].forEach(t=>t(...e)),!0)}}function X(t,e){if(typeof t!=typeof e)return!1;if(null===t&&null===e)return!0;if("object"!=typeof t)return t===e;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!X(t[n],e[n]))return!1;return!0}const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const r of n)if(!e.hasOwnProperty(r)||!X(t[r],e[r]))return!1;return!0}var Z;!function(t){t[t.Initiator=0]="Initiator",t[t.ServerFilter=1]="ServerFilter",t[t.ServerSort=2]="ServerSort",t[t.ServerLimit=3]="ServerLimit",t[t.Extractor=4]="Extractor",t[t.Transformer=5]="Transformer",t[t.Filter=6]="Filter",t[t.Sort=7]="Sort",t[t.Limit=8]="Limit"}(Z||(Z={}));class J extends K{constructor(t){super(),this.id=void 0,this._props=void 0,this._props={},this.id=R(),t&&this.setProps(t)}process(...t){this.validateProps instanceof Function&&this.validateProps(...t),this.emit("beforeProcess",...t);const e=this._process(...t);return this.emit("afterProcess",...t),e}setProps(e){const n=t({},this._props,e);return X(n,this._props)||(this._props=n,this.emit("propsUpdated",this)),this}get props(){return this._props}}class Q extends J{get type(){return Z.Filter}_process(t){return this.props.keyword?G(String(this.props.keyword).trim(),this.props.columns,this.props.ignoreHiddenColumns,t,this.props.selector):t}}function Y(...t){return`gridjs${t.reduce((t,e)=>`${t}-${e}`,"")}`}function tt(...t){return t.map(t=>t?t.toString():"").filter(t=>t).reduce((t,e)=>`${t||""} ${e}`,"").trim()}class et extends J{get type(){return Z.ServerFilter}_process(e){if(!this.props.keyword)return e;const n={};return this.props.url&&(n.url=this.props.url(e.url,this.props.keyword)),this.props.body&&(n.body=this.props.body(e.body,this.props.keyword)),t({},e,n)}}var nt,rt,ot,st,it=0,lt=[],at=[],ct=r.__b,ut=r.__r,dt=r.diffed,pt=r.__c,ht=r.unmount;function _t(t,e){r.__h&&r.__h(rt,t,it||e),it=0;var n=rt.__H||(rt.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:at}),n.__[t]}function ft(t){return it=1,function(t,e,n){var r=_t(nt++,2);if(r.t=t,!r.__c&&(r.__=[St(void 0,e),function(t){var e=r.__N?r.__N[0]:r.__[0],n=r.t(e,t);e!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=rt,!rt.u)){rt.u=!0;var o=rt.shouldComponentUpdate;rt.shouldComponentUpdate=function(t,e,n){if(!r.__c.__H)return!0;var s=r.__c.__H.__.filter(function(t){return t.__c});if(s.every(function(t){return!t.__N}))return!o||o.call(this,t,e,n);var i=!1;return s.forEach(function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(i=!0)}}),!(!i&&r.__c.props===t)&&(!o||o.call(this,t,e,n))}}return r.__N||r.__}(St,t)}function mt(t,e){var n=_t(nt++,3);!r.__s&&kt(n.__H,e)&&(n.__=t,n.i=e,rt.__H.__h.push(n))}function gt(t){return it=5,yt(function(){return{current:t}},[])}function yt(t,e){var n=_t(nt++,7);return kt(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function vt(){for(var t;t=lt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(xt),t.__H.__h.forEach(Nt),t.__H.__h=[]}catch(e){t.__H.__h=[],r.__e(e,t.__v)}}r.__b=function(t){rt=null,ct&&ct(t)},r.__r=function(t){ut&&ut(t),nt=0;var e=(rt=t.__c).__H;e&&(ot===rt?(e.__h=[],rt.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=at,t.__N=t.i=void 0})):(e.__h.forEach(xt),e.__h.forEach(Nt),e.__h=[])),ot=rt},r.diffed=function(t){dt&&dt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==lt.push(e)&&st===r.requestAnimationFrame||((st=r.requestAnimationFrame)||wt)(vt)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==at&&(t.__=t.__V),t.i=void 0,t.__V=at})),ot=rt=null},r.__c=function(t,e){e.some(function(t){try{t.__h.forEach(xt),t.__h=t.__h.filter(function(t){return!t.__||Nt(t)})}catch(n){e.some(function(t){t.__h&&(t.__h=[])}),e=[],r.__e(n,t.__v)}}),pt&&pt(t,e)},r.unmount=function(t){ht&&ht(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(t){try{xt(t)}catch(t){e=t}}),n.__H=void 0,e&&r.__e(e,n.__v))};var bt="function"==typeof requestAnimationFrame;function wt(t){var e,n=function(){clearTimeout(r),bt&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);bt&&(e=requestAnimationFrame(n))}function xt(t){var e=rt,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),rt=e}function Nt(t){var e=rt;t.__c=t.__(),rt=e}function kt(t,e){return!t||t.length!==e.length||e.some(function(e,n){return e!==t[n]})}function St(t,e){return"function"==typeof e?e(t):e}function Ct(){return function(t){var e=rt.context[t.__c],n=_t(nt++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(rt)),e.props.value):t.__}(re)}var Pt={search:{placeholder:"Type a keyword..."},sort:{sortAsc:"Sort column ascending",sortDesc:"Sort column descending"},pagination:{previous:"Previous",next:"Next",navigate:(t,e)=>`Page ${t} of ${e}`,page:t=>`Page ${t}`,showing:"Showing",of:"of",to:"to",results:"results"},loading:"Loading...",noRecordsFound:"No matching records found",error:"An error happened while fetching the data"};class Et{constructor(t){this._language=void 0,this._defaultLanguage=void 0,this._language=t,this._defaultLanguage=Pt}getString(t,e){if(!e||!t)return null;const n=t.split("."),r=n[0];if(e[r]){const t=e[r];return"string"==typeof t?()=>t:"function"==typeof t?t:this.getString(n.slice(1).join("."),t)}return null}translate(t,...e){let n;return n=this.getString(t,this._language)||this.getString(t,this._defaultLanguage),n?n(...e):t}}function It(){const t=Ct();return function(e,...n){return t.translator.translate(e,...n)}}const Lt=e=>n=>t({},n,{search:{keyword:e}});function Tt(){return Ct().store}function At(t){const e=Tt(),[n,r]=ft(t(e.getState()));return mt(()=>e.subscribe(()=>{const o=t(e.getState());n!==o&&r(o)}),[]),n}function Ht(){var t;const[e,n]=ft(void 0),r=Ct(),o=r.search,s=It(),{dispatch:i}=Tt(),l=At(t=>t.search);mt(()=>{e&&e.setProps({keyword:null==l?void 0:l.keyword})},[l,e]),mt(()=>{n(o.server?new et({keyword:o.keyword,url:o.server.url,body:o.server.body}):new Q({keyword:o.keyword,columns:r.header&&r.header.columns,ignoreHiddenColumns:o.ignoreHiddenColumns||void 0===o.ignoreHiddenColumns,selector:o.selector})),o.keyword&&i(Lt(o.keyword))},[o]),mt(()=>{if(e)return r.pipeline.register(e),()=>r.pipeline.unregister(e)},[r,e]);const a=function(t,e){return it=8,yt(function(){return t},e)}(((t,e)=>{let n;return(...t)=>new Promise(r=>{n&&clearTimeout(n),n=setTimeout(()=>r((t=>{t.target instanceof HTMLInputElement&&i(Lt(t.target.value))})(...t)),e)})})(0,e instanceof et?o.debounceTimeout||250:0),[o,e]);return _("div",{className:Y(tt("search",null==(t=r.className)?void 0:t.search))},_("input",{type:"search",placeholder:s("search.placeholder"),"aria-label":s("search.placeholder"),onInput:a,className:tt(Y("input"),Y("search","input")),value:(null==l?void 0:l.keyword)||""}))}class Dt extends J{validateProps(){if(isNaN(Number(this.props.limit))||isNaN(Number(this.props.page)))throw Error("Invalid parameters passed")}get type(){return Z.Limit}_process(t){const e=this.props.page;return new B(t.rows.slice(e*this.props.limit,(e+1)*this.props.limit))}}class Mt extends J{get type(){return Z.ServerLimit}_process(e){const n={};return this.props.url&&(n.url=this.props.url(e.url,this.props.page,this.props.limit)),this.props.body&&(n.body=this.props.body(e.body,this.props.page,this.props.limit)),t({},e,n)}}function Ft(){const t=Ct(),{server:e,summary:n=!0,nextButton:r=!0,prevButton:o=!0,buttonsCount:s=3,limit:i=10,page:l=0,resetPageOnUpdate:a=!0}=t.pagination,c=gt(null),[u,d]=ft(l),[p,h]=ft(0),f=It();mt(()=>(e?(c.current=new Mt({limit:i,page:u,url:e.url,body:e.body}),t.pipeline.register(c.current)):(c.current=new Dt({limit:i,page:u}),t.pipeline.register(c.current)),c.current instanceof Mt?t.pipeline.on("afterProcess",t=>h(t.length)):c.current instanceof Dt&&c.current.on("beforeProcess",t=>h(t.length)),t.pipeline.on("updated",m),t.pipeline.on("error",()=>{h(0),d(0)}),()=>{t.pipeline.unregister(c.current),t.pipeline.off("updated",m)}),[]);const m=t=>{a&&t!==c.current&&d(0)},y=()=>Math.ceil(p/i),v=t=>{if(t>=y()||t<0||t===u)return null;d(t),c.current.setProps({page:t})};return _("div",{className:tt(Y("pagination"),t.className.pagination)},_(g,null,n&&p>0&&_("div",{role:"status","aria-live":"polite",className:tt(Y("summary"),t.className.paginationSummary),title:f("pagination.navigate",u+1,y())},f("pagination.showing")," ",_("b",null,f(""+(u*i+1)))," ",f("pagination.to")," ",_("b",null,f(`${Math.min((u+1)*i,p)}`))," ",f("pagination.of")," ",_("b",null,f(`${p}`))," ",f("pagination.results"))),_("div",{className:Y("pages")},o&&_("button",{tabIndex:0,role:"button",disabled:0===u,onClick:()=>v(u-1),title:f("pagination.previous"),"aria-label":f("pagination.previous"),className:tt(t.className.paginationButton,t.className.paginationButtonPrev)},f("pagination.previous")),(()=>{if(s<=0)return null;const e=Math.min(y(),s);let n=Math.min(u,Math.floor(e/2));return u+Math.floor(e/2)>=y()&&(n=e-(y()-u)),_(g,null,y()>e&&u-n>0&&_(g,null,_("button",{tabIndex:0,role:"button",onClick:()=>v(0),title:f("pagination.firstPage"),"aria-label":f("pagination.firstPage"),className:t.className.paginationButton},f("1")),_("button",{tabIndex:-1,className:tt(Y("spread"),t.className.paginationButton)},"...")),Array.from(Array(e).keys()).map(t=>u+(t-n)).map(e=>_("button",{tabIndex:0,role:"button",onClick:()=>v(e),className:tt(u===e?tt(Y("currentPage"),t.className.paginationButtonCurrent):null,t.className.paginationButton),title:f("pagination.page",e+1),"aria-label":f("pagination.page",e+1)},f(`${e+1}`))),y()>e&&y()>u+n+1&&_(g,null,_("button",{tabIndex:-1,className:tt(Y("spread"),t.className.paginationButton)},"..."),_("button",{tabIndex:0,role:"button",onClick:()=>v(y()-1),title:f("pagination.page",y()),"aria-label":f("pagination.page",y()),className:t.className.paginationButton},f(`${y()}`))))})(),r&&_("button",{tabIndex:0,role:"button",disabled:y()===u+1||0===y(),onClick:()=>v(u+1),title:f("pagination.next"),"aria-label":f("pagination.next"),className:tt(t.className.paginationButton,t.className.paginationButtonNext)},f("pagination.next"))))}function Rt(t,e){return"string"==typeof t?t.indexOf("%")>-1?e/100*parseInt(t,10):parseInt(t,10):t}function $t(t){return t?`${Math.floor(t)}px`:""}function Ut(t){const e=t.tableRef.cloneNode(!0);return e.style.position="absolute",e.style.width="100%",e.style.zIndex="-2147483640",e.style.visibility="hidden",_("div",{ref:t=>{t&&t.appendChild(e)}})}function jt(t){if(!t)return"";const e=t.split(" ");return 1===e.length&&/([a-z][A-Z])+/g.test(t)?t:e.map(function(t,e){return 0==e?t.toLowerCase():t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}).join("")}var Ot,Wt=new class{format(t,e){return`[Grid.js] [${e.toUpperCase()}]: ${t}`}error(t,e=!1){const n=this.format(t,"error");if(e)throw Error(n);console.error(n)}warn(t){console.warn(this.format(t,"warn"))}info(t){console.info(this.format(t,"info"))}};!function(t){t[t.Header=0]="Header",t[t.Footer=1]="Footer",t[t.Cell=2]="Cell"}(Ot||(Ot={}));class Bt{constructor(){this.plugins=void 0,this.plugins=[]}get(t){return this.plugins.find(e=>e.id===t)}add(t){return t.id?this.get(t.id)?(Wt.error(`Duplicate plugin ID: ${t.id}`),this):(this.plugins.push(t),this):(Wt.error("Plugin ID cannot be empty"),this)}remove(t){const e=this.get(t);return e&&this.plugins.splice(this.plugins.indexOf(e),1),this}list(t){let e;return e=null!=t||null!=t?this.plugins.filter(e=>e.position===t):this.plugins,e.sort((t,e)=>t.order&&e.order?t.order-e.order:1)}}function qt(e){const n=Ct();if(e.pluginId){const r=n.plugin.get(e.pluginId);return r?_(g,{},_(r.component,t({plugin:r},e.props))):null}return void 0!==e.position?_(g,{},n.plugin.list(e.position).map(e=>_(e.component,t({plugin:e},this.props.props)))):null}class zt extends ${constructor(){super(),this._columns=void 0,this._columns=[]}get columns(){return this._columns}set columns(t){this._columns=t}get visibleColumns(){return this._columns.filter(t=>!t.hidden)}adjustWidth(e,n,r){const o=e.container,s=e.autoWidth;if(!o)return this;const i=o.clientWidth;let l={};n.current&&s&&(F(_(Ut,{tableRef:n.current}),r.current),l=function(e){const n=e.querySelector("table");if(!n)return{};const r=n.className,o=n.style.cssText;n.className=`${r} ${Y("shadowTable")}`,n.style.tableLayout="auto",n.style.width="auto",n.style.padding="0",n.style.margin="0",n.style.border="none",n.style.outline="none";let s=Array.from(n.parentNode.querySelectorAll("thead th")).reduce((e,n)=>(n.style.width=`${n.clientWidth}px`,t({[n.getAttribute("data-column-id")]:{minWidth:n.clientWidth}},e)),{});return n.className=r,n.style.cssText=o,n.style.tableLayout="auto",s=Array.from(n.parentNode.querySelectorAll("thead th")).reduce((t,e)=>(t[e.getAttribute("data-column-id")].width=e.clientWidth,t),s),s}(r.current));for(const t of zt.tabularFormat(this.columns).reduce((t,e)=>t.concat(e),[]))t.columns&&t.columns.length>0||(!t.width&&s?t.id in l&&(t.width=$t(l[t.id].width),t.minWidth=$t(l[t.id].minWidth)):t.width=$t(Rt(t.width,i)));return n.current&&s&&F(null,r.current),this}setSort(e,n){const r=n||this.columns||[];for(const n of r)n.columns&&n.columns.length>0?n.sort=void 0:void 0===n.sort&&e?n.sort={}:n.sort?"object"==typeof n.sort&&(n.sort=t({},n.sort)):n.sort=void 0,n.columns&&this.setSort(e,n.columns)}setResizable(t,e){const n=e||this.columns||[];for(const e of n)void 0===e.resizable&&(e.resizable=t),e.columns&&this.setResizable(t,e.columns)}setID(t){const e=t||this.columns||[];for(const t of e)t.id||"string"!=typeof t.name||(t.id=jt(t.name)),t.id||Wt.error('Could not find a valid ID for one of the columns. Make sure a valid "id" is set for all columns.'),t.columns&&this.setID(t.columns)}populatePlugins(e,n){for(const r of n)void 0!==r.plugin&&e.add(t({id:r.id},r.plugin,{position:Ot.Cell}))}static fromColumns(t){const e=new zt;for(const n of t)if("string"==typeof n||s(n))e.columns.push({name:n});else if("object"==typeof n){const t=n;t.columns&&(t.columns=zt.fromColumns(t.columns).columns),"object"==typeof t.plugin&&void 0===t.data&&(t.data=null),e.columns.push(n)}return e}static createFromConfig(t){const e=new zt;return t.from?e.columns=zt.fromHTMLTable(t.from).columns:t.columns?e.columns=zt.fromColumns(t.columns).columns:!t.data||"object"!=typeof t.data[0]||t.data[0]instanceof Array||(e.columns=Object.keys(t.data[0]).map(t=>({name:t}))),e.columns.length?(e.setID(),e.setSort(t.sort),e.setResizable(t.resizable),e.populatePlugins(t.plugin,e.columns),e):null}static fromHTMLTable(t){const e=new zt,n=t.querySelector("thead").querySelectorAll("th");for(const t of n)e.columns.push({name:t.innerHTML,width:t.width});return e}static tabularFormat(t){let e=[];const n=t||[];let r=[];if(n&&n.length){e.push(n);for(const t of n)t.columns&&t.columns.length&&(r=r.concat(t.columns));r.length&&(e=e.concat(this.tabularFormat(r)))}return e}static leafColumns(t){let e=[];const n=t||[];if(n&&n.length)for(const t of n)t.columns&&0!==t.columns.length||e.push(t),t.columns&&(e=e.concat(this.leafColumns(t.columns)));return e}static maximumDepth(t){return this.tabularFormat([t]).length-1}}class Vt{}class Gt extends Vt{constructor(t){super(),this.data=void 0,this.set(t)}async get(){const t=await this.data();return{data:t,total:t.length}}set(t){return t instanceof Array?this.data=()=>t:t instanceof Function&&(this.data=t),this}}class Kt extends Vt{constructor(t){super(),this.options=void 0,this.options=t}handler(t){return"function"==typeof this.options.handle?this.options.handle(t):t.ok?t.json():(Wt.error(`Could not fetch data: ${t.status} - ${t.statusText}`,!0),null)}get(e){const n=t({},this.options,e);return"function"==typeof n.data?n.data(n):fetch(n.url,n).then(this.handler.bind(this)).then(t=>({data:n.then(t),total:"function"==typeof n.total?n.total(t):void 0}))}}class Xt{static createFromConfig(t){let e=null;return t.data&&(e=new Gt(t.data)),t.from&&(e=new Gt(this.tableElementToArray(t.from)),t.from.style.display="none"),t.server&&(e=new Kt(t.server)),e||Wt.error("Could not determine the storage type",!0),e}static tableElementToArray(t){const e=[],n=t.querySelector("tbody").querySelectorAll("tr");for(const t of n){const n=t.querySelectorAll("td"),o=[];for(const t of n)1===t.childNodes.length&&t.childNodes[0].nodeType===Node.TEXT_NODE?o.push((r=t.innerHTML,(new DOMParser).parseFromString(r,"text/html").documentElement.textContent)):o.push(j(t.innerHTML));e.push(o)}var r;return e}}class Zt extends K{constructor(t){super(),this._steps=new Map,this.cache=new Map,this.lastProcessorIndexUpdated=-1,t&&t.forEach(t=>this.register(t))}clearCache(){this.cache=new Map,this.lastProcessorIndexUpdated=-1}register(t,e=null){if(!t)throw Error("Processor is not defined");if(null===t.type)throw Error("Processor type is not defined");if(this.findProcessorIndexByID(t.id)>-1)throw Error(`Processor ID ${t.id} is already defined`);return t.on("propsUpdated",this.processorPropsUpdated.bind(this)),this.addProcessorByPriority(t,e),this.afterRegistered(t),t}tryRegister(t,e=null){try{return this.register(t,e)}catch(t){}}unregister(t){if(!t)return;if(-1===this.findProcessorIndexByID(t.id))return;const e=this._steps.get(t.type);e&&e.length&&(this._steps.set(t.type,e.filter(e=>e!=t)),this.emit("updated",t))}addProcessorByPriority(t,e){let n=this._steps.get(t.type);if(!n){const e=[];this._steps.set(t.type,e),n=e}if(null===e||e<0)n.push(t);else if(n[e]){const r=n.slice(0,e-1),o=n.slice(e+1);this._steps.set(t.type,r.concat(t).concat(o))}else n[e]=t}get steps(){let t=[];for(const e of this.getSortedProcessorTypes()){const n=this._steps.get(e);n&&n.length&&(t=t.concat(n))}return t.filter(t=>t)}getStepsByType(t){return this.steps.filter(e=>e.type===t)}getSortedProcessorTypes(){return Object.keys(Z).filter(t=>!isNaN(Number(t))).map(t=>Number(t))}async process(t){const e=this.lastProcessorIndexUpdated,n=this.steps;let r=t;try{for(const t of n)this.findProcessorIndexByID(t.id)>=e?(r=await t.process(r),this.cache.set(t.id,r)):r=this.cache.get(t.id)}catch(t){throw Wt.error(t),this.emit("error",r),t}return this.lastProcessorIndexUpdated=n.length,this.emit("afterProcess",r),r}findProcessorIndexByID(t){return this.steps.findIndex(e=>e.id==t)}setLastProcessorIndex(t){const e=this.findProcessorIndexByID(t.id);this.lastProcessorIndexUpdated>e&&(this.lastProcessorIndexUpdated=e)}processorPropsUpdated(t){this.setLastProcessorIndex(t),this.emit("propsUpdated"),this.emit("updated",t)}afterRegistered(t){this.setLastProcessorIndex(t),this.emit("afterRegister"),this.emit("updated",t)}}class Jt extends J{get type(){return Z.Extractor}async _process(t){return await this.props.storage.get(t)}}class Qt extends J{get type(){return Z.Transformer}_process(t){const e=B.fromArray(t.data);return e.length=t.total,e}}class Yt extends J{get type(){return Z.Initiator}_process(){return Object.entries(this.props.serverStorageOptions).filter(([t,e])=>"function"!=typeof e).reduce((e,[n,r])=>t({},e,{[n]:r}),{})}}class te extends J{get type(){return Z.Transformer}castData(t){if(!t||!t.length)return[];if(!this.props.header||!this.props.header.columns)return t;const e=zt.leafColumns(this.props.header.columns);return t[0]instanceof Array?t.map(t=>{let n=0;return e.map((e,r)=>void 0!==e.data?(n++,"function"==typeof e.data?e.data(t):e.data):t[r-n])}):"object"!=typeof t[0]||t[0]instanceof Array?[]:t.map(t=>e.map((e,n)=>void 0!==e.data?"function"==typeof e.data?e.data(t):e.data:e.id?t[e.id]:(Wt.error(`Could not find the correct cell for column at position ${n}.\n                          Make sure either 'id' or 'selector' is defined for all columns.`),null)))}_process(t){return{data:this.castData(t.data),total:t.total}}}class ee{static createFromConfig(t){const e=new Zt;return t.storage instanceof Kt&&e.register(new Yt({serverStorageOptions:t.server})),e.register(new Jt({storage:t.storage})),e.register(new te({header:t.header})),e.register(new Qt),e}}class ne{constructor(t){this.state=void 0,this.listeners=[],this.isDispatching=!1,this.getState=()=>this.state,this.getListeners=()=>this.listeners,this.dispatch=t=>{if("function"!=typeof t)throw new Error("Reducer is not a function");if(this.isDispatching)throw new Error("Reducers may not dispatch actions");this.isDispatching=!0;const e=this.state;try{this.state=t(this.state)}finally{this.isDispatching=!1}for(const t of this.listeners)t(this.state,e);return this.state},this.subscribe=t=>{if("function"!=typeof t)throw new Error("Listener is not a function");return this.listeners=[...this.listeners,t],()=>this.listeners=this.listeners.filter(e=>e!==t)},this.state=t}}const re=function(t,e){var n={__c:e="__cC"+a++,__:null,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,r;return this.getChildContext||(n=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(w)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}();class oe{constructor(){Object.assign(this,oe.defaultConfig())}assign(t){return Object.assign(this,t)}update(e){return e?(this.assign(oe.fromPartialConfig(t({},this,e))),this):this}static defaultConfig(){return{store:new ne({status:e.Init,header:void 0,data:null}),plugin:new Bt,tableRef:{current:null},width:"100%",height:"auto",processingThrottleMs:100,autoWidth:!0,style:{},className:{}}}static fromPartialConfig(t){const e=(new oe).assign(t);return"boolean"==typeof t.sort&&t.sort&&e.assign({sort:{multiColumn:!0}}),e.assign({header:zt.createFromConfig(e)}),e.assign({storage:Xt.createFromConfig(e)}),e.assign({pipeline:ee.createFromConfig(e)}),e.assign({translator:new Et(e.language)}),e.search&&e.plugin.add({id:"search",position:Ot.Header,component:Ht}),e.pagination&&e.plugin.add({id:"pagination",position:Ot.Footer,component:Ft}),e.plugins&&e.plugins.forEach(t=>e.plugin.add(t)),e}}function se(e){const n=Ct();return _("td",t({role:e.role,colSpan:e.colSpan,"data-column-id":e.column&&e.column.id,className:tt(Y("td"),e.className,n.className.td),style:t({},e.style,n.style.td),onClick:t=>{e.messageCell||n.eventEmitter.emit("cellClick",t,e.cell,e.column,e.row)}},(r=e.column)?"function"==typeof r.attributes?r.attributes(e.cell.data,e.row,e.column):r.attributes:{}),e.column&&"function"==typeof e.column.formatter?e.column.formatter(e.cell.data,e.row,e.column):e.column&&e.column.plugin?_(qt,{pluginId:e.column.id,props:{column:e.column,cell:e.cell,row:e.row}}):e.cell.data);var r}function ie(t){const e=Ct(),n=At(t=>t.header);return _("tr",{className:tt(Y("tr"),e.className.tr),onClick:n=>{t.messageRow||e.eventEmitter.emit("rowClick",n,t.row)}},t.children?t.children:t.row.cells.map((e,r)=>{const o=(t=>{if(n){const e=zt.leafColumns(n.columns);if(e)return e[t]}return null})(r);return o&&o.hidden?null:_(se,{key:e.id,cell:e,row:t.row,column:o})}))}function le(t){return _(ie,{messageRow:!0},_(se,{role:"alert",colSpan:t.colSpan,messageCell:!0,cell:new O(t.message),className:tt(Y("message"),t.className?t.className:null)}))}function ae(){const t=Ct(),n=At(t=>t.data),r=At(t=>t.status),o=At(t=>t.header),s=It(),i=()=>o?o.visibleColumns.length:0;return _("tbody",{className:tt(Y("tbody"),t.className.tbody)},n&&n.rows.map(t=>_(ie,{key:t.id,row:t})),r===e.Loading&&(!n||0===n.length)&&_(le,{message:s("loading"),colSpan:i(),className:tt(Y("loading"),t.className.loading)}),r===e.Rendered&&n&&0===n.length&&_(le,{message:s("noRecordsFound"),colSpan:i(),className:tt(Y("notfound"),t.className.notfound)}),r===e.Error&&_(le,{message:s("error"),colSpan:i(),className:tt(Y("error"),t.className.error)}))}class ce extends J{validateProps(){for(const t of this.props.columns)void 0===t.direction&&(t.direction=1),1!==t.direction&&-1!==t.direction&&Wt.error(`Invalid sort direction ${t.direction}`)}get type(){return Z.Sort}compare(t,e){return t>e?1:t<e?-1:0}compareWrapper(t,e){let n=0;for(const r of this.props.columns){if(0!==n)break;{const o=t.cells[r.index].data,s=e.cells[r.index].data;n|="function"==typeof r.compare?r.compare(o,s)*r.direction:this.compare(o,s)*r.direction}}return n}_process(t){const e=[...t.rows];e.sort(this.compareWrapper.bind(this));const n=new B(e);return n.length=t.length,n}}const ue=(e,n,r,o)=>s=>{var i;let l=null!=(i=s.sort)&&i.columns?s.sort.columns.map(e=>t({},e)):[];const a=l.length,c=l.find(t=>t.index===e);let u=!1,d=!1,p=!1,h=!1;if(void 0!==c?r?-1===c.direction?p=!0:h=!0:1===a?h=!0:a>1&&(d=!0,u=!0):0===a?u=!0:a>0&&!r?(u=!0,d=!0):a>0&&r&&(u=!0),d&&(l=[]),u)l.push({index:e,direction:n,compare:o});else if(h){const t=l.indexOf(c);l[t].direction=n}else if(p){const t=l.indexOf(c);l.splice(t,1)}return t({},s,{sort:{columns:l}})},de=(e,n,r)=>o=>{const s=(o.sort?[...o.sort.columns]:[]).find(t=>t.index===e);return t({},o,s?ue(e,1===s.direction?-1:1,n,r)(o):ue(e,1,n,r)(o))};class pe extends J{get type(){return Z.ServerSort}_process(e){const n={};return this.props.url&&(n.url=this.props.url(e.url,this.props.columns)),this.props.body&&(n.body=this.props.body(e.body,this.props.columns)),t({},e,n)}}function he(e){const n=Ct(),{dispatch:r}=Tt(),o=It(),[s,i]=ft(0),l=n.sort,a=At(t=>t.sort),c="object"==typeof(null==l?void 0:l.server)?Z.ServerSort:Z.Sort,u=()=>{const t=n.pipeline.getStepsByType(c);if(t.length)return t[0]};return mt(()=>{const e=u()||(c===Z.ServerSort?new pe(t({columns:a?a.columns:[]},l.server)):new ce({columns:a?a.columns:[]}));return n.pipeline.tryRegister(e),()=>n.pipeline.unregister(e)},[n]),mt(()=>{if(!a)return;const t=a.columns.find(t=>t.index===e.index);i(t?t.direction:0)},[a]),mt(()=>{const t=u();t&&a&&t.setProps({columns:a.columns})},[a]),_("button",{tabIndex:-1,"aria-label":o("sort.sort"+(1===s?"Desc":"Asc")),title:o("sort.sort"+(1===s?"Desc":"Asc")),className:tt(Y("sort"),Y("sort",(t=>1===t?"asc":-1===t?"desc":"neutral")(s)),n.className.sort),onClick:t=>{t.preventDefault(),t.stopPropagation(),r(de(e.index,!0===t.shiftKey&&l.multiColumn,e.compare))}})}const _e=(t,e=100)=>{let n,r=Date.now();const o=(...e)=>{r=Date.now(),t(...e)};return(...t)=>{const s=Date.now()-r;s>=e?o(...t):(n&&clearTimeout(n),n=setTimeout(()=>{o(...t),n=null},e-s))}};function fe(t){let e;const n=t=>t instanceof MouseEvent?Math.floor(t.pageX):Math.floor(t.changedTouches[0].pageX),r=r=>{r.stopPropagation();const i=parseInt(t.thRef.current.style.width,10)-n(r);e=_e(t=>o(t,i),10),document.addEventListener("mouseup",s),document.addEventListener("touchend",s),document.addEventListener("mousemove",e),document.addEventListener("touchmove",e)},o=(e,r)=>{e.stopPropagation();const o=t.thRef.current;r+n(e)>=parseInt(o.style.minWidth,10)&&(o.style.width=`${r+n(e)}px`)},s=t=>{t.stopPropagation(),document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",e),document.removeEventListener("touchmove",e),document.removeEventListener("touchend",s)};return _("div",{className:tt(Y("th"),Y("resizable")),onMouseDown:r,onTouchStart:r,onClick:t=>t.stopPropagation()})}function me(e){const n=Ct(),r=gt(null),[o,s]=ft({}),{dispatch:i}=Tt();mt(()=>{if(n.fixedHeader&&r.current){const t=r.current.offsetTop;"number"==typeof t&&s({top:t})}},[r]);const l=()=>null!=e.column.sort,a=t=>{t.stopPropagation(),l()&&i(de(e.index,!0===t.shiftKey&&n.sort.multiColumn,e.column.sort.compare))};return _("th",t({ref:r,"data-column-id":e.column&&e.column.id,className:tt(Y("th"),l()?Y("th","sort"):null,n.fixedHeader?Y("th","fixed"):null,n.className.th),onClick:a,style:t({},n.style.th,{minWidth:e.column.minWidth,width:e.column.width},o,e.style),onKeyDown:t=>{l()&&13===t.which&&a(t)},rowSpan:e.rowSpan>1?e.rowSpan:void 0,colSpan:e.colSpan>1?e.colSpan:void 0},(()=>{const t=e.column;return t?"function"==typeof t.attributes?t.attributes(null,null,e.column):t.attributes:{}})(),l()?{tabIndex:0}:{}),_("div",{className:Y("th","content")},void 0!==e.column.name?e.column.name:void 0!==e.column.plugin?_(qt,{pluginId:e.column.plugin.id,props:{column:e.column}}):null),l()&&_(he,t({index:e.index},e.column.sort)),e.column.resizable&&e.index<n.header.visibleColumns.length-1&&_(fe,{column:e.column,thRef:r}))}function ge(){const t=Ct(),e=At(t=>t.header);return e?_("thead",{key:e.id,className:tt(Y("thead"),t.className.thead)},(()=>{const t=zt.tabularFormat(e.columns);return t.map((n,r)=>((t,n,r)=>{const o=zt.leafColumns(e.columns);return _(ie,null,t.map(t=>t.hidden?null:((t,e,n,r)=>{const{rowSpan:o,colSpan:s}=function(t,e,n){const r=zt.maximumDepth(t),o=n-e;return{rowSpan:Math.floor(o-r-r/o),colSpan:t.columns&&t.columns.length||1}}(t,e,r);return _(me,{column:t,index:n,colSpan:s,rowSpan:o})})(t,n,o.indexOf(t),r)))})(n,r,t.length))})()):null}const ye=e=>n=>t({},n,{header:e});function ve(){const e=Ct(),n=gt(null),{dispatch:r}=Tt();return mt(()=>{n&&r((e=>n=>t({},n,{tableRef:e}))(n))},[n]),_("table",{ref:n,role:"grid",className:tt(Y("table"),e.className.table),style:t({},e.style.table,{height:e.height})},_(ge,null),_(ae,null))}function be(){const[e,n]=ft(!0),r=gt(null),o=Ct();return mt(()=>{0===r.current.children.length&&n(!1)},[r]),e?_("div",{ref:r,className:tt(Y("head"),o.className.header),style:t({},o.style.header)},_(qt,{position:Ot.Header})):null}function we(){const e=gt(null),[n,r]=ft(!0),o=Ct();return mt(()=>{0===e.current.children.length&&r(!1)},[e]),n?_("div",{ref:e,className:tt(Y("footer"),o.className.footer),style:t({},o.style.footer)},_(qt,{position:Ot.Footer})):null}function xe(){const n=Ct(),{dispatch:r}=Tt(),o=At(t=>t.status),s=At(t=>t.data),i=At(t=>t.tableRef),l={current:null},a=_e(async()=>{r(n=>t({},n,{status:e.Loading}));try{const o=await n.pipeline.process();r((n=>r=>n?t({},r,{data:n,status:e.Loaded}):r)(o)),setTimeout(()=>{r(n=>n.status===e.Loaded?t({},n,{status:e.Rendered}):n)},0)}catch(n){Wt.error(n),r(n=>t({},n,{data:null,status:e.Error}))}},n.processingThrottleMs);return mt(()=>(r(ye(n.header)),a(),n.pipeline.on("updated",a),()=>n.pipeline.off("updated",a)),[]),mt(()=>{n.header&&o===e.Loaded&&null!=s&&s.length&&r(ye(n.header.adjustWidth(n,i,l)))},[s,n,l]),_("div",{role:"complementary",className:tt("gridjs",Y("container"),o===e.Loading?Y("loading"):null,n.className.container),style:t({},n.style.container,{width:n.width})},o===e.Loading&&_("div",{className:Y("loading-bar")}),_(be,null),_("div",{className:Y("wrapper"),style:{height:n.height}},_(ve,null)),_(we,null),_("div",{ref:l,id:"gridjs-temp",className:Y("temp")}))}class Ne extends K{constructor(t){super(),this.config=void 0,this.plugin=void 0,this.config=(new oe).assign({instance:this,eventEmitter:this}).update(t),this.plugin=this.config.plugin}updateConfig(t){return this.config.update(t),this}createElement(){return _(re.Provider,{value:this.config,children:_(xe,{})})}forceRender(){return this.config&&this.config.container||Wt.error("Container is empty. Make sure you call render() before forceRender()",!0),this.destroy(),F(this.createElement(),this.config.container),this}destroy(){this.config.pipeline.clearCache(),F(null,this.config.container)}render(t){return t||Wt.error("Container element cannot be null",!0),t.childNodes.length>0?(Wt.error(`The container element ${t} is not empty. Make sure the container is empty and call render() again`),this):(this.config.container=t,F(this.createElement(),t),this)}}export{O as Cell,y as Component,oe as Config,Ne as Grid,Ot as PluginPosition,W as Row,Y as className,_ as createElement,m as createRef,_ as h,j as html,Ct as useConfig,mt as useEffect,gt as useRef,At as useSelector,ft as useState,Tt as useStore,It as useTranslator};
//# sourceMappingURL=gridjs.mjs.map

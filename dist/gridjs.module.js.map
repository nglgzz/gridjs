{"version":3,"file":"gridjs.module.js","sources":["../src/types.ts","../node_modules/preact/dist/preact.module.js","../src/util/id.ts","../src/base.ts","../src/view/htmlElement.tsx","../src/util/html.ts","../src/cell.ts","../src/row.ts","../src/tabular.ts","../src/util/array.ts","../src/operator/search.ts","../src/util/eventEmitter.ts","../src/pipeline/processor.ts","../src/util/deepEqual.ts","../src/pipeline/filter/globalSearch.ts","../src/util/className.ts","../src/pipeline/filter/serverGlobalSearch.ts","../node_modules/preact/hooks/dist/hooks.module.js","../src/hooks/useConfig.ts","../src/i18n/en_US.ts","../src/i18n/language.ts","../src/view/plugin/search/actions.ts","../src/hooks/useStore.ts","../src/hooks/useSelector.ts","../src/view/plugin/search/search.tsx","../src/util/debounce.ts","../src/pipeline/limit/pagination.ts","../src/pipeline/limit/serverPagination.ts","../src/view/plugin/pagination.tsx","../src/util/width.ts","../src/view/table/shadow.tsx","../src/util/string.ts","../src/plugin.ts","../src/util/log.ts","../src/header.ts","../src/storage/storage.ts","../src/storage/memory.ts","../src/storage/server.ts","../src/storage/storageUtils.ts","../src/pipeline/pipeline.ts","../src/pipeline/extractor/storage.ts","../src/pipeline/transformer/arrayToTabular.ts","../src/pipeline/initiator/server.ts","../src/pipeline/transformer/storageResponseToArray.ts","../src/pipeline/pipelineUtils.ts","../src/state/store.ts","../src/config.ts","../src/view/table/td.tsx","../src/view/table/tr.tsx","../src/view/table/messageRow.tsx","../src/view/table/tbody.tsx","../src/pipeline/sort/native.ts","../src/view/plugin/sort/actions.ts","../src/pipeline/sort/server.ts","../src/view/plugin/sort/sort.tsx","../src/util/throttle.ts","../src/view/plugin/resize/resize.tsx","../src/view/table/th.tsx","../src/view/table/thead.tsx","../src/util/table.ts","../src/view/actions.ts","../src/view/table/table.tsx","../src/view/headerContainer.tsx","../src/view/footerContainer.tsx","../src/view/container.tsx","../src/grid.ts"],"sourcesContent":["import { ComponentChild } from 'preact';\nimport Row from './row';\nimport { SortConfig } from './view/plugin/sort/sort';\nimport { JSXInternal } from 'preact/src/jsx';\nimport { Plugin } from './plugin';\n\nexport type OneDArray<T> = T[];\nexport type TwoDArray<T> = T[][];\n\n/**\n * Table cell types\n */\nexport type TCell = number | string | boolean | ComponentChild | HTMLElement;\n// Array of Arrays\nexport type TDataArrayRow = OneDArray<TCell>;\nexport type TDataArray = OneDArray<TDataArrayRow>;\n// Array of Objects\nexport type TDataObjectRow = { [key: string]: TCell };\nexport type TDataObject = OneDArray<TDataObjectRow>;\n// (Array of Arrays) and (Array of Objects)\nexport type TData = TDataArray | TDataObject;\n\n// Table header cell type\nexport interface TColumn {\n  id?: string;\n  // default data for all columns\n  data?: ((row: TDataArrayRow | TDataObjectRow) => TCell) | TCell;\n  // column label\n  name?: string | ComponentChild;\n  plugin?: Plugin<any>;\n  // column width\n  width?: string;\n  minWidth?: string;\n  sort?: SortConfig;\n  columns?: OneDArray<TColumn>;\n  resizable?: boolean;\n  hidden?: boolean;\n  formatter?: (cell: TCell, row: Row, column: TColumn) => ComponentChild;\n  // HTML attributes to be added to all cells and header of this column\n  attributes?:\n    | ((\n        // this is null when `attributes` is called for a th\n        cell: TCell | null,\n        row: Row | null,\n        column: TColumn,\n      ) => JSXInternal.HTMLAttributes<HTMLTableCellElement>)\n    | JSXInternal.HTMLAttributes<HTMLTableCellElement>;\n}\n\n// Comparator function for the sorting plugin\nexport type Comparator<T> = (a: T, b: T) => number;\n\nexport interface TColumnSort {\n  index: number;\n  // 1 ascending, -1 descending\n  direction?: 1 | -1;\n}\n\n// container status\nexport enum Status {\n  Init,\n  Loading,\n  Loaded,\n  Rendered,\n  Error,\n}\n\nexport type CSSDeclaration = {\n  [key: string]: string | number;\n};\n","var n,l,u,i,t,o,r,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&&l.removeChild(n)}function h(l,u,i){var t,o,r,f={};for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return v(l,f,t,o,null)}function v(n,i,t,o,r){var f={type:n,props:i,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++u:r};return null==r&&null!=l.vnode&&l.vnode(f),f}function y(){return{current:null}}function p(n){return n.children}function d(n,l){this.props=n,this.context=l}function _(n,l){if(null==l)return n.__?_(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?_(n):null}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function b(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!g.__r++||o!==l.debounceRendering)&&((o=l.debounceRendering)||setTimeout)(g)}function g(){for(var n;g.__r=t.length;)n=t.sort(function(n,l){return n.__v.__b-l.__v.__b}),t=[],n.some(function(n){var l,u,i,t,o,r;n.__d&&(o=(t=(l=n).__v).__e,(r=l.__P)&&(u=[],(i=s({},t)).__v=t.__v+1,j(r,t,i,l.__n,void 0!==r.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?_(t):o,t.__h),z(u,t),t.__e!=o&&k(t)))})}function w(n,l,u,i,t,o,r,c,s,a){var h,y,d,k,b,g,w,x=i&&i.__k||e,C=x.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(k=u.__k[h]=null==(k=l[h])||\"boolean\"==typeof k?null:\"string\"==typeof k||\"number\"==typeof k||\"bigint\"==typeof k?v(null,k,null,null,k):Array.isArray(k)?v(p,{children:k},null,null,null):k.__b>0?v(k.type,k.props,k.key,k.ref?k.ref:null,k.__v):k)){if(k.__=u,k.__b=u.__b+1,null===(d=x[h])||d&&k.key==d.key&&k.type===d.type)x[h]=void 0;else for(y=0;y<C;y++){if((d=x[y])&&k.key==d.key&&k.type===d.type){x[y]=void 0;break}d=null}j(n,k,d=d||f,t,o,r,c,s,a),b=k.__e,(y=k.ref)&&d.ref!=y&&(w||(w=[]),d.ref&&w.push(d.ref,null,k),w.push(y,k.__c||b,k)),null!=b?(null==g&&(g=b),\"function\"==typeof k.type&&k.__k===d.__k?k.__d=s=m(k,s,n):s=A(n,k,d,x,b,s),\"function\"==typeof u.type&&(u.__d=s)):s&&d.__e==s&&s.parentNode!=n&&(s=_(d))}for(u.__e=g,h=C;h--;)null!=x[h]&&N(x[h],x[h]);if(w)for(h=0;h<w.length;h++)M(w[h],w[++h],w[++h])}function m(n,l,u){for(var i,t=n.__k,o=0;t&&o<t.length;o++)(i=t[o])&&(i.__=n,l=\"function\"==typeof i.type?m(i,l,u):A(u,i,i,t,i.__e,l));return l}function x(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){x(n,l)}):l.push(n)),l}function A(n,l,u,i,t,o){var r,f,e;if(void 0!==l.__d)r=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),r=null;else{for(f=o,e=0;(f=f.nextSibling)&&e<i.length;e+=1)if(f==t)break n;n.insertBefore(t,o),r=o}return void 0!==r?r:t.nextSibling}function C(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||H(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||H(n,o,l[o],u[o],i)}function $(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||c.test(l)?u:u+\"px\"}function H(n,l,u,i,t){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof i&&(n.style.cssText=i=\"\"),i)for(l in i)u&&l in u||$(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||$(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/Capture$/,\"\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?T:I,o):n.removeEventListener(l,o?T:I,o);else if(\"dangerouslySetInnerHTML\"!==l){if(t)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&-1==l.indexOf(\"-\")?n.removeAttribute(l):n.setAttribute(l,u))}}function I(n){this.l[n.type+!1](l.event?l.event(n):n)}function T(n){this.l[n.type+!0](l.event?l.event(n):n)}function j(n,u,i,t,o,r,f,e,c){var a,h,v,y,_,k,b,g,m,x,A,C,$,H,I,T=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(a=l.__b)&&a(u);try{n:if(\"function\"==typeof T){if(g=u.props,m=(a=T.contextType)&&t[a.__c],x=a?m?m.props.value:a.__:t,i.__c?b=(h=u.__c=i.__c).__=h.__E:(\"prototype\"in T&&T.prototype.render?u.__c=h=new T(g,x):(u.__c=h=new d(g,x),h.constructor=T,h.render=O),m&&m.sub(h),h.props=g,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=T.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=s({},h.__s)),s(h.__s,T.getDerivedStateFromProps(g,h.__s))),y=h.props,_=h.state,v)null==T.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==T.getDerivedStateFromProps&&g!==y&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(g,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(g,h.__s,x)||u.__v===i.__v){for(h.props=g,h.state=h.__s,u.__v!==i.__v&&(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),A=0;A<h._sb.length;A++)h.__h.push(h._sb[A]);h._sb=[],h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(g,h.__s,x),null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(y,_,k)})}if(h.context=x,h.props=g,h.__v=u,h.__P=n,C=l.__r,$=0,\"prototype\"in T&&T.prototype.render){for(h.state=h.__s,h.__d=!1,C&&C(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,C&&C(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++$<25);h.state=h.__s,null!=h.getChildContext&&(t=s(s({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(k=h.getSnapshotBeforeUpdate(y,_)),I=null!=a&&a.type===p&&null==a.key?a.props.children:a,w(n,Array.isArray(I)?I:[I],u,i,t,o,r,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&&f.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=L(i.__e,u,i,t,o,r,f,c);(a=l.diffed)&&a(u)}catch(n){u.__v=null,(c||null!=r)&&(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),l.__e(n,u,i)}}function z(n,u){l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function L(l,u,i,t,o,r,e,c){var s,h,v,y=i.props,p=u.props,d=u.type,k=0;if(\"svg\"===d&&(o=!0),null!=r)for(;k<r.length;k++)if((s=r[k])&&\"setAttribute\"in s==!!d&&(d?s.localName===d:3===s.nodeType)){l=s,r[k]=null;break}if(null==l){if(null===d)return document.createTextNode(p);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",d):document.createElement(d,p.is&&p),r=null,c=!1}if(null===d)y===p||c&&l.data===p||(l.data=p);else{if(r=r&&n.call(l.childNodes),h=(y=i.props||f).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!c){if(null!=r)for(y={},k=0;k<l.attributes.length;k++)y[l.attributes[k].name]=l.attributes[k].value;(v||h)&&(v&&(h&&v.__html==h.__html||v.__html===l.innerHTML)||(l.innerHTML=v&&v.__html||\"\"))}if(C(l,p,y,o,c),v)u.__k=[];else if(k=u.props.children,w(l,Array.isArray(k)?k:[k],u,i,t,o&&\"foreignObject\"!==d,r,e,r?r[0]:i.__k&&_(i,0),c),null!=r)for(k=r.length;k--;)null!=r[k]&&a(r[k]);c||(\"value\"in p&&void 0!==(k=p.value)&&(k!==l.value||\"progress\"===d&&!k||\"option\"===d&&k!==y.value)&&H(l,\"value\",k,y.value,!1),\"checked\"in p&&void 0!==(k=p.checked)&&k!==l.checked&&H(l,\"checked\",k,y.checked,!1))}return l}function M(n,u,i){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,i)}}function N(n,u,i){var t,o;if(l.unmount&&l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||M(t,null,u)),null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){l.__e(n,u)}t.base=t.__P=null,n.__c=void 0}if(t=n.__k)for(o=0;o<t.length;o++)t[o]&&N(t[o],u,i||\"function\"!=typeof n.type);i||null==n.__e||a(n.__e),n.__=n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function P(u,i,t){var o,r,e;l.__&&l.__(u,i),r=(o=\"function\"==typeof t)?null:t&&t.__k||i.__k,e=[],j(i,u=(!o&&t||i).__k=h(p,null,[u]),r||f,f,void 0!==i.ownerSVGElement,!o&&t?[t]:r?null:i.firstChild?n.call(i.childNodes):null,e,!o&&t?t:r?r.__e:i.firstChild,o),z(e,u)}function S(n,l){P(n,l,S)}function q(l,u,i){var t,o,r,f=s({},l.props);for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),v(l.type,f,t||l.key,o||l.ref,null)}function B(n,l){var u={__c:l=\"__cC\"+r++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(b)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=e.slice,l={__e:function(n,l,u,i){for(var t,o,r;l=l.__;)if((t=l.__c)&&!t.__)try{if((o=t.constructor)&&null!=o.getDerivedStateFromError&&(t.setState(o.getDerivedStateFromError(n)),r=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(n,i||{}),r=t.__d),r)return t.__E=t}catch(l){n=l}throw n}},u=0,i=function(n){return null!=n&&void 0===n.constructor},d.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),\"function\"==typeof n&&(n=n(s({},u),this.props)),n&&s(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),b(this))},d.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),b(this))},d.prototype.render=p,t=[],g.__r=0,r=0;export{d as Component,p as Fragment,q as cloneElement,B as createContext,h as createElement,y as createRef,h,S as hydrate,i as isValidElement,l as options,P as render,x as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","export type ID = string;\n\nexport function generateUUID(): ID {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n","import { generateUUID, ID } from './util/id';\n\nclass Base {\n  private readonly _id: ID;\n\n  constructor(id?: ID) {\n    this._id = id || generateUUID();\n  }\n\n  get id(): ID {\n    return this._id;\n  }\n}\n\nexport default Base;\n","import { h } from 'preact';\n\nexport interface HTMLContentProps {\n  content: string;\n  parentElement?: string;\n}\n\nexport function HTMLElement(props: HTMLContentProps) {\n  return h(props.parentElement || 'span', {\n    dangerouslySetInnerHTML: { __html: props.content },\n  });\n}\n","import { h, VNode } from 'preact';\nimport { HTMLElement } from '../view/htmlElement';\n\nexport function decode(content: string): string {\n  const value = new DOMParser().parseFromString(content, 'text/html');\n  return value.documentElement.textContent;\n}\n\nexport function html(content: string, parentElement?: string): VNode {\n  return h(HTMLElement, { content: content, parentElement: parentElement });\n}\n","import Base from './base';\nimport { TCell } from './types';\nimport { html } from './util/html';\nimport { ComponentChild } from 'preact';\n\nclass Cell extends Base {\n  // because a Cell is a subset of TCell type\n  public data: number | string | boolean | ComponentChild;\n\n  constructor(data: TCell) {\n    super();\n\n    this.update(data);\n  }\n\n  private cast(data: TCell): number | string | boolean | ComponentChild {\n    if (data instanceof HTMLElement) {\n      return html(data.outerHTML);\n    }\n\n    return data;\n  }\n\n  /**\n   * Updates the Cell's data\n   *\n   * @param data\n   */\n  public update(data: TCell): Cell {\n    this.data = this.cast(data);\n    return this;\n  }\n}\n\nexport default Cell;\n","import Cell from './cell';\nimport Base from './base';\nimport { TCell } from './types';\n\nclass Row extends Base {\n  private _cells: Cell[];\n\n  constructor(cells?: Cell[]) {\n    super();\n\n    this.cells = cells || [];\n  }\n\n  public cell(index: number): Cell {\n    return this._cells[index];\n  }\n\n  public get cells(): Cell[] {\n    return this._cells;\n  }\n\n  public set cells(cells: Cell[]) {\n    this._cells = cells;\n  }\n\n  public toArray(): TCell[] {\n    return this.cells.map((cell) => cell.data);\n  }\n\n  /**\n   * Creates a new Row from an array of Cell(s)\n   * This method generates a new ID for the Row and all nested elements\n   *\n   * @param cells\n   * @returns Row\n   */\n  static fromCells(cells: Cell[]): Row {\n    return new Row(cells.map((cell) => new Cell(cell.data)));\n  }\n\n  get length(): number {\n    return this.cells.length;\n  }\n}\n\nexport default Row;\n","import Base from './base';\nimport Row from './row';\nimport Cell from './cell';\nimport { OneDArray, TCell, TwoDArray } from './types';\nimport { oneDtoTwoD } from './util/array';\n\nclass Tabular extends Base {\n  private _rows: Row[];\n  private _length: number;\n\n  constructor(rows?: Row[] | Row) {\n    super();\n\n    if (rows instanceof Array) {\n      this.rows = rows;\n    } else if (rows instanceof Row) {\n      this.rows = [rows];\n    } else {\n      this.rows = [];\n    }\n  }\n\n  get rows(): Row[] {\n    return this._rows;\n  }\n\n  set rows(rows: Row[]) {\n    this._rows = rows;\n  }\n\n  get length(): number {\n    return this._length || this.rows.length;\n  }\n\n  // we want to sent the length when storage is ServerStorage\n  set length(len: number) {\n    this._length = len;\n  }\n\n  public toArray(): TCell[][] {\n    return this.rows.map((row) => row.toArray());\n  }\n\n  /**\n   * Creates a new Tabular from an array of Row(s)\n   * This method generates a new ID for the Tabular and all nested elements\n   *\n   * @param rows\n   * @returns Tabular\n   */\n  static fromRows(rows: Row[]): Tabular {\n    return new Tabular(rows.map((row) => Row.fromCells(row.cells)));\n  }\n\n  /**\n   * Creates a new Tabular from a 2D array\n   * This method generates a new ID for the Tabular and all nested elements\n   *\n   * @param data\n   * @returns Tabular\n   */\n  static fromArray<T extends TCell>(\n    data: OneDArray<T> | TwoDArray<T>,\n  ): Tabular {\n    data = oneDtoTwoD(data);\n\n    return new Tabular(\n      data.map((row) => new Row(row.map((cell) => new Cell(cell)))),\n    );\n  }\n}\n\nexport default Tabular;\n","import { OneDArray, TwoDArray } from '../types';\n\nexport function oneDtoTwoD<T>(data: OneDArray<T> | TwoDArray<T>): TwoDArray<T> {\n  if (data[0] && !(data[0] instanceof Array)) {\n    return [data] as TwoDArray<T>;\n  }\n\n  return data as TwoDArray<T>;\n}\n\nexport function flatten<T>(arrays: TwoDArray<T>): OneDArray<T> {\n  return arrays.reduce((prev, x) => prev.concat(x), []);\n}\n","import Tabular from '../tabular';\nimport { VNode } from 'preact';\nimport Cell from '../cell';\nimport { HTMLContentProps } from '../view/htmlElement';\nimport { OneDArray, TCell, TColumn } from '../types';\n\nfunction cellMatches(\n  rowIndex: number,\n  cellIndex: number,\n  cell: Cell,\n  keyword: string,\n  {\n    columns,\n    ignoreHiddenColumns,\n    selector,\n  }: {\n    columns: OneDArray<TColumn>;\n    ignoreHiddenColumns: boolean;\n    selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string;\n  },\n) {\n  if (!cell) {\n    return false;\n  }\n\n  if (ignoreHiddenColumns) {\n    if (\n      columns &&\n      columns[cellIndex] &&\n      typeof columns[cellIndex] === 'object'\n    ) {\n      const typedColumn = columns[cellIndex] as TColumn;\n      if (typedColumn.hidden) {\n        return false;\n      }\n    }\n  }\n\n  let data = '';\n\n  if (typeof selector === 'function') {\n    data = selector(cell.data, rowIndex, cellIndex);\n  } else if (typeof cell.data === 'object') {\n    // HTMLContent element\n    const element = cell.data as VNode<HTMLContentProps>;\n    if (element && element.props && element.props.content) {\n      // TODO: we should only search in the content of the element. props.content is the entire HTML element\n      data = element.props.content;\n    }\n  } else {\n    // primitive types\n    data = String(cell.data);\n  }\n\n  return new RegExp(keyword, 'gi').test(data);\n}\n\nfunction flatBooleanEval(expression: string, match: (kw: string) => boolean) {\n  return expression.split(/ *\\bOR\\b */).some((or) => {\n    return or.split(/ *\\bAND\\b */).every((and) => {\n      const trimmedAnd = and.trim();\n\n      if (trimmedAnd === 'true' || trimmedAnd === '') {\n        return true;\n      }\n\n      if (trimmedAnd === 'false') {\n        return false;\n      }\n\n      return match(trimmedAnd);\n    });\n  });\n}\n\nconst topLevelExpressionsPattern = /\\\\\\(([^()]+)\\\\\\)/g;\n\nfunction nestedBooleanEval(expression: string, match: (kw: string) => boolean) {\n  const unwrappedExpression = expression.replace(\n    topLevelExpressionsPattern,\n    (_, group) => String(flatBooleanEval(group, match)),\n  );\n\n  if (topLevelExpressionsPattern.test(unwrappedExpression)) {\n    return nestedBooleanEval(unwrappedExpression, match);\n  }\n\n  return flatBooleanEval(unwrappedExpression, match);\n}\n\nexport default function (\n  keyword: string,\n  columns: OneDArray<TColumn>,\n  ignoreHiddenColumns: boolean,\n  tabular: Tabular,\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string,\n): Tabular {\n  // escape special regex chars\n  keyword = keyword.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, '\\\\$&');\n\n  const rowMatches = (row, rowIndex) => (kw) =>\n    row.cells.some((cell, cellIndex) =>\n      cellMatches(rowIndex, cellIndex, cell, kw, {\n        columns,\n        ignoreHiddenColumns,\n        selector,\n      }),\n    );\n\n  return new Tabular(\n    tabular.rows.filter((row, rowIndex) => {\n      return nestedBooleanEval(keyword, rowMatches(row, rowIndex));\n    }),\n  );\n}\n","type EventArgs<T> = [T] extends [(...args: infer U) => any]\n  ? U\n  : [T] extends [void]\n  ? []\n  : [T];\n\n/**\n * Example:\n *\n * export interface BaseEvents<P, S> {\n *   SET_STATE: (component: BaseComponent<P, S>, state: S) => void;\n * }\n */\n\nexport interface EventEmitter<EventTypes> {\n  addListener<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  on<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  off<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  emit<EventName extends keyof EventTypes>(\n    event: EventName,\n    ...args: EventArgs<EventTypes[EventName]>\n  ): boolean;\n}\n\nexport class EventEmitter<EventTypes> {\n  private callbacks: { [event: string]: ((...args) => void)[] };\n\n  // because we are using EventEmitter as a mixin and the\n  // constructor won't be called by the applyMixins function\n  // see src/base.ts and src/util/applyMixin.ts\n  private init(event?: string): void {\n    if (!this.callbacks) {\n      this.callbacks = {};\n    }\n\n    if (event && !this.callbacks[event]) {\n      this.callbacks[event] = [];\n    }\n  }\n\n  listeners(): { [event: string]: ((...args) => void)[] } {\n    return this.callbacks;\n  }\n\n  on<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes> {\n    this.init(event as string);\n    this.callbacks[event as string].push(listener);\n    return this;\n  }\n\n  off<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes> {\n    const eventName = event as string;\n\n    this.init();\n\n    if (!this.callbacks[eventName] || this.callbacks[eventName].length === 0) {\n      // there is no callbacks with this key\n      return this;\n    }\n\n    this.callbacks[eventName] = this.callbacks[eventName].filter(\n      (value) => value != listener,\n    );\n\n    return this;\n  }\n\n  emit<EventName extends keyof EventTypes>(\n    event: EventName,\n    ...args: EventArgs<EventTypes[EventName]>\n  ): boolean {\n    const eventName = event as string;\n\n    this.init(eventName);\n\n    if (this.callbacks[eventName].length > 0) {\n      this.callbacks[eventName].forEach((value) => value(...args));\n      return true;\n    }\n\n    return false;\n  }\n}\n","// The order of enum items define the processing order of the processor type\n// e.g. Extractor = 0 will be processed before Transformer = 1\nimport { generateUUID, ID } from '../util/id';\nimport { EventEmitter } from '../util/eventEmitter';\nimport { deepEqual } from '../util/deepEqual';\n\nexport enum ProcessorType {\n  Initiator,\n  ServerFilter,\n  ServerSort,\n  ServerLimit,\n  Extractor,\n  Transformer,\n  Filter,\n  Sort,\n  Limit,\n}\n\ninterface PipelineProcessorEvents {\n  propsUpdated: <T, P>(processor: PipelineProcessor<T, P>) => void;\n  beforeProcess: (...args) => void;\n  afterProcess: (...args) => void;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface PipelineProcessorProps {}\n\nexport abstract class PipelineProcessor<\n  T,\n  P extends Partial<PipelineProcessorProps>,\n> extends EventEmitter<PipelineProcessorEvents> {\n  public readonly id: ID;\n  private _props: P;\n\n  abstract get type(): ProcessorType;\n  protected abstract _process(...args): T | Promise<T>;\n  protected validateProps?(...args): void;\n\n  constructor(props?: Partial<P>) {\n    super();\n\n    this._props = {} as P;\n    this.id = generateUUID();\n\n    if (props) this.setProps(props);\n  }\n\n  /**\n   * process is used to call beforeProcess and afterProcess callbacks\n   * This function is just a wrapper that calls _process()\n   *\n   * @param args\n   */\n  process(...args): T | Promise<T> {\n    if (this.validateProps instanceof Function) {\n      this.validateProps(...args);\n    }\n\n    this.emit('beforeProcess', ...args);\n    const result = this._process(...args);\n    this.emit('afterProcess', ...args);\n    return result;\n  }\n\n  setProps(props: Partial<P>): this {\n    const updatedProps = {\n      ...this._props,\n      ...props,\n    };\n\n    if (!deepEqual(updatedProps, this._props)) {\n      this._props = updatedProps;\n      this.emit('propsUpdated', this);\n    }\n\n    return this;\n  }\n\n  get props(): P {\n    return this._props;\n  }\n}\n","/**\n * Returns true if both objects are equal\n * @param a left object\n * @param b right object\n * @returns\n */\nexport function deepEqual<A, B>(obj1: A, obj2: B) {\n  // If objects are not the same type, return false\n  if (typeof obj1 !== typeof obj2) {\n    return false;\n  }\n  // If objects are both null or undefined, return true\n  if (obj1 === null && obj2 === null) {\n    return true;\n  }\n  // If objects are both primitive types, compare them directly\n  if (typeof obj1 !== 'object') {\n    // eslint-disable-next-line\n    // @ts-ignore\n    return obj1 === obj2;\n  }\n  // If objects are arrays, compare their elements recursively\n  if (Array.isArray(obj1) && Array.isArray(obj2)) {\n    if (obj1.length !== obj2.length) {\n      return false;\n    }\n    for (let i = 0; i < obj1.length; i++) {\n      if (!deepEqual(obj1[i], obj2[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  // If objects are both objects, compare their properties recursively\n  const keys1 = Object.keys(obj1);\n  const keys2 = Object.keys(obj2);\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n  for (const key of keys1) {\n    // eslint-disable-next-line no-prototype-builtins\n    if (!obj2.hasOwnProperty(key) || !deepEqual(obj1[key], obj2[key])) {\n      return false;\n    }\n  }\n  return true;\n}\n","import search from '../../operator/search';\nimport Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { OneDArray, TCell, TColumn } from '../../types';\n\ninterface GlobalSearchFilterProps extends PipelineProcessorProps {\n  keyword: string;\n  columns: OneDArray<TColumn>;\n  ignoreHiddenColumns: boolean;\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string;\n}\n\nclass GlobalSearchFilter extends PipelineProcessor<\n  Tabular,\n  GlobalSearchFilterProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Filter;\n  }\n\n  _process(data: Tabular): Tabular {\n    if (this.props.keyword) {\n      return search(\n        String(this.props.keyword).trim(),\n        this.props.columns,\n        this.props.ignoreHiddenColumns,\n        data,\n        this.props.selector,\n      );\n    }\n\n    return data;\n  }\n}\n\nexport default GlobalSearchFilter;\n","import { JSXInternal } from 'preact/src/jsx';\n\nexport function className(...args: string[]): string {\n  const prefix = 'gridjs';\n\n  return `${prefix}${args.reduce(\n    (prev: string, cur: string) => `${prev}-${cur}`,\n    '',\n  )}`;\n}\n\nexport function classJoin(\n  ...classNames: (undefined | string | JSXInternal.SignalLike<string>)[]\n): string {\n  return classNames\n    .map((x) => (x ? x.toString() : ''))\n    .filter((x) => x)\n    .reduce((className, prev) => `${className || ''} ${prev}`, '')\n    .trim();\n}\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerGlobalSearchFilterProps extends PipelineProcessorProps {\n  keyword?: string;\n  url?: (prevUrl: string, keyword: string) => string;\n  body?: (prevBody: BodyInit, keyword: string) => BodyInit;\n}\n\nclass ServerGlobalSearchFilter extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerGlobalSearchFilterProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerFilter;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    if (!this.props.keyword) return options;\n\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(options.url, this.props.keyword);\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(options.body, this.props.keyword);\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerGlobalSearchFilter;\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=[],e=n.__b,a=n.__r,v=n.diffed,l=n.__c,m=n.unmount;function d(t,u){n.__h&&n.__h(r,t,o||u),o=0;var i=r.__H||(r.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({__V:c}),i.__[t]}function p(n){return o=1,y(B,n)}function y(n,u,i){var o=d(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):B(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.u)){r.u=!0;var f=r.shouldComponentUpdate;r.shouldComponentUpdate=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return n.__c});if(u.every(function(n){return!n.__N}))return!f||f.call(this,n,t,r);var i=!1;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),!(!i&&o.__c.props===n)&&(!f||f.call(this,n,t,r))}}return o.__N||o.__}function h(u,i){var o=d(t++,3);!n.__s&&z(o.__H,i)&&(o.__=u,o.i=i,r.__H.__h.push(o))}function s(u,i){var o=d(t++,4);!n.__s&&z(o.__H,i)&&(o.__=u,o.i=i,r.__h.push(o))}function _(n){return o=5,F(function(){return{current:n}},[])}function A(n,t,r){o=6,s(function(){return\"function\"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0},null==r?r:r.concat(n))}function F(n,r){var u=d(t++,7);return z(u.__H,r)?(u.__V=n(),u.i=r,u.__h=n,u.__V):u.__}function T(n,t){return o=8,F(function(){return n},t)}function q(n){var u=r.context[n.__c],i=d(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function x(t,r){n.useDebugValue&&n.useDebugValue(r?r(t):t)}function P(n){var u=d(t++,10),i=p();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function V(){var n=d(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function b(){for(var t;t=f.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(k),t.__H.__h.forEach(w),t.__H.__h=[]}catch(r){t.__H.__h=[],n.__e(r,t.__v)}}n.__b=function(n){r=null,e&&e(n)},n.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=c,n.__N=n.i=void 0})):(i.__h.forEach(k),i.__h.forEach(w),i.__h=[])),u=r},n.diffed=function(t){v&&v(t);var o=t.__c;o&&o.__H&&(o.__H.__h.length&&(1!==f.push(o)&&i===n.requestAnimationFrame||((i=n.requestAnimationFrame)||j)(b)),o.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==c&&(n.__=n.__V),n.i=void 0,n.__V=c})),u=r=null},n.__c=function(t,r){r.some(function(t){try{t.__h.forEach(k),t.__h=t.__h.filter(function(n){return!n.__||w(n)})}catch(u){r.some(function(n){n.__h&&(n.__h=[])}),r=[],n.__e(u,t.__v)}}),l&&l(t,r)},n.unmount=function(t){m&&m(t);var r,u=t.__c;u&&u.__H&&(u.__H.__.forEach(function(n){try{k(n)}catch(n){r=n}}),u.__H=void 0,r&&n.__e(r,u.__v))};var g=\"function\"==typeof requestAnimationFrame;function j(n){var t,r=function(){clearTimeout(u),g&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,100);g&&(t=requestAnimationFrame(r))}function k(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function w(n){var t=r;n.__c=n.__(),r=t}function z(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function B(n,t){return\"function\"==typeof t?t(n):t}export{T as useCallback,q as useContext,x as useDebugValue,h as useEffect,P as useErrorBoundary,V as useId,A as useImperativeHandle,s as useLayoutEffect,F as useMemo,y as useReducer,_ as useRef,p as useState};\n//# sourceMappingURL=hooks.module.js.map\n","import { useContext } from 'preact/hooks';\nimport { Config, ConfigContext } from '../config';\n\nexport function useConfig(): Config {\n  return useContext(ConfigContext);\n}\n","export default {\n  search: {\n    placeholder: 'Type a keyword...',\n  },\n  sort: {\n    sortAsc: 'Sort column ascending',\n    sortDesc: 'Sort column descending',\n  },\n  pagination: {\n    previous: 'Previous',\n    next: 'Next',\n    navigate: (page, pages) => `Page ${page} of ${pages}`,\n    page: (page) => `Page ${page}`,\n    showing: 'Showing',\n    of: 'of',\n    to: 'to',\n    results: 'results',\n  },\n  loading: 'Loading...',\n  noRecordsFound: 'No matching records found',\n  error: 'An error happened while fetching the data',\n};\n","import { useConfig } from '../hooks/useConfig';\nimport enUS from './en_US';\ntype MessageFormat = (...args) => string;\ntype Message = string | MessageFormat;\nexport type Language = { [key: string]: Message | Language };\n\nexport class Translator {\n  private readonly _language: Language;\n  private readonly _defaultLanguage: Language;\n\n  constructor(language?: Language) {\n    this._language = language;\n    this._defaultLanguage = enUS;\n  }\n\n  /**\n   * Tries to split the message with \".\" and find\n   * the key in the given language\n   *\n   * @param message\n   * @param lang\n   */\n  getString(message: string, lang: Language): MessageFormat {\n    if (!lang || !message) return null;\n\n    const splitted = message.split('.');\n    const key = splitted[0];\n\n    if (lang[key]) {\n      const val = lang[key];\n\n      if (typeof val === 'string') {\n        return (): string => val;\n      } else if (typeof val === 'function') {\n        return val;\n      } else {\n        return this.getString(splitted.slice(1).join('.'), val);\n      }\n    }\n\n    return null;\n  }\n\n  translate(message: string, ...args): string {\n    const translated = this.getString(message, this._language);\n    let messageFormat;\n\n    if (translated) {\n      messageFormat = translated;\n    } else {\n      messageFormat = this.getString(message, this._defaultLanguage);\n    }\n\n    if (messageFormat) {\n      return messageFormat(...args);\n    }\n\n    return message;\n  }\n}\n\nexport function useTranslator() {\n  const config = useConfig();\n\n  return function (message: string, ...args): string {\n    return config.translator.translate(message, ...args);\n  };\n}\n","export const SearchKeyword = (payload) => (state) => {\n  return {\n    ...state,\n    search: {\n      keyword: payload,\n    },\n  };\n};\n","import { useConfig } from './useConfig';\n\nexport function useStore() {\n  const config = useConfig();\n  return config.store;\n}\n","import { useEffect, useState } from 'preact/hooks';\nimport { useStore } from './useStore';\n\nexport default function useSelector<T>(selector: (state) => T) {\n  const store = useStore();\n  const [current, setCurrent] = useState(selector(store.getState()));\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      const updated = selector(store.getState());\n\n      if (current !== updated) {\n        setCurrent(updated);\n      }\n    });\n\n    return unsubscribe;\n  }, []);\n\n  return current;\n}\n","import { h, JSX } from 'preact';\nimport GlobalSearchFilter from '../../../pipeline/filter/globalSearch';\nimport { classJoin, className } from '../../../util/className';\nimport ServerGlobalSearchFilter from '../../../pipeline/filter/serverGlobalSearch';\nimport { TCell } from '../../../types';\nimport { useConfig } from '../../../hooks/useConfig';\nimport { useCallback, useEffect, useState } from 'preact/hooks';\nimport { useTranslator } from '../../../i18n/language';\nimport * as actions from './actions';\nimport { useStore } from '../../../hooks/useStore';\nimport useSelector from '../../../hooks/useSelector';\nimport { debounce } from '../../../util/debounce';\n\nexport interface SearchConfig {\n  keyword?: string;\n  ignoreHiddenColumns?: boolean;\n  debounceTimeout?: number;\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string;\n  server?: {\n    url?: (prevUrl: string, keyword: string) => string;\n    body?: (prevBody: BodyInit, keyword: string) => BodyInit;\n  };\n}\n\nexport function Search() {\n  const [processor, setProcessor] = useState<\n    GlobalSearchFilter | ServerGlobalSearchFilter\n  >(undefined);\n  const config = useConfig();\n  const props = config.search as SearchConfig;\n  const _ = useTranslator();\n  const { dispatch } = useStore();\n  const state = useSelector((state) => state.search);\n\n  useEffect(() => {\n    if (!processor) return;\n\n    processor.setProps({\n      keyword: state?.keyword,\n    });\n  }, [state, processor]);\n\n  useEffect(() => {\n    if (props.server) {\n      setProcessor(\n        new ServerGlobalSearchFilter({\n          keyword: props.keyword,\n          url: props.server.url,\n          body: props.server.body,\n        }),\n      );\n    } else {\n      setProcessor(\n        new GlobalSearchFilter({\n          keyword: props.keyword,\n          columns: config.header && config.header.columns,\n          ignoreHiddenColumns:\n            props.ignoreHiddenColumns ||\n            props.ignoreHiddenColumns === undefined,\n          selector: props.selector,\n        }),\n      );\n    }\n\n    // initial search\n    if (props.keyword) dispatch(actions.SearchKeyword(props.keyword));\n  }, [props]);\n\n  useEffect(() => {\n    if (!processor) return undefined;\n\n    config.pipeline.register<object, object>(processor);\n\n    return () => config.pipeline.unregister<object, object>(processor);\n  }, [config, processor]);\n\n  const debouncedOnInput = useCallback(\n    debounce(\n      (event: JSX.TargetedEvent<HTMLInputElement>) => {\n        if (event.target instanceof HTMLInputElement) {\n          dispatch(actions.SearchKeyword(event.target.value));\n        }\n      },\n      processor instanceof ServerGlobalSearchFilter\n        ? props.debounceTimeout || 250\n        : 0,\n    ),\n    [props, processor],\n  );\n\n  return (\n    <div className={className(classJoin('search', config.className?.search))}>\n      <input\n        type=\"search\"\n        placeholder={_('search.placeholder')}\n        aria-label={_('search.placeholder')}\n        onInput={debouncedOnInput}\n        className={classJoin(className('input'), className('search', 'input'))}\n        value={state?.keyword || ''}\n      />\n    </div>\n  );\n}\n","export const debounce = <F extends (...args: any[]) => any>(\n  func: F,\n  waitFor: number,\n) => {\n  let timeout;\n\n  return (...args: Parameters<F>): Promise<ReturnType<F>> =>\n    new Promise((resolve) => {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n\n      timeout = setTimeout(() => resolve(func(...args)), waitFor);\n    });\n};\n","import Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\n\ninterface PaginationLimitProps extends PipelineProcessorProps {\n  page: number;\n  limit: number;\n}\n\nclass PaginationLimit extends PipelineProcessor<Tabular, PaginationLimitProps> {\n  protected validateProps(): void {\n    if (isNaN(Number(this.props.limit)) || isNaN(Number(this.props.page))) {\n      throw Error('Invalid parameters passed');\n    }\n  }\n\n  get type(): ProcessorType {\n    return ProcessorType.Limit;\n  }\n\n  protected _process(data: Tabular): Tabular {\n    const page = this.props.page;\n    const start = page * this.props.limit;\n    const end = (page + 1) * this.props.limit;\n\n    return new Tabular(data.rows.slice(start, end));\n  }\n}\n\nexport default PaginationLimit;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerPaginationLimitProps extends PipelineProcessorProps {\n  page: number;\n  limit: number;\n  url?: (prevUrl: string, page: number, limit: number) => string;\n  body?: (prevBody: BodyInit, page: number, limit: number) => BodyInit;\n}\n\nclass ServerPaginationLimit extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerPaginationLimitProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerLimit;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(\n        options.url,\n        this.props.page,\n        this.props.limit,\n      );\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(\n        options.body,\n        this.props.page,\n        this.props.limit,\n      );\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerPaginationLimit;\n","import { h, Fragment } from 'preact';\nimport PaginationLimit from '../../pipeline/limit/pagination';\nimport { classJoin, className } from '../../util/className';\nimport ServerPaginationLimit from '../../pipeline/limit/serverPagination';\nimport { useConfig } from '../../hooks/useConfig';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useTranslator } from '../../i18n/language';\n\nexport interface PaginationConfig {\n  limit?: number;\n  page?: number;\n  summary?: boolean;\n  nextButton?: boolean;\n  prevButton?: boolean;\n  buttonsCount?: number;\n  resetPageOnUpdate?: boolean;\n  server?: {\n    url?: (prevUrl: string, page: number, limit: number) => string;\n    body?: (prevBody: BodyInit, page: number, limit: number) => BodyInit;\n  };\n}\n\nexport function Pagination() {\n  const config = useConfig();\n  const {\n    server,\n    summary = true,\n    nextButton = true,\n    prevButton = true,\n    buttonsCount = 3,\n    limit = 10,\n    page = 0,\n    resetPageOnUpdate = true,\n  } = config.pagination as PaginationConfig;\n\n  const processor = useRef<PaginationLimit | ServerPaginationLimit>(null);\n  const [currentPage, setCurrentPage] = useState(page);\n  const [total, setTotal] = useState(0);\n  const _ = useTranslator();\n\n  useEffect(() => {\n    if (server) {\n      processor.current = new ServerPaginationLimit({\n        limit: limit,\n        page: currentPage,\n        url: server.url,\n        body: server.body,\n      });\n\n      config.pipeline.register(processor.current);\n    } else {\n      processor.current = new PaginationLimit({\n        limit: limit,\n        page: currentPage,\n      });\n\n      config.pipeline.register(processor.current);\n    }\n\n    if (processor.current instanceof ServerPaginationLimit) {\n      config.pipeline.on('afterProcess', (tabular) => setTotal(tabular.length));\n    } else if (processor.current instanceof PaginationLimit) {\n      // Pagination (all Limit processors) is the last step in the pipeline\n      // and we assume that at this stage, we have the rows that we care about.\n      // Let's grab the rows before processing Pagination and set total number of rows\n      processor.current.on('beforeProcess', (tabular) =>\n        setTotal(tabular.length),\n      );\n    }\n\n    config.pipeline.on('updated', onUpdate);\n\n    // we need to make sure that the state is set\n    // to the default props when an error happens\n    config.pipeline.on('error', () => {\n      setTotal(0);\n      setCurrentPage(0);\n    });\n\n    return () => {\n      config.pipeline.unregister<object, object>(processor.current);\n      config.pipeline.off('updated', onUpdate);\n    };\n  }, []);\n\n  const onUpdate = (updatedProcessor) => {\n    // this is to ensure that the current page is set to 0\n    // when a processor is updated for some reason\n    if (resetPageOnUpdate && updatedProcessor !== processor.current) {\n      setCurrentPage(0);\n    }\n  };\n\n  const pages = () => Math.ceil(total / limit);\n\n  const setPage = (page: number) => {\n    if (page >= pages() || page < 0 || page === currentPage) {\n      return null;\n    }\n\n    setCurrentPage(page);\n\n    processor.current.setProps({\n      page: page,\n    });\n  };\n\n  const renderPages = () => {\n    if (buttonsCount <= 0) {\n      return null;\n    }\n\n    // how many pagination buttons to render?\n    const maxCount: number = Math.min(pages(), buttonsCount);\n\n    let pagePivot = Math.min(currentPage, Math.floor(maxCount / 2));\n    if (currentPage + Math.floor(maxCount / 2) >= pages()) {\n      pagePivot = maxCount - (pages() - currentPage);\n    }\n\n    return (\n      <Fragment>\n        {pages() > maxCount && currentPage - pagePivot > 0 && (\n          <Fragment>\n            <button\n              tabIndex={0}\n              role=\"button\"\n              onClick={() => setPage(0)}\n              title={_('pagination.firstPage')}\n              aria-label={_('pagination.firstPage')}\n              className={config.className.paginationButton}\n            >\n              {_('1')}\n            </button>\n            <button\n              tabIndex={-1}\n              className={classJoin(\n                className('spread'),\n                config.className.paginationButton,\n              )}\n            >\n              ...\n            </button>\n          </Fragment>\n        )}\n\n        {Array.from(Array(maxCount).keys())\n          .map((i) => currentPage + (i - pagePivot))\n          .map((i) => (\n            <button\n              tabIndex={0}\n              role=\"button\"\n              onClick={() => setPage(i)}\n              className={classJoin(\n                currentPage === i\n                  ? classJoin(\n                      className('currentPage'),\n                      config.className.paginationButtonCurrent,\n                    )\n                  : null,\n                config.className.paginationButton,\n              )}\n              title={_('pagination.page', i + 1)}\n              aria-label={_('pagination.page', i + 1)}\n            >\n              {_(`${i + 1}`)}\n            </button>\n          ))}\n\n        {pages() > maxCount && pages() > currentPage + pagePivot + 1 && (\n          <Fragment>\n            <button\n              tabIndex={-1}\n              className={classJoin(\n                className('spread'),\n                config.className.paginationButton,\n              )}\n            >\n              ...\n            </button>\n            <button\n              tabIndex={0}\n              role=\"button\"\n              onClick={() => setPage(pages() - 1)}\n              title={_('pagination.page', pages())}\n              aria-label={_('pagination.page', pages())}\n              className={config.className.paginationButton}\n            >\n              {_(`${pages()}`)}\n            </button>\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n\n  const renderSummary = () => {\n    return (\n      <Fragment>\n        {summary && total > 0 && (\n          <div\n            role=\"status\"\n            aria-live=\"polite\"\n            className={classJoin(\n              className('summary'),\n              config.className.paginationSummary,\n            )}\n            title={_('pagination.navigate', currentPage + 1, pages())}\n          >\n            {_('pagination.showing')} <b>{_(`${currentPage * limit + 1}`)}</b>{' '}\n            {_('pagination.to')}{' '}\n            <b>{_(`${Math.min((currentPage + 1) * limit, total)}`)}</b>{' '}\n            {_('pagination.of')} <b>{_(`${total}`)}</b>{' '}\n            {_('pagination.results')}\n          </div>\n        )}\n      </Fragment>\n    );\n  };\n\n  return (\n    <div\n      className={classJoin(\n        className('pagination'),\n        config.className.pagination,\n      )}\n    >\n      {renderSummary()}\n\n      <div className={className('pages')}>\n        {prevButton && (\n          <button\n            tabIndex={0}\n            role=\"button\"\n            disabled={currentPage === 0}\n            onClick={() => setPage(currentPage - 1)}\n            title={_('pagination.previous')}\n            aria-label={_('pagination.previous')}\n            className={classJoin(\n              config.className.paginationButton,\n              config.className.paginationButtonPrev,\n            )}\n          >\n            {_('pagination.previous')}\n          </button>\n        )}\n\n        {renderPages()}\n\n        {nextButton && (\n          <button\n            tabIndex={0}\n            role=\"button\"\n            disabled={pages() === currentPage + 1 || pages() === 0}\n            onClick={() => setPage(currentPage + 1)}\n            title={_('pagination.next')}\n            aria-label={_('pagination.next')}\n            className={classJoin(\n              config.className.paginationButton,\n              config.className.paginationButtonNext,\n            )}\n          >\n            {_('pagination.next')}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","export function width(width: string | number, containerWidth?: number): number {\n  if (typeof width == 'string') {\n    if (width.indexOf('%') > -1) {\n      return (containerWidth / 100) * parseInt(width, 10);\n    } else {\n      return parseInt(width, 10);\n    }\n  }\n\n  return width;\n}\n\nexport function px(width: number): string {\n  if (!width) return '';\n  return `${Math.floor(width)}px`;\n}\n","import { h } from 'preact';\nimport { className } from '../../util/className';\n\n/**\n * ShadowTable renders a hidden table and is used to calculate the column's width\n * when autoWidth option is enabled\n */\nexport function ShadowTable(props: { tableRef: HTMLTableElement }) {\n  const shadowTable = props.tableRef.cloneNode(true) as HTMLTableElement;\n\n  shadowTable.style.position = 'absolute';\n  shadowTable.style.width = '100%';\n  shadowTable.style.zIndex = '-2147483640';\n  shadowTable.style.visibility = 'hidden';\n\n  return (\n    <div\n      ref={(nodeElement) => {\n        nodeElement && nodeElement.appendChild(shadowTable);\n      }}\n    />\n  );\n}\n\nexport function getShadowTableWidths(tempRef: HTMLDivElement): {\n  [columnId: string]: { minWidth: number; width: number };\n} {\n  const tableElement: HTMLTableElement = tempRef.querySelector(\n    'table',\n  ) as HTMLTableElement;\n\n  if (!tableElement) {\n    return {};\n  }\n\n  const tableClassName = tableElement.className;\n  const tableStyle = tableElement.style.cssText;\n  tableElement.className = `${tableClassName} ${className('shadowTable')}`;\n\n  tableElement.style.tableLayout = 'auto';\n  tableElement.style.width = 'auto';\n  tableElement.style.padding = '0';\n  tableElement.style.margin = '0';\n  tableElement.style.border = 'none';\n  tableElement.style.outline = 'none';\n\n  let obj = Array.from(\n    tableElement.parentNode.querySelectorAll<HTMLElement>('thead th'),\n  ).reduce((prev, current) => {\n    current.style.width = `${current.clientWidth}px`;\n\n    return {\n      [current.getAttribute('data-column-id')]: {\n        minWidth: current.clientWidth,\n      },\n      ...prev,\n    };\n  }, {});\n\n  tableElement.className = tableClassName;\n  tableElement.style.cssText = tableStyle;\n  tableElement.style.tableLayout = 'auto';\n\n  obj = Array.from(\n    tableElement.parentNode.querySelectorAll<HTMLElement>('thead th'),\n  ).reduce((prev, current) => {\n    prev[current.getAttribute('data-column-id')]['width'] = current.clientWidth;\n\n    return prev;\n  }, obj);\n\n  return obj;\n}\n","export function camelCase(str: string): string {\n  if (!str) return '';\n\n  const words = str.split(' ');\n\n  // do not convert strings that are already in camelCase format\n  if (words.length === 1 && /([a-z][A-Z])+/g.test(str)) {\n    return str;\n  }\n\n  return words\n    .map(function (word, index) {\n      // if it is the first word, lowercase all the chars\n      if (index == 0) {\n        return word.toLowerCase();\n      }\n\n      // if it is not the first word only upper case the first char and lowercase the rest\n      return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n    })\n    .join('');\n}\n","import { Fragment, FunctionComponent, h } from 'preact';\nimport { useConfig } from './hooks/useConfig';\nimport log from './util/log';\n\nexport enum PluginPosition {\n  Header,\n  Footer,\n  Cell,\n}\n\nexport interface Plugin<T extends FunctionComponent> {\n  id: string;\n  position: PluginPosition;\n  component: T;\n  order?: number;\n}\n\nexport class PluginManager {\n  private readonly plugins: Plugin<any>[];\n\n  constructor() {\n    this.plugins = [];\n  }\n\n  get<T extends FunctionComponent>(id: string): Plugin<T> | undefined {\n    return this.plugins.find((p) => p.id === id);\n  }\n\n  add<T extends FunctionComponent<any>>(plugin: Plugin<T>): this {\n    if (!plugin.id) {\n      log.error('Plugin ID cannot be empty');\n      return this;\n    }\n\n    if (this.get(plugin.id)) {\n      log.error(`Duplicate plugin ID: ${plugin.id}`);\n      return this;\n    }\n\n    this.plugins.push(plugin);\n    return this;\n  }\n\n  remove(id: string): this {\n    const plugin = this.get(id);\n\n    if (plugin) {\n      this.plugins.splice(this.plugins.indexOf(plugin), 1);\n    }\n\n    return this;\n  }\n\n  list<T extends FunctionComponent>(position?: PluginPosition): Plugin<T>[] {\n    let plugins: Plugin<T>[];\n\n    if (position != null || position != undefined) {\n      plugins = this.plugins.filter((p) => p.position === position);\n    } else {\n      plugins = this.plugins;\n    }\n\n    return plugins.sort((a, b) => (a.order && b.order ? a.order - b.order : 1));\n  }\n}\n\nexport function PluginRenderer(props: {\n  props?: any;\n  // to render a single plugin\n  pluginId?: string;\n  // to render all plugins in this PluginPosition\n  position?: PluginPosition;\n}) {\n  const config = useConfig();\n\n  if (props.pluginId) {\n    // render a single plugin\n    const plugin = config.plugin.get(props.pluginId);\n\n    if (!plugin) return null;\n\n    return h(\n      Fragment,\n      {},\n      h(plugin.component, {\n        plugin: plugin,\n        ...props.props,\n      }),\n    );\n  } else if (props.position !== undefined) {\n    // render using a specific plugin position\n    return h(\n      Fragment,\n      {},\n      config.plugin.list(props.position).map((p) => {\n        return h(p.component, { plugin: p, ...this.props.props });\n      }),\n    );\n  }\n\n  return null;\n}\n","/**\n * Centralized logging lib\n *\n * This class needs some improvements but so far it has been used to have a coherent way to log\n */\nclass Logger {\n  private format(message: string, type: string): string {\n    return `[Grid.js] [${type.toUpperCase()}]: ${message}`;\n  }\n\n  error(message: string, throwException = false): void {\n    const msg = this.format(message, 'error');\n\n    if (throwException) {\n      throw Error(msg);\n    } else {\n      console.error(msg);\n    }\n  }\n\n  warn(message: string): void {\n    console.warn(this.format(message, 'warn'));\n  }\n\n  info(message: string): void {\n    console.info(this.format(message, 'info'));\n  }\n}\n\nexport default new Logger();\n","import { OneDArray, TColumn, TwoDArray } from './types';\nimport Base from './base';\nimport { Config } from './config';\nimport { px, width } from './util/width';\nimport { getShadowTableWidths, ShadowTable } from './view/table/shadow';\nimport { ComponentChild, h, isValidElement, RefObject, render } from 'preact';\nimport { camelCase } from './util/string';\nimport { flatten } from './util/array';\nimport logger from './util/log';\nimport { PluginManager, PluginPosition } from './plugin';\nimport { GenericSortConfig } from './view/plugin/sort/sort';\n\nclass Header extends Base {\n  private _columns: OneDArray<TColumn>;\n\n  constructor() {\n    super();\n\n    this._columns = [];\n  }\n\n  get columns(): OneDArray<TColumn> {\n    return this._columns;\n  }\n\n  set columns(columns) {\n    this._columns = columns;\n  }\n\n  get visibleColumns(): OneDArray<TColumn> {\n    return this._columns.filter((c) => !c.hidden);\n  }\n\n  /**\n   * Tries to automatically adjust the width of columns based on:\n   *    - Header cell content\n   *    - Cell content of the first row\n   *    - Cell content of the last row\n   *\n   * @param config\n   */\n  adjustWidth(\n    config: Config,\n    tableRef: RefObject<HTMLTableElement>,\n    tempRef: RefObject<HTMLDivElement>,\n  ): this {\n    const container: Element = config.container;\n    const autoWidth = config.autoWidth;\n\n    if (!container) {\n      // we can't calculate the width because the container\n      // is unknown at this stage\n      return this;\n    }\n\n    // pixels\n    const containerWidth = container.clientWidth;\n\n    let widths = {};\n\n    if (tableRef.current && autoWidth) {\n      // let's create a shadow table with the first 10 rows of the data\n      // and let the browser to render the table with table-layout: auto\n      // no padding, margin or border to get the minimum space required\n      // to render columns. Once the table is rendered and widths are known,\n      // we unmount the shadow table from the DOM and set the correct width\n      render(\n        h(ShadowTable, {\n          tableRef: tableRef.current,\n        }),\n        tempRef.current,\n      );\n\n      widths = getShadowTableWidths(tempRef.current);\n    }\n\n    for (const column of flatten(Header.tabularFormat(this.columns))) {\n      // because we don't want to set the width of parent THs\n      if (column.columns && column.columns.length > 0) {\n        continue;\n      }\n\n      if (!column.width && autoWidth) {\n        // tries to find the corresponding cell\n        // from the ShadowTable and set the correct width\n\n        if (column.id in widths) {\n          // because a column can be hidden, too\n          column.width = px(widths[column.id]['width']);\n          column.minWidth = px(widths[column.id]['minWidth']);\n        }\n      } else {\n        // column width is already defined\n        // sets the column with based on the width of its container\n        column.width = px(width(column.width, containerWidth));\n      }\n    }\n\n    if (tableRef.current && autoWidth) {\n      // unmount the shadow table from temp\n      render(null, tempRef.current);\n    }\n\n    return this;\n  }\n\n  private setSort(\n    sortConfig: GenericSortConfig | boolean,\n    columns?: OneDArray<TColumn>,\n  ): void {\n    const cols = columns || this.columns || [];\n\n    for (const column of cols) {\n      // sorting can only be enabled for columns without any children\n      if (column.columns && column.columns.length > 0) {\n        column.sort = undefined;\n      } else if (column.sort === undefined && sortConfig) {\n        column.sort = {};\n      } else if (!column.sort) {\n        // false, null, etc.\n        column.sort = undefined;\n      } else if (typeof column.sort === 'object') {\n        column.sort = {\n          ...column.sort,\n        };\n      }\n\n      if (column.columns) {\n        this.setSort(sortConfig, column.columns);\n      }\n    }\n  }\n\n  private setResizable(resizable: boolean, columns?: OneDArray<TColumn>): void {\n    const cols = columns || this.columns || [];\n\n    for (const column of cols) {\n      if (column.resizable === undefined) {\n        column.resizable = resizable;\n      }\n\n      if (column.columns) {\n        this.setResizable(resizable, column.columns);\n      }\n    }\n  }\n\n  private setID(columns?: OneDArray<TColumn>): void {\n    const cols = columns || this.columns || [];\n\n    for (const column of cols) {\n      if (!column.id && typeof column.name === 'string') {\n        // let's guess the column ID if it's undefined\n        column.id = camelCase(column.name);\n      }\n\n      if (!column.id) {\n        logger.error(\n          `Could not find a valid ID for one of the columns. Make sure a valid \"id\" is set for all columns.`,\n        );\n      }\n\n      // nested columns\n      if (column.columns) {\n        this.setID(column.columns);\n      }\n    }\n  }\n\n  private populatePlugins(\n    pluginManager: PluginManager,\n    columns: OneDArray<TColumn>,\n  ): void {\n    // populate the cell columns\n    for (const column of columns) {\n      if (column.plugin !== undefined) {\n        pluginManager.add({\n          id: column.id,\n          ...column.plugin,\n          position: PluginPosition.Cell,\n        });\n      }\n    }\n  }\n\n  static fromColumns(\n    columns: OneDArray<TColumn | string | ComponentChild>,\n  ): Header {\n    const header = new Header();\n\n    for (const column of columns) {\n      if (typeof column === 'string' || isValidElement(column)) {\n        header.columns.push({\n          name: column,\n        });\n      } else if (typeof column === 'object') {\n        const typedColumn = column as TColumn;\n\n        if (typedColumn.columns) {\n          typedColumn.columns = Header.fromColumns(typedColumn.columns).columns;\n        }\n\n        // because the data for that cell is null\n        // if we are trying to render a plugin\n        if (typeof typedColumn.plugin === 'object') {\n          if (typedColumn.data === undefined) {\n            typedColumn.data = null;\n          }\n        }\n\n        // TColumn type\n        header.columns.push(column as TColumn);\n      }\n    }\n\n    return header;\n  }\n\n  static createFromConfig(config: Partial<Config>): Header | null {\n    const header = new Header();\n\n    // TODO: this part needs some refactoring\n    if (config.from) {\n      header.columns = Header.fromHTMLTable(config.from).columns;\n    } else if (config.columns) {\n      header.columns = Header.fromColumns(config.columns).columns;\n    } else if (\n      config.data &&\n      typeof config.data[0] === 'object' &&\n      !(config.data[0] instanceof Array)\n    ) {\n      // if data[0] is an object but not an Array\n      // used for when a JSON payload is provided\n      header.columns = Object.keys(config.data[0]).map((name) => {\n        return { name: name };\n      });\n    }\n\n    if (header.columns.length) {\n      header.setID();\n      header.setSort(config.sort);\n      header.setResizable(config.resizable);\n      header.populatePlugins(config.plugin, header.columns);\n      return header;\n    }\n\n    return null;\n  }\n\n  static fromHTMLTable(element: HTMLElement): Header {\n    const header = new Header();\n    const thead = element.querySelector('thead');\n    const ths = thead.querySelectorAll('th');\n\n    for (const th of ths as any) {\n      header.columns.push({\n        name: th.innerHTML,\n        width: th.width,\n      });\n    }\n\n    return header;\n  }\n\n  /**\n   * Converts the tree-like format of Header to a tabular format\n   *\n   * Example:\n   *\n   *    H1\n   *      H1-H1\n   *      H1-H2\n   *    H2\n   *      H2-H1\n   *\n   *    becomes:\n   *      [\n   *        [H1, H2],\n   *        [H1-H1, H1-H2, H2-H1]\n   *      ]\n   *\n   * @param columns\n   */\n  static tabularFormat(columns: OneDArray<TColumn>): TwoDArray<TColumn> {\n    let result: TwoDArray<TColumn> = [];\n    const cols = columns || [];\n    let nextRow = [];\n\n    if (cols && cols.length) {\n      result.push(cols);\n\n      for (const col of cols) {\n        if (col.columns && col.columns.length) {\n          nextRow = nextRow.concat(col.columns);\n        }\n      }\n\n      if (nextRow.length) {\n        result = result.concat(this.tabularFormat(nextRow));\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns an array of leaf columns (last columns in the tree)\n   *\n   * @param columns\n   */\n  static leafColumns(columns: OneDArray<TColumn>): OneDArray<TColumn> {\n    let result: OneDArray<TColumn> = [];\n    const cols = columns || [];\n\n    if (cols && cols.length) {\n      for (const col of cols) {\n        if (!col.columns || col.columns.length === 0) {\n          result.push(col);\n        }\n\n        if (col.columns) {\n          result = result.concat(this.leafColumns(col.columns));\n        }\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns the maximum depth of a column tree\n   * @param column\n   */\n  static maximumDepth(column: TColumn): number {\n    return this.tabularFormat([column]).length - 1;\n  }\n}\n\nexport default Header;\n","/**\n * Base Storage class. All storage implementation must inherit this class\n */\nimport { TData } from '../types';\n\nabstract class Storage<I> {\n  /**\n   * Returns all rows based on ...args\n   * @param args\n   */\n  abstract get(...args): Promise<StorageResponse>;\n\n  /**\n   * To set all rows\n   *\n   * @param data\n   */\n  set?(data: I | ((...args) => void)): this;\n}\n\nexport interface StorageResponse {\n  data: TData;\n  total: number;\n}\n\nexport default Storage;\n","import Storage, { StorageResponse } from './storage';\nimport { TData } from '../types';\n\nclass MemoryStorage extends Storage<TData> {\n  private data: (() => TData) | (() => Promise<TData>);\n\n  constructor(data: TData | (() => TData) | (() => Promise<TData>)) {\n    super();\n    this.set(data);\n  }\n\n  public async get(): Promise<StorageResponse> {\n    const data = await this.data();\n\n    return {\n      data: data,\n      total: data.length,\n    };\n  }\n\n  public set(data: TData | (() => TData) | (() => Promise<TData>)): this {\n    if (data instanceof Array) {\n      this.data = (): TData => data;\n    } else if (data instanceof Function) {\n      this.data = data;\n    }\n\n    return this;\n  }\n}\n\nexport default MemoryStorage;\n","import Storage, { StorageResponse } from './storage';\nimport log from '../util/log';\n\nexport interface ServerStorageOptions extends RequestInit {\n  url: string;\n  // to format the data and columns\n  then?: (data: any) => any[][];\n  // to handle the response from the server. `handle` will\n  // be called first and then `then` callback will be invoked\n  // The purpose of this function is to handle the behaviour\n  // of server and either reject and resolve the initial response\n  // before calling the `then` function\n  handle?: (response: Response) => Promise<any>;\n  total?: (data: any) => number;\n  // to bypass the current implementation of ServerStorage and process the\n  // request manually (e.g. when user wants to connect their own SDK/HTTP Client)\n  data?: (opts: ServerStorageOptions) => Promise<StorageResponse>;\n}\n\nclass ServerStorage extends Storage<ServerStorageOptions> {\n  private readonly options: ServerStorageOptions;\n\n  constructor(options: ServerStorageOptions) {\n    super();\n    this.options = options;\n  }\n\n  private handler(response: Response): Promise<any> {\n    if (typeof this.options.handle === 'function') {\n      return this.options.handle(response);\n    }\n\n    if (response.ok) {\n      return response.json();\n    } else {\n      log.error(\n        `Could not fetch data: ${response.status} - ${response.statusText}`,\n        true,\n      );\n      return null;\n    }\n  }\n\n  public get(options?: ServerStorageOptions): Promise<StorageResponse> {\n    // this.options is the initial config object\n    // options is the runtime config passed by the pipeline (e.g. search component)\n    const opts = {\n      ...this.options,\n      ...options,\n    };\n\n    // if `options.data` is provided, the current ServerStorage\n    // implementation will be ignored and we let options.data to\n    // handle the request. Useful when HTTP client needs to be\n    // replaced with something else\n    if (typeof opts.data === 'function') {\n      return opts.data(opts);\n    }\n\n    return fetch(opts.url, opts)\n      .then(this.handler.bind(this))\n      .then((res) => {\n        return {\n          data: opts.then(res),\n          total: typeof opts.total === 'function' ? opts.total(res) : undefined,\n        };\n      });\n  }\n}\n\nexport default ServerStorage;\n","import { Config } from '../config';\nimport MemoryStorage from './memory';\nimport Storage from './storage';\nimport ServerStorage from './server';\nimport log from '../util/log';\nimport { decode, html } from '../util/html';\n\nclass StorageUtils {\n  /**\n   * Accepts a Config object and tries to guess and return a Storage type\n   *\n   * @param config\n   */\n  public static createFromConfig(config: Config): Storage<any> {\n    let storage = null;\n    // `data` array is provided\n    if (config.data) {\n      storage = new MemoryStorage(config.data);\n    }\n\n    if (config.from) {\n      storage = new MemoryStorage(this.tableElementToArray(config.from));\n      // remove the source table element from the DOM\n      config.from.style.display = 'none';\n    }\n\n    if (config.server) {\n      storage = new ServerStorage(config.server);\n    }\n\n    if (!storage) {\n      log.error('Could not determine the storage type', true);\n    }\n\n    return storage;\n  }\n\n  /**\n   * Accepts a HTML table element and converts it into a 2D array of data\n   *\n   * TODO: This function can be a step in the pipeline: Convert Table -> Load into a memory storage -> ...\n   *\n   * @param element\n   */\n  static tableElementToArray(element: HTMLElement): any[][] {\n    const arr = [];\n    const tbody = element.querySelector('tbody');\n    const rows = tbody.querySelectorAll('tr');\n\n    for (const row of rows as any) {\n      const cells: HTMLElement[] = row.querySelectorAll('td');\n      const parsedRow = [];\n\n      for (const cell of cells) {\n        // try to capture a TD with single text element first\n        if (\n          cell.childNodes.length === 1 &&\n          cell.childNodes[0].nodeType === Node.TEXT_NODE\n        ) {\n          parsedRow.push(decode(cell.innerHTML));\n        } else {\n          parsedRow.push(html(cell.innerHTML));\n        }\n      }\n\n      arr.push(parsedRow);\n    }\n\n    return arr;\n  }\n}\n\nexport default StorageUtils;\n","import { PipelineProcessor, ProcessorType } from './processor';\nimport { ID } from '../util/id';\nimport log from '../util/log';\nimport { EventEmitter } from '../util/eventEmitter';\n\ninterface PipelineEvents<R> {\n  /**\n   * Generic updated event. Triggers the callback function when the pipeline\n   * is updated, including when a new processor is registered, a processor's props\n   * get updated, etc.\n   */\n  updated: <T, P>(processor: PipelineProcessor<T, P>) => void;\n  /**\n   * Triggers the callback function when a new\n   * processor is registered successfully\n   */\n  afterRegister: () => void;\n  /**\n   * Triggers the callback when a registered\n   * processor's property is updated\n   */\n  propsUpdated: () => void;\n  /**\n   * Triggers the callback function when the pipeline\n   * is fully processed, before returning the results\n   *\n   * afterProcess will not be called if there is an\n   * error in the pipeline (i.e a step throw an Error)\n   */\n  afterProcess: (prev: R) => void;\n  /**\n   * Triggers the callback function when the pipeline\n   * fails to process all steps or at least one step\n   * throws an Error\n   */\n  error: <T>(prev: T) => void;\n}\n\nclass Pipeline<R> extends EventEmitter<PipelineEvents<R>> {\n  // available steps for this pipeline\n  private readonly _steps: Map<\n    ProcessorType,\n    PipelineProcessor<unknown, unknown>[]\n  > = new Map<ProcessorType, PipelineProcessor<unknown, unknown>[]>();\n  // used to cache the results of processors using their id field\n  private cache: Map<string, unknown> = new Map<string, unknown>();\n  // keeps the index of the last updated processor in the registered\n  // processors list and will be used to invalidate the cache\n  // -1 means all new processors should be processed\n  private lastProcessorIndexUpdated = -1;\n\n  constructor(steps?: PipelineProcessor<unknown, unknown>[]) {\n    super();\n\n    if (steps) {\n      steps.forEach((step) => this.register(step));\n    }\n  }\n\n  /**\n   * Clears the `cache` array\n   */\n  clearCache(): void {\n    this.cache = new Map<string, object>();\n    this.lastProcessorIndexUpdated = -1;\n  }\n\n  /**\n   * Registers a new processor\n   *\n   * @param processor\n   * @param priority\n   */\n  register<T, P>(\n    processor: PipelineProcessor<T, P>,\n    priority: number = null,\n  ): PipelineProcessor<T, P> {\n    if (!processor) {\n      throw Error('Processor is not defined');\n    }\n\n    if (processor.type === null) {\n      throw Error('Processor type is not defined');\n    }\n\n    if (this.findProcessorIndexByID(processor.id) > -1) {\n      throw Error(`Processor ID ${processor.id} is already defined`);\n    }\n\n    // binding the propsUpdated callback to the Pipeline\n    processor.on('propsUpdated', this.processorPropsUpdated.bind(this));\n\n    this.addProcessorByPriority(processor, priority);\n    this.afterRegistered(processor);\n\n    return processor;\n  }\n\n  /**\n   * Tries to register a new processor\n   * @param processor\n   * @param priority\n   */\n  tryRegister<T, P>(\n    processor: PipelineProcessor<T, P>,\n    priority: number = null,\n  ): PipelineProcessor<T, P> | undefined {\n    try {\n      return this.register(processor, priority);\n    } catch (_) {\n      // noop\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Removes a processor from the list\n   *\n   * @param processor\n   */\n  unregister<T, P>(processor: PipelineProcessor<T, P>): void {\n    if (!processor) return;\n    if (this.findProcessorIndexByID(processor.id) === -1) return;\n\n    const subSteps = this._steps.get(processor.type);\n\n    if (subSteps && subSteps.length) {\n      this._steps.set(\n        processor.type,\n        subSteps.filter((proc) => proc != processor),\n      );\n      this.emit('updated', processor);\n    }\n  }\n\n  /**\n   * Registers a new processor\n   *\n   * @param processor\n   * @param priority\n   */\n  private addProcessorByPriority<T, P>(\n    processor: PipelineProcessor<T, P>,\n    priority: number,\n  ): void {\n    let subSteps = this._steps.get(processor.type);\n\n    if (!subSteps) {\n      const newSubStep = [];\n      this._steps.set(processor.type, newSubStep);\n      subSteps = newSubStep;\n    }\n\n    if (priority === null || priority < 0) {\n      subSteps.push(processor);\n    } else {\n      if (!subSteps[priority]) {\n        // slot is empty\n        subSteps[priority] = processor;\n      } else {\n        // slot is NOT empty\n        const first = subSteps.slice(0, priority - 1);\n        const second = subSteps.slice(priority + 1);\n\n        this._steps.set(processor.type, first.concat(processor).concat(second));\n      }\n    }\n  }\n\n  /**\n   * Flattens the _steps Map and returns a list of steps with their correct priorities\n   */\n  get steps(): PipelineProcessor<unknown, unknown>[] {\n    let steps: PipelineProcessor<unknown, unknown>[] = [];\n\n    for (const type of this.getSortedProcessorTypes()) {\n      const subSteps = this._steps.get(type);\n\n      if (subSteps && subSteps.length) {\n        steps = steps.concat(subSteps);\n      }\n    }\n\n    // to remove any undefined elements\n    return steps.filter((s) => s);\n  }\n\n  /**\n   * Accepts ProcessType and returns an array of the registered processes\n   * with the give type\n   *\n   * @param type\n   */\n  getStepsByType(type: ProcessorType): PipelineProcessor<unknown, unknown>[] {\n    return this.steps.filter((process) => process.type === type);\n  }\n\n  /**\n   * Returns a list of ProcessorType according to their priority\n   */\n  private getSortedProcessorTypes(): ProcessorType[] {\n    return Object.keys(ProcessorType)\n      .filter((key) => !isNaN(Number(key)))\n      .map((key) => Number(key));\n  }\n\n  /**\n   * Runs all registered processors based on their correct priority\n   * and returns the final output after running all steps\n   *\n   * @param data\n   */\n  async process(data?: R): Promise<R> {\n    const lastProcessorIndexUpdated = this.lastProcessorIndexUpdated;\n    const steps = this.steps;\n\n    let prev = data;\n\n    try {\n      for (const processor of steps) {\n        const processorIndex = this.findProcessorIndexByID(processor.id);\n\n        if (processorIndex >= lastProcessorIndexUpdated) {\n          // we should execute process() here since the last\n          // updated processor was before \"processor\".\n          // This is to ensure that we always have correct and up to date\n          // data from processors and also to skip them when necessary\n          prev = (await processor.process(prev)) as R;\n          this.cache.set(processor.id, prev);\n        } else {\n          // cached results already exist\n          prev = this.cache.get(processor.id) as R;\n        }\n      }\n    } catch (e) {\n      log.error(e);\n      // trigger the onError callback\n      this.emit('error', prev);\n\n      // rethrow\n      throw e;\n    }\n\n    // means the pipeline is up to date\n    this.lastProcessorIndexUpdated = steps.length;\n\n    // triggers the afterProcess callbacks with the results\n    this.emit('afterProcess', prev);\n\n    return prev;\n  }\n\n  /**\n   * Returns the registered processor's index in _steps array\n   *\n   * @param processorID\n   */\n  private findProcessorIndexByID(processorID: ID): number {\n    return this.steps.findIndex((p) => p.id == processorID);\n  }\n\n  /**\n   * Sets the last updates processors index locally\n   * This is used to invalid or skip a processor in\n   * the process() method\n   */\n  private setLastProcessorIndex<T, P>(\n    processor: PipelineProcessor<T, P>,\n  ): void {\n    const processorIndex = this.findProcessorIndexByID(processor.id);\n\n    if (this.lastProcessorIndexUpdated > processorIndex) {\n      this.lastProcessorIndexUpdated = processorIndex;\n    }\n  }\n\n  private processorPropsUpdated(processor): void {\n    this.setLastProcessorIndex(processor);\n    this.emit('propsUpdated');\n    this.emit('updated', processor);\n  }\n\n  private afterRegistered(processor): void {\n    this.setLastProcessorIndex(processor);\n    this.emit('afterRegister');\n    this.emit('updated', processor);\n  }\n}\n\nexport default Pipeline;\n","import Storage, { StorageResponse } from '../../storage/storage';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\n\ninterface StorageExtractorProps extends PipelineProcessorProps {\n  storage: Storage<any>;\n}\n\nclass StorageExtractor extends PipelineProcessor<\n  StorageResponse,\n  StorageExtractorProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Extractor;\n  }\n\n  async _process(opts: any): Promise<StorageResponse> {\n    return await this.props.storage.get(opts);\n  }\n}\n\nexport default StorageExtractor;\n","import { PipelineProcessor, ProcessorType } from '../processor';\nimport Tabular from '../../tabular';\nimport { ArrayResponse } from './storageResponseToArray';\n\nclass ArrayToTabularTransformer extends PipelineProcessor<\n  Tabular,\n  Record<string, any>\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Transformer;\n  }\n\n  _process(arrayResponse: ArrayResponse): Tabular {\n    const tabular = Tabular.fromArray(arrayResponse.data);\n\n    // for server-side storage\n    tabular.length = arrayResponse.total;\n\n    return tabular;\n  }\n}\n\nexport default ArrayToTabularTransformer;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerInitiatorProps extends PipelineProcessorProps {\n  serverStorageOptions: ServerStorageOptions;\n}\n\nclass ServerInitiator extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerInitiatorProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Initiator;\n  }\n\n  _process(): ServerStorageOptions {\n    return Object.entries(this.props.serverStorageOptions)\n      .filter(([_, val]) => typeof val !== 'function')\n      .reduce(\n        (acc, [k, v]) => ({ ...acc, [k]: v }),\n        {},\n      ) as ServerStorageOptions;\n  }\n}\n\nexport default ServerInitiator;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { StorageResponse } from '../../storage/storage';\nimport { TCell, TData, TDataArray, TDataObject, TwoDArray } from '../../types';\nimport Header from '../../header';\nimport logger from '../../util/log';\n\nexport interface ArrayResponse {\n  data: TwoDArray<TCell>;\n  total: number;\n}\n\ninterface StorageResponseToArrayTransformerProps\n  extends PipelineProcessorProps {\n  header: Header;\n}\n\nclass StorageResponseToArrayTransformer extends PipelineProcessor<\n  ArrayResponse,\n  StorageResponseToArrayTransformerProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Transformer;\n  }\n\n  private castData(data: TData): TwoDArray<TCell> {\n    if (!data || !data.length) {\n      return [];\n    }\n\n    if (!this.props.header || !this.props.header.columns) {\n      return data as TwoDArray<TCell>;\n    }\n\n    const columns = Header.leafColumns(this.props.header.columns);\n\n    // if it's a 2d array already\n    if (data[0] instanceof Array) {\n      return (data as TDataArray).map((row) => {\n        let pad = 0;\n\n        return columns.map((column, i) => {\n          // default `data` is provided for this column\n          if (column.data !== undefined) {\n            pad++;\n\n            if (typeof column.data === 'function') {\n              return column.data(row);\n            } else {\n              return column.data;\n            }\n          }\n\n          return row[i - pad];\n        });\n      });\n    }\n\n    // if it's an array of objects (but not array of arrays, i.e JSON payload)\n    if (typeof data[0] === 'object' && !(data[0] instanceof Array)) {\n      return (data as TDataObject).map((row) =>\n        columns.map((column, i) => {\n          if (column.data !== undefined) {\n            if (typeof column.data === 'function') {\n              return column.data(row);\n            } else {\n              return column.data;\n            }\n          } else if (column.id) {\n            return row[column.id];\n          } else {\n            logger.error(`Could not find the correct cell for column at position ${i}.\n                          Make sure either 'id' or 'selector' is defined for all columns.`);\n            return null;\n          }\n        }),\n      );\n    }\n\n    return [];\n  }\n\n  _process(storageResponse: StorageResponse): ArrayResponse {\n    return {\n      data: this.castData(storageResponse.data),\n      total: storageResponse.total,\n    };\n  }\n}\n\nexport default StorageResponseToArrayTransformer;\n","import { Config } from '../config';\nimport Pipeline from './pipeline';\nimport Tabular from '../tabular';\nimport StorageExtractor from './extractor/storage';\nimport ArrayToTabularTransformer from './transformer/arrayToTabular';\nimport ServerStorage from '../storage/server';\nimport ServerInitiator from './initiator/server';\nimport StorageResponseToArrayTransformer from './transformer/storageResponseToArray';\n\nclass PipelineUtils {\n  static createFromConfig(config: Config): Pipeline<Tabular> {\n    const pipeline = new Pipeline<Tabular>();\n\n    if (config.storage instanceof ServerStorage) {\n      pipeline.register(\n        new ServerInitiator({\n          serverStorageOptions: config.server,\n        }),\n      );\n    }\n\n    pipeline.register(new StorageExtractor({ storage: config.storage }));\n    pipeline.register(\n      new StorageResponseToArrayTransformer({ header: config.header }),\n    );\n    pipeline.register(new ArrayToTabularTransformer());\n\n    return pipeline;\n  }\n}\n\nexport default PipelineUtils;\n","export class Store<S = Record<string, unknown>> {\n  private state: S;\n  private listeners: ((current?: S, prev?: S) => void)[] = [];\n  private isDispatching = false;\n\n  constructor(initialState: S) {\n    this.state = initialState;\n  }\n\n  getState = () => this.state;\n  getListeners = () => this.listeners;\n\n  dispatch = (reducer: (state: S) => S) => {\n    if (typeof reducer !== 'function')\n      throw new Error('Reducer is not a function');\n    if (this.isDispatching)\n      throw new Error('Reducers may not dispatch actions');\n\n    this.isDispatching = true;\n\n    const prevState = this.state;\n    try {\n      this.state = reducer(this.state);\n    } finally {\n      this.isDispatching = false;\n    }\n\n    for (const listener of this.listeners) {\n      listener(this.state, prevState);\n    }\n\n    return this.state;\n  };\n\n  subscribe = (listener: (current?: S, prev?: S) => void): (() => void) => {\n    if (typeof listener !== 'function')\n      throw new Error('Listener is not a function');\n\n    this.listeners = [...this.listeners, listener];\n    return () =>\n      (this.listeners = this.listeners.filter((lis) => lis !== listener));\n  };\n}\n","import { CSSDeclaration, OneDArray, Status, TColumn, TData } from './types';\nimport Storage from './storage/storage';\nimport Pipeline from './pipeline/pipeline';\nimport Tabular from './tabular';\nimport { Search, SearchConfig } from './view/plugin/search/search';\nimport { Pagination, PaginationConfig } from './view/plugin/pagination';\nimport Header from './header';\nimport { ServerStorageOptions } from './storage/server';\nimport { GenericSortConfig } from './view/plugin/sort/sort';\nimport { Language, Translator } from './i18n/language';\nimport { ComponentChild, createContext, createRef, RefObject } from 'preact';\nimport StorageUtils from './storage/storageUtils';\nimport PipelineUtils from './pipeline/pipelineUtils';\nimport { EventEmitter } from './util/eventEmitter';\nimport { GridEvents } from './events';\nimport { PluginManager, PluginPosition, Plugin } from './plugin';\nimport Grid from './grid';\nimport { Store } from './state/store';\n\nexport const ConfigContext = createContext(null);\n\nexport interface Config {\n  // a reference to the current Grid.js instance\n  instance: Grid;\n  store: Store;\n  eventEmitter: EventEmitter<GridEvents>;\n  plugin: PluginManager;\n  /** container element that is used to mount the Grid.js to */\n  // TODO: change this to an element reference\n  container?: Element;\n  /** pointer to the main table element */\n  tableRef?: RefObject<HTMLTableElement>;\n  data?: TData | (() => TData) | (() => Promise<TData>);\n  server?: ServerStorageOptions;\n  header?: Header;\n  /** to parse a HTML table and load the data */\n  from: HTMLElement;\n  storage: Storage<any>;\n  /** Pipeline process throttle timeout in milliseconds */\n  processingThrottleMs: number;\n  pipeline: Pipeline<Tabular>;\n  /** to automatically calculate the columns width */\n  autoWidth: boolean;\n  /** sets the width of the container and table */\n  width: string;\n  /** sets the height of the table */\n  height: string;\n  pagination: PaginationConfig | boolean;\n  sort: GenericSortConfig | boolean;\n  translator: Translator;\n  /** fixes the table header to the top of the table */\n  fixedHeader: boolean;\n  /** Resizable columns? */\n  resizable: boolean;\n  columns: OneDArray<TColumn | string | ComponentChild>;\n  search: SearchConfig | boolean;\n  language: Language;\n  plugins?: Plugin<any>[];\n  style?: Partial<{\n    table: CSSDeclaration;\n    td: CSSDeclaration;\n    th: CSSDeclaration;\n    container: CSSDeclaration;\n    header: CSSDeclaration;\n    footer: CSSDeclaration;\n  }>;\n  className?: Partial<{\n    table: string;\n    th: string;\n    thead: string;\n    tbody: string;\n    tr: string;\n    td: string;\n    container: string;\n    footer: string;\n    header: string;\n    search: string;\n    sort: string;\n    pagination: string;\n    paginationSummary: string;\n    paginationButton: string;\n    paginationButtonNext: string;\n    paginationButtonCurrent: string;\n    paginationButtonPrev: string;\n    loading: string;\n    notfound: string;\n    error: string;\n  }>;\n}\n\nexport class Config {\n  public constructor() {\n    Object.assign(this, Config.defaultConfig());\n  }\n  /**\n   * Assigns `updatedConfig` keys to the current config file\n   *\n   * @param partialConfig\n   */\n  assign(partialConfig: Partial<Config>): Config {\n    return Object.assign(this, partialConfig);\n  }\n\n  /**\n   * Updates the config from a partial Config\n   *\n   * @param partialConfig\n   */\n  update(partialConfig: Partial<Config>): Config {\n    if (!partialConfig) return this;\n\n    this.assign(\n      Config.fromPartialConfig({\n        ...this,\n        ...partialConfig,\n      }),\n    );\n\n    return this;\n  }\n\n  static defaultConfig(): Partial<Config> {\n    return {\n      store: new Store({\n        status: Status.Init,\n        header: undefined,\n        data: null,\n      }),\n      plugin: new PluginManager(),\n      tableRef: createRef(),\n      width: '100%',\n      height: 'auto',\n      processingThrottleMs: 100,\n      autoWidth: true,\n      style: {},\n      className: {},\n    };\n  }\n\n  static fromPartialConfig(partialConfig: Partial<Config>): Partial<Config> {\n    const config = new Config().assign(partialConfig);\n\n    // Sort\n    if (typeof partialConfig.sort === 'boolean' && partialConfig.sort) {\n      config.assign({\n        sort: {\n          multiColumn: true,\n        },\n      });\n    }\n\n    // Header\n    config.assign({\n      header: Header.createFromConfig(config),\n    });\n\n    config.assign({\n      storage: StorageUtils.createFromConfig(config),\n    });\n\n    config.assign({\n      pipeline: PipelineUtils.createFromConfig(config),\n    });\n\n    // Translator\n    config.assign({\n      translator: new Translator(config.language),\n    });\n\n    if (config.search) {\n      // Search\n      config.plugin.add({\n        id: 'search',\n        position: PluginPosition.Header,\n        component: Search,\n      });\n    }\n\n    if (config.pagination) {\n      // Pagination\n      config.plugin.add({\n        id: 'pagination',\n        position: PluginPosition.Footer,\n        component: Pagination,\n      });\n    }\n\n    // Additional plugins\n    if (config.plugins) {\n      config.plugins.forEach((p) => config.plugin.add(p));\n    }\n\n    return config;\n  }\n}\n","import { h, ComponentChild, JSX } from 'preact';\n\nimport Cell from '../../cell';\nimport { classJoin, className } from '../../util/className';\nimport { CSSDeclaration, TColumn } from '../../types';\nimport Row from '../../row';\nimport { JSXInternal } from 'preact/src/jsx';\nimport { PluginRenderer } from '../../plugin';\nimport { useConfig } from '../../hooks/useConfig';\n\nexport function TD(\n  props: {\n    cell: Cell;\n    row?: Row;\n    column?: TColumn;\n    style?: CSSDeclaration;\n    messageCell?: boolean;\n  } & Omit<JSX.HTMLAttributes<HTMLTableCellElement>, 'style'>,\n) {\n  const config = useConfig();\n\n  const content = (): ComponentChild => {\n    if (props.column && typeof props.column.formatter === 'function') {\n      return props.column.formatter(props.cell.data, props.row, props.column);\n    }\n\n    if (props.column && props.column.plugin) {\n      return (\n        <PluginRenderer\n          pluginId={props.column.id}\n          props={{\n            column: props.column,\n            cell: props.cell,\n            row: props.row,\n          }}\n        />\n      );\n    }\n\n    return props.cell.data;\n  };\n\n  const handleClick = (\n    e: JSX.TargetedMouseEvent<HTMLTableCellElement>,\n  ): void => {\n    if (props.messageCell) return;\n\n    config.eventEmitter.emit(\n      'cellClick',\n      e,\n      props.cell,\n      props.column,\n      props.row,\n    );\n  };\n\n  const getCustomAttributes = (\n    column: TColumn | null,\n  ): JSXInternal.HTMLAttributes<HTMLTableCellElement> => {\n    if (!column) return {};\n\n    if (typeof column.attributes === 'function') {\n      return column.attributes(props.cell.data, props.row, props.column);\n    } else {\n      return column.attributes;\n    }\n  };\n\n  return (\n    <td\n      role={props.role}\n      colSpan={props.colSpan}\n      data-column-id={props.column && props.column.id}\n      className={classJoin(\n        className('td'),\n        props.className,\n        config.className.td,\n      )}\n      style={{\n        ...props.style,\n        ...config.style.td,\n      }}\n      onClick={handleClick}\n      {...getCustomAttributes(props.column)}\n    >\n      {content()}\n    </td>\n  );\n}\n","import { h, JSX, ComponentChildren } from 'preact';\n\nimport Row from '../../row';\nimport Cell from '../../cell';\nimport { classJoin, className } from '../../util/className';\nimport { TColumn } from '../../types';\nimport { TD } from './td';\nimport Header from '../../header';\nimport { useConfig } from '../../hooks/useConfig';\nimport useSelector from '../../hooks/useSelector';\n\nexport function TR(props: {\n  row?: Row;\n  messageRow?: boolean;\n  children?: ComponentChildren;\n}) {\n  const config = useConfig();\n  const header = useSelector((state) => state.header);\n\n  const getColumn = (cellIndex: number): TColumn => {\n    if (header) {\n      const cols = Header.leafColumns(header.columns);\n\n      if (cols) {\n        return cols[cellIndex];\n      }\n    }\n\n    return null;\n  };\n\n  const handleClick = (\n    e: JSX.TargetedMouseEvent<HTMLTableRowElement>,\n  ): void => {\n    if (props.messageRow) return;\n    config.eventEmitter.emit('rowClick', e, props.row);\n  };\n\n  const getChildren = (): ComponentChildren => {\n    if (props.children) {\n      return props.children;\n    }\n\n    return props.row.cells.map((cell: Cell, i) => {\n      const column = getColumn(i);\n\n      if (column && column.hidden) return null;\n\n      return <TD key={cell.id} cell={cell} row={props.row} column={column} />;\n    });\n  };\n\n  return (\n    <tr\n      className={classJoin(className('tr'), config.className.tr)}\n      onClick={handleClick}\n    >\n      {getChildren()}\n    </tr>\n  );\n}\n","import { h } from 'preact';\nimport Cell from '../../cell';\nimport { classJoin, className } from '../../util/className';\nimport { TR } from './tr';\nimport { TD } from './td';\n\nexport function MessageRow(props: {\n  message: string;\n  colSpan?: number;\n  className?: string;\n}) {\n  return (\n    <TR messageRow={true}>\n      <TD\n        role=\"alert\"\n        colSpan={props.colSpan}\n        messageCell={true}\n        cell={new Cell(props.message)}\n        className={classJoin(\n          className('message'),\n          props.className ? props.className : null,\n        )}\n      />\n    </TR>\n  );\n}\n","import { h } from 'preact';\nimport Row from '../../row';\nimport { TR } from './tr';\nimport { classJoin, className } from '../../util/className';\nimport { Status } from '../../types';\nimport { MessageRow } from './messageRow';\nimport { useConfig } from '../../hooks/useConfig';\nimport { useTranslator } from '../../i18n/language';\nimport useSelector from '../../hooks/useSelector';\n\nexport function TBody() {\n  const config = useConfig();\n  const data = useSelector((state) => state.data);\n  const status = useSelector((state) => state.status);\n  const header = useSelector((state) => state.header);\n  const _ = useTranslator();\n\n  const headerLength = () => {\n    if (header) {\n      return header.visibleColumns.length;\n    }\n    return 0;\n  };\n\n  return (\n    <tbody className={classJoin(className('tbody'), config.className.tbody)}>\n      {data &&\n        data.rows.map((row: Row) => {\n          return <TR key={row.id} row={row} />;\n        })}\n\n      {status === Status.Loading && (!data || data.length === 0) && (\n        <MessageRow\n          message={_('loading')}\n          colSpan={headerLength()}\n          className={classJoin(className('loading'), config.className.loading)}\n        />\n      )}\n\n      {status === Status.Rendered && data && data.length === 0 && (\n        <MessageRow\n          message={_('noRecordsFound')}\n          colSpan={headerLength()}\n          className={classJoin(\n            className('notfound'),\n            config.className.notfound,\n          )}\n        />\n      )}\n\n      {status === Status.Error && (\n        <MessageRow\n          message={_('error')}\n          colSpan={headerLength()}\n          className={classJoin(className('error'), config.className.error)}\n        />\n      )}\n    </tbody>\n  );\n}\n","import { Comparator, TCell } from '../../types';\nimport Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport Row from '../../row';\nimport log from '../../util/log';\n\ninterface NativeSortProps extends PipelineProcessorProps {\n  columns: {\n    index: number;\n    // 1 ascending, -1 descending\n    direction?: 1 | -1;\n    compare?: Comparator<TCell>;\n  }[];\n}\n\nclass NativeSort extends PipelineProcessor<Tabular, NativeSortProps> {\n  protected validateProps(): void {\n    for (const condition of this.props.columns) {\n      if (condition.direction === undefined) {\n        condition.direction = 1;\n      }\n\n      if (condition.direction !== 1 && condition.direction !== -1) {\n        log.error(`Invalid sort direction ${condition.direction}`);\n      }\n    }\n  }\n\n  get type(): ProcessorType {\n    return ProcessorType.Sort;\n  }\n\n  private compare(cellA: TCell, cellB: TCell): number {\n    if (cellA > cellB) {\n      return 1;\n    } else if (cellA < cellB) {\n      return -1;\n    }\n\n    return 0;\n  }\n\n  private compareWrapper(a: Row, b: Row): number {\n    let cmp = 0;\n\n    for (const column of this.props.columns) {\n      if (cmp === 0) {\n        const cellA = a.cells[column.index].data;\n        const cellB = b.cells[column.index].data;\n\n        if (typeof column.compare === 'function') {\n          cmp |= column.compare(cellA, cellB) * column.direction;\n        } else {\n          cmp |= this.compare(cellA, cellB) * column.direction;\n        }\n      } else {\n        break;\n      }\n    }\n\n    return cmp;\n  }\n\n  protected _process(data: Tabular): Tabular {\n    const sortedRows = [...data.rows];\n    sortedRows.sort(this.compareWrapper.bind(this));\n\n    const sorted = new Tabular(sortedRows);\n    // we have to set the tabular length manually\n    // because of the server-side storage\n    sorted.length = data.length;\n\n    return sorted;\n  }\n}\n\nexport default NativeSort;\n","import { Comparator, TCell } from '../../../types';\n\nexport const SortColumn =\n  (\n    index: number,\n    direction: 1 | -1,\n    multi?: boolean,\n    compare?: Comparator<TCell>,\n  ) =>\n  (state) => {\n    let columns = state.sort?.columns\n      ? state.sort.columns.map((x) => {\n          return { ...x };\n        })\n      : [];\n    const count = columns.length;\n    const column = columns.find((x) => x.index === index);\n    const exists = column !== undefined;\n\n    let add = false;\n    let reset = false;\n    let remove = false;\n    let update = false;\n\n    if (!exists) {\n      // the column has not been sorted\n      if (count === 0) {\n        // the first column to be sorted\n        add = true;\n      } else if (count > 0 && !multi) {\n        // remove the previously sorted column\n        // and sort the current column\n        add = true;\n        reset = true;\n      } else if (count > 0 && multi) {\n        // multi-sorting\n        // sort this column as well\n        add = true;\n      }\n    } else {\n      // the column has been sorted before\n      if (!multi) {\n        // single column sorting\n        if (count === 1) {\n          update = true;\n        } else if (count > 1) {\n          // this situation happens when we have already entered\n          // multi-sorting mode but then user tries to sort a single column\n          reset = true;\n          add = true;\n        }\n      } else {\n        // multi sorting\n        if (column.direction === -1) {\n          // remove the current column from the\n          // sorted columns array\n          remove = true;\n        } else {\n          update = true;\n        }\n      }\n    }\n\n    if (reset) {\n      // resetting the sorted columns\n      columns = [];\n    }\n\n    if (add) {\n      columns.push({\n        index: index,\n        direction: direction,\n        compare: compare,\n      });\n    } else if (update) {\n      const index = columns.indexOf(column);\n      columns[index].direction = direction;\n    } else if (remove) {\n      const index = columns.indexOf(column);\n      columns.splice(index, 1);\n    }\n\n    return {\n      ...state,\n      sort: {\n        columns: columns,\n      },\n    };\n  };\n\nexport const SortToggle =\n  (index: number, multi: boolean, compare?: Comparator<TCell>) => (state) => {\n    const columns = state.sort ? [...state.sort.columns] : [];\n    const column = columns.find((x) => x.index === index);\n\n    if (!column) {\n      return {\n        ...state,\n        ...SortColumn(index, 1, multi, compare)(state),\n      };\n    }\n\n    return {\n      ...state,\n      ...SortColumn(\n        index,\n        column.direction === 1 ? -1 : 1,\n        multi,\n        compare,\n      )(state),\n    };\n  };\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\nimport { TColumnSort } from '../../types';\n\ninterface ServerSortProps extends PipelineProcessorProps {\n  columns: TColumnSort[];\n  url?: (prevUrl: string, columns: TColumnSort[]) => string;\n  body?: (prevBody: BodyInit, columns: TColumnSort[]) => BodyInit;\n}\n\nclass ServerSort extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerSortProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerSort;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(options.url, this.props.columns);\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(options.body, this.props.columns);\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerSort;\n","import { h, JSX } from 'preact';\n\nimport { classJoin, className } from '../../../util/className';\nimport { PipelineProcessor, ProcessorType } from '../../../pipeline/processor';\nimport NativeSort from '../../../pipeline/sort/native';\nimport { Comparator, TCell, TColumnSort } from '../../../types';\nimport * as actions from './actions';\nimport ServerSort from '../../../pipeline/sort/server';\nimport { useEffect, useState } from 'preact/hooks';\nimport { useConfig } from '../../../hooks/useConfig';\nimport { useTranslator } from '../../../i18n/language';\nimport useSelector from '../../../hooks/useSelector';\nimport { useStore } from '../../../hooks/useStore';\n\n// column specific config\nexport interface SortConfig {\n  compare?: Comparator<TCell>;\n}\n\n// generic sort config:\n//\n// Config {\n//    sort: GenericSortConfig\n// }\n//\nexport interface GenericSortConfig {\n  multiColumn?: boolean;\n  server?: {\n    url?: (prevUrl: string, columns: TColumnSort[]) => string;\n    body?: (prevBody: BodyInit, columns: TColumnSort[]) => BodyInit;\n  };\n}\n\nexport function Sort(\n  props: {\n    // column index\n    index: number;\n  } & SortConfig,\n) {\n  const config = useConfig();\n  const { dispatch } = useStore();\n  const _ = useTranslator();\n  const [direction, setDirection] = useState(0);\n  const sortConfig = config.sort as GenericSortConfig;\n  const state = useSelector((state) => state.sort);\n  const processorType =\n    typeof sortConfig?.server === 'object'\n      ? ProcessorType.ServerSort\n      : ProcessorType.Sort;\n\n  const getSortProcessor = () => {\n    const processors = config.pipeline.getStepsByType(processorType);\n    if (processors.length) {\n      return processors[0];\n    }\n    return undefined;\n  };\n\n  const createSortProcessor = () => {\n    if (processorType === ProcessorType.ServerSort) {\n      return new ServerSort({\n        columns: state ? state.columns : [],\n        ...sortConfig.server,\n      });\n    }\n\n    return new NativeSort({\n      columns: state ? state.columns : [],\n    });\n  };\n\n  const getOrCreateSortProcessor = (): PipelineProcessor<any, any> => {\n    const existingSortProcessor = getSortProcessor();\n    if (existingSortProcessor) {\n      return existingSortProcessor;\n    }\n\n    return createSortProcessor();\n  };\n\n  useEffect(() => {\n    const processor = getOrCreateSortProcessor();\n    config.pipeline.tryRegister(processor);\n\n    return () => config.pipeline.unregister(processor);\n  }, [config]);\n\n  /**\n   * Sets the internal state of component\n   */\n  useEffect(() => {\n    if (!state) return;\n\n    const currentColumn = state.columns.find((x) => x.index === props.index);\n\n    if (!currentColumn) {\n      setDirection(0);\n    } else {\n      setDirection(currentColumn.direction);\n    }\n  }, [state]);\n\n  useEffect(() => {\n    const processor = getSortProcessor();\n\n    if (!processor) return;\n    if (!state) return;\n\n    processor.setProps({\n      columns: state.columns,\n    });\n  }, [state]);\n\n  const changeDirection = (e: JSX.TargetedMouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    // to sort two or more columns at the same time\n    dispatch(\n      actions.SortToggle(\n        props.index,\n        e.shiftKey === true && sortConfig.multiColumn,\n        props.compare,\n      ),\n    );\n  };\n\n  const getSortClassName = (direction: number) => {\n    if (direction === 1) {\n      return 'asc';\n    } else if (direction === -1) {\n      return 'desc';\n    }\n\n    return 'neutral';\n  };\n\n  return (\n    <button\n      // because the corresponding <th> has tabIndex=0\n      tabIndex={-1}\n      aria-label={_(`sort.sort${direction === 1 ? 'Desc' : 'Asc'}`)}\n      title={_(`sort.sort${direction === 1 ? 'Desc' : 'Asc'}`)}\n      className={classJoin(\n        className('sort'),\n        className('sort', getSortClassName(direction)),\n        config.className.sort,\n      )}\n      onClick={changeDirection}\n    />\n  );\n}\n","/**\n * Throttle a given function\n * @param fn Function to be called\n * @param wait Throttle timeout in milliseconds\n * @returns Throttled function\n */\nexport const throttle = (fn: (...args) => void, wait = 100) => {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  let lastTime = Date.now();\n\n  const execute = (...args) => {\n    lastTime = Date.now();\n    fn(...args);\n  };\n\n  return (...args) => {\n    const currentTime = Date.now();\n    const elapsed = currentTime - lastTime;\n\n    if (elapsed >= wait) {\n      // If enough time has passed since the last call, execute the function immediately\n      execute(...args);\n    } else {\n      // If not enough time has passed, schedule the function call after the remaining delay\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n\n      timeoutId = setTimeout(() => {\n        execute(...args);\n        timeoutId = null;\n      }, wait - elapsed);\n    }\n  };\n};\n","import { h, RefObject } from 'preact';\nimport { classJoin, className } from '../../../util/className';\nimport { TColumn } from '../../../types';\nimport { throttle } from '../../../util/throttle';\n\nexport function Resize(props: {\n  column: TColumn;\n  thRef: RefObject<HTMLTableCellElement>;\n}) {\n  let moveFn: (e) => void;\n\n  const getPageX = (e: MouseEvent | TouchEvent) => {\n    if (e instanceof MouseEvent) {\n      return Math.floor(e.pageX);\n    } else {\n      return Math.floor(e.changedTouches[0].pageX);\n    }\n  };\n\n  const start = (e: MouseEvent | TouchEvent) => {\n    e.stopPropagation();\n\n    const thElement = props.thRef.current;\n\n    const offsetStart = parseInt(thElement.style.width, 10) - getPageX(e);\n\n    moveFn = throttle((e) => move(e, offsetStart), 10);\n\n    document.addEventListener('mouseup', end);\n    document.addEventListener('touchend', end);\n    document.addEventListener('mousemove', moveFn);\n    document.addEventListener('touchmove', moveFn);\n  };\n\n  const move = (e: MouseEvent | TouchEvent, offsetStart: number) => {\n    e.stopPropagation();\n\n    const thElement = props.thRef.current;\n\n    if (offsetStart + getPageX(e) >= parseInt(thElement.style.minWidth, 10)) {\n      thElement.style.width = `${offsetStart + getPageX(e)}px`;\n    }\n  };\n\n  const end = (e: MouseEvent | TouchEvent) => {\n    e.stopPropagation();\n\n    document.removeEventListener('mouseup', end);\n    document.removeEventListener('mousemove', moveFn);\n    document.removeEventListener('touchmove', moveFn);\n    document.removeEventListener('touchend', end);\n  };\n\n  return (\n    <div\n      className={classJoin(className('th'), className('resizable'))}\n      onMouseDown={start}\n      onTouchStart={start}\n      onClick={(e) => e.stopPropagation()}\n    />\n  );\n}\n","import { h, ComponentChild, JSX } from 'preact';\n\nimport { classJoin, className } from '../../util/className';\nimport { CSSDeclaration, TColumn } from '../../types';\nimport { GenericSortConfig, Sort } from '../plugin/sort/sort';\nimport { PluginRenderer } from '../../plugin';\nimport { Resize } from '../plugin/resize/resize';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useConfig } from '../../hooks/useConfig';\nimport * as SortActions from '../plugin/sort/actions';\nimport { useStore } from '../../hooks/useStore';\n\nexport function TH(\n  props: {\n    index: number;\n    column: TColumn;\n    style?: CSSDeclaration;\n  } & Omit<JSX.HTMLAttributes<HTMLTableCellElement>, 'style'>,\n) {\n  const config = useConfig();\n  const thRef = useRef(null);\n  const [style, setStyle] = useState({});\n  const { dispatch } = useStore();\n\n  useEffect(() => {\n    // sets the `top` style if the current TH is fixed\n    if (config.fixedHeader && thRef.current) {\n      const offsetTop = thRef.current.offsetTop;\n\n      if (typeof offsetTop === 'number') {\n        setStyle({\n          top: offsetTop,\n        });\n      }\n    }\n  }, [thRef]);\n\n  const isSortable = (): boolean => props.column.sort != undefined;\n  const isResizable = (): boolean => props.column.resizable;\n  const onClick = (\n    e:\n      | JSX.TargetedMouseEvent<HTMLTableCellElement>\n      | JSX.TargetedKeyboardEvent<HTMLTableCellElement>,\n  ) => {\n    e.stopPropagation();\n\n    if (isSortable()) {\n      const sortConfig = config.sort as GenericSortConfig;\n\n      dispatch(\n        SortActions.SortToggle(\n          props.index,\n          e.shiftKey === true && sortConfig.multiColumn,\n          props.column.sort.compare,\n        ),\n      );\n    }\n  };\n\n  const keyDown = (e: JSX.TargetedKeyboardEvent<HTMLTableCellElement>) => {\n    // Enter key\n    if (isSortable() && e.which === 13) {\n      onClick(e);\n    }\n  };\n\n  const content = (): ComponentChild => {\n    if (props.column.name !== undefined) {\n      return props.column.name;\n    }\n\n    if (props.column.plugin !== undefined) {\n      return (\n        <PluginRenderer\n          pluginId={props.column.plugin.id}\n          props={{\n            column: props.column,\n          }}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  const getCustomAttributes = () => {\n    const column = props.column;\n\n    if (!column) return {};\n\n    if (typeof column.attributes === 'function') {\n      return column.attributes(null, null, props.column);\n    } else {\n      return column.attributes;\n    }\n  };\n\n  return (\n    <th\n      ref={thRef}\n      data-column-id={props.column && props.column.id}\n      className={classJoin(\n        className('th'),\n        isSortable() ? className('th', 'sort') : null,\n        config.fixedHeader ? className('th', 'fixed') : null,\n        config.className.th,\n      )}\n      onClick={onClick}\n      style={{\n        ...config.style.th,\n        ...{\n          minWidth: props.column.minWidth,\n          width: props.column.width,\n        },\n        ...style,\n        ...props.style,\n      }}\n      onKeyDown={keyDown}\n      rowSpan={props.rowSpan > 1 ? props.rowSpan : undefined}\n      colSpan={props.colSpan > 1 ? props.colSpan : undefined}\n      {...getCustomAttributes()}\n      {...(isSortable() ? { tabIndex: 0 } : {})}\n    >\n      <div className={className('th', 'content')}>{content()}</div>\n      {isSortable() && <Sort index={props.index} {...props.column.sort} />}\n      {isResizable() &&\n        props.index < config.header.visibleColumns.length - 1 && (\n          <Resize column={props.column} thRef={thRef} />\n        )}\n    </th>\n  );\n}\n","import { h } from 'preact';\nimport { TR } from './tr';\nimport { TH } from './th';\nimport { classJoin, className } from '../../util/className';\nimport Header from '../../header';\nimport { TColumn } from '../../types';\nimport { calculateRowColSpans } from '../../util/table';\nimport { useConfig } from '../../hooks/useConfig';\nimport useSelector from '../../hooks/useSelector';\n\nexport function THead() {\n  const config = useConfig();\n  const header = useSelector((state) => state.header);\n\n  const renderColumn = (\n    column: TColumn,\n    rowIndex: number,\n    columnIndex: number,\n    totalRows: number,\n  ) => {\n    const { rowSpan, colSpan } = calculateRowColSpans(\n      column,\n      rowIndex,\n      totalRows,\n    );\n\n    return (\n      <TH\n        column={column}\n        index={columnIndex}\n        colSpan={colSpan}\n        rowSpan={rowSpan}\n      />\n    );\n  };\n\n  const renderRow = (row: TColumn[], rowIndex: number, totalRows: number) => {\n    // because the only sortable columns are leaf columns (not parents)\n    const leafColumns = Header.leafColumns(header.columns);\n\n    return (\n      <TR>\n        {row.map((col) => {\n          if (col.hidden) return null;\n\n          return renderColumn(\n            col,\n            rowIndex,\n            leafColumns.indexOf(col),\n            totalRows,\n          );\n        })}\n      </TR>\n    );\n  };\n\n  const renderRows = () => {\n    const rows = Header.tabularFormat(header.columns);\n\n    return rows.map((row, rowIndex) => renderRow(row, rowIndex, rows.length));\n  };\n\n  if (header) {\n    return (\n      <thead\n        key={header.id}\n        className={classJoin(className('thead'), config.className.thead)}\n      >\n        {renderRows()}\n      </thead>\n    );\n  }\n\n  return null;\n}\n","import { TColumn } from '../types';\nimport Header from '../header';\n\nexport function calculateRowColSpans(\n  column: TColumn,\n  rowIndex: number,\n  totalRows: number,\n): { rowSpan: number; colSpan: number } {\n  const depth = Header.maximumDepth(column);\n  const remainingRows = totalRows - rowIndex;\n  const rowSpan = Math.floor(remainingRows - depth - depth / remainingRows);\n  const colSpan = (column.columns && column.columns.length) || 1;\n\n  return {\n    rowSpan: rowSpan,\n    colSpan: colSpan,\n  };\n}\n","import Header from 'src/header';\nimport Tabular from '../tabular';\nimport { Status } from '../types';\n\nexport const SetStatusToRendered = () => (state) => {\n  if (state.status === Status.Loaded) {\n    return {\n      ...state,\n      status: Status.Rendered,\n    };\n  }\n\n  return state;\n};\n\nexport const SetLoadingData = () => (state) => {\n  return {\n    ...state,\n    status: Status.Loading,\n  };\n};\n\nexport const SetData = (data: Tabular) => (state) => {\n  if (!data) return state;\n\n  return {\n    ...state,\n    data: data,\n    status: Status.Loaded,\n  };\n};\n\nexport const SetDataErrored = () => (state) => {\n  return {\n    ...state,\n    data: null,\n    status: Status.Error,\n  };\n};\n\nexport const SetHeader = (header: Header) => (state) => {\n  return {\n    ...state,\n    header: header,\n  };\n};\n\nexport const SetTableRef = (tableRef) => (state) => {\n  return {\n    ...state,\n    tableRef: tableRef,\n  };\n};\n","import { h } from 'preact';\nimport { TBody } from './tbody';\nimport { THead } from './thead';\nimport { classJoin, className } from '../../util/className';\nimport { useConfig } from '../../hooks/useConfig';\nimport { useEffect, useRef } from 'preact/hooks';\nimport * as actions from '../actions';\nimport { useStore } from '../../hooks/useStore';\n\nexport function Table() {\n  const config = useConfig();\n  const tableRef = useRef(null);\n  const { dispatch } = useStore();\n\n  useEffect(() => {\n    if (tableRef) dispatch(actions.SetTableRef(tableRef));\n  }, [tableRef]);\n\n  return (\n    <table\n      ref={tableRef}\n      role=\"grid\"\n      className={classJoin(className('table'), config.className.table)}\n      style={{\n        ...config.style.table,\n        ...{\n          height: config.height,\n        },\n      }}\n    >\n      <THead />\n      <TBody />\n    </table>\n  );\n}\n","import { classJoin, className } from '../util/className';\nimport { h } from 'preact';\nimport { PluginPosition, PluginRenderer } from '../plugin';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useConfig } from '../hooks/useConfig';\n\nexport function HeaderContainer() {\n  const [isActive, setIsActive] = useState(true);\n  const headerRef = useRef(null);\n  const config = useConfig();\n\n  useEffect(() => {\n    if (headerRef.current.children.length === 0) {\n      setIsActive(false);\n    }\n  }, [headerRef]);\n\n  if (isActive) {\n    return (\n      <div\n        ref={headerRef}\n        className={classJoin(className('head'), config.className.header)}\n        style={{ ...config.style.header }}\n      >\n        <PluginRenderer position={PluginPosition.Header} />\n      </div>\n    );\n  }\n\n  return null;\n}\n","import { h } from 'preact';\nimport { classJoin, className } from '../util/className';\nimport { PluginPosition, PluginRenderer } from '../plugin';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useConfig } from '../hooks/useConfig';\n\nexport function FooterContainer() {\n  const footerRef = useRef(null);\n  const [isActive, setIsActive] = useState(true);\n  const config = useConfig();\n\n  useEffect(() => {\n    if (footerRef.current.children.length === 0) {\n      setIsActive(false);\n    }\n  }, [footerRef]);\n\n  if (isActive) {\n    return (\n      <div\n        ref={footerRef}\n        className={classJoin(className('footer'), config.className.footer)}\n        style={{ ...config.style.footer }}\n      >\n        <PluginRenderer position={PluginPosition.Footer} />\n      </div>\n    );\n  }\n\n  return null;\n}\n","import { createRef, h } from 'preact';\nimport { classJoin, className } from '../util/className';\nimport { Status } from '../types';\nimport { Table } from './table/table';\nimport { HeaderContainer } from './headerContainer';\nimport { FooterContainer } from './footerContainer';\nimport log from '../util/log';\nimport { useEffect } from 'preact/hooks';\nimport * as actions from './actions';\nimport { useStore } from '../hooks/useStore';\nimport useSelector from '../hooks/useSelector';\nimport { useConfig } from '../hooks/useConfig';\nimport { throttle } from '../util/throttle';\n\nexport function Container() {\n  const config = useConfig();\n  const { dispatch } = useStore();\n  const status = useSelector((state) => state.status);\n  const data = useSelector((state) => state.data);\n  const tableRef = useSelector((state) => state.tableRef);\n  const tempRef = createRef();\n\n  const processPipeline = throttle(async () => {\n    dispatch(actions.SetLoadingData());\n\n    try {\n      const data = await config.pipeline.process();\n      dispatch(actions.SetData(data));\n\n      // TODO: do we need this setTimemout?\n      setTimeout(() => {\n        dispatch(actions.SetStatusToRendered());\n      }, 0);\n    } catch (e) {\n      log.error(e);\n      dispatch(actions.SetDataErrored());\n    }\n  }, config.processingThrottleMs);\n\n  useEffect(() => {\n    // set the initial header object\n    // we update the header width later when \"data\"\n    // is available in the state\n    dispatch(actions.SetHeader(config.header));\n\n    processPipeline();\n    config.pipeline.on('updated', processPipeline);\n\n    return () => config.pipeline.off('updated', processPipeline);\n  }, []);\n\n  useEffect(() => {\n    if (config.header && status === Status.Loaded && data?.length) {\n      // now that we have the data, let's adjust columns width\n      // NOTE: that we only calculate the columns width once\n      dispatch(\n        actions.SetHeader(config.header.adjustWidth(config, tableRef, tempRef)),\n      );\n    }\n  }, [data, config, tempRef]);\n\n  return (\n    <div\n      role=\"complementary\"\n      className={classJoin(\n        'gridjs',\n        className('container'),\n        status === Status.Loading ? className('loading') : null,\n        config.className.container,\n      )}\n      style={{\n        ...config.style.container,\n        ...{\n          width: config.width,\n        },\n      }}\n    >\n      {status === Status.Loading && (\n        <div className={className('loading-bar')} />\n      )}\n\n      <HeaderContainer />\n\n      <div className={className('wrapper')} style={{ height: config.height }}>\n        <Table />\n      </div>\n\n      <FooterContainer />\n\n      <div ref={tempRef} id=\"gridjs-temp\" className={className('temp')} />\n    </div>\n  );\n}\n","import { Config } from './config';\nimport { h, render, VNode } from 'preact';\nimport { Container } from './view/container';\nimport log from './util/log';\nimport { EventEmitter } from './util/eventEmitter';\nimport { GridEvents } from './events';\nimport { PluginManager } from './plugin';\nimport { ConfigContext } from './config';\n\nclass Grid extends EventEmitter<GridEvents> {\n  public config: Config;\n  public plugin: PluginManager;\n\n  constructor(config?: Partial<Config>) {\n    super();\n    this.config = new Config()\n      .assign({ instance: this, eventEmitter: this })\n      .update(config);\n    this.plugin = this.config.plugin;\n  }\n\n  public updateConfig(config: Partial<Config>): this {\n    this.config.update(config);\n    return this;\n  }\n\n  createElement(): VNode {\n    return h(ConfigContext.Provider, {\n      value: this.config,\n      children: h(Container, {}),\n    });\n  }\n\n  /**\n   * Uses the existing container and tries to clear the cache\n   * and re-render the existing Grid.js instance again. This is\n   * useful when a new config is set/updated.\n   *\n   */\n  forceRender(): this {\n    if (!this.config || !this.config.container) {\n      log.error(\n        'Container is empty. Make sure you call render() before forceRender()',\n        true,\n      );\n    }\n\n    this.destroy();\n\n    // recreate the Grid instance\n    render(this.createElement(), this.config.container);\n\n    return this;\n  }\n\n  /**\n   * Deletes the Grid.js instance\n   */\n  destroy(): void {\n    this.config.pipeline.clearCache();\n    // TODO: not sure if it's a good idea to render a null element but I couldn't find a better way\n    render(null, this.config.container);\n  }\n\n  /**\n   * Mounts the Grid.js instance to the container\n   * and renders the instance\n   *\n   * @param container\n   */\n  render(container: Element): this {\n    if (!container) {\n      log.error('Container element cannot be null', true);\n    }\n\n    if (container.childNodes.length > 0) {\n      log.error(\n        `The container element ${container} is not empty. Make sure the container is empty and call render() again`,\n      );\n      return this;\n    }\n\n    this.config.container = container;\n    render(this.createElement(), container);\n\n    return this;\n  }\n}\n\nexport default Grid;\n"],"names":["Status","n","l","u","i","t","o","r","f","e","c","s","a","parentNode","removeChild","h","arguments","length","children","call","defaultProps","v","type","props","key","ref","__k","__","__b","__e","__d","__c","__h","constructor","__v","vnode","y","current","p","d","this","context","_","indexOf","k","base","b","push","g","__r","debounceRendering","setTimeout","sort","some","__P","j","__n","ownerSVGElement","z","w","x","C","Array","isArray","m","A","N","M","appendChild","nextSibling","insertBefore","$","setProperty","test","H","style","cssText","replace","toLowerCase","slice","addEventListener","T","I","removeEventListener","removeAttribute","setAttribute","event","contextType","value","__E","prototype","render","O","sub","state","_sb","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","L","diffed","localName","nodeType","document","createTextNode","createElementNS","createElement","is","data","childNodes","dangerouslySetInnerHTML","attributes","name","__html","innerHTML","checked","unmount","componentWillUnmount","P","firstChild","Math","random","toString","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","Base","id","_id","generateUUID","_createClass","HTMLElement","parentElement","content","html","Cell","_Base","_this","update","_inheritsLoose","_proto","cast","outerHTML","Row","cells","_cells","cell","index","toArray","map","fromCells","get","set","Tabular","rows","_rows","_length","row","fromRows","fromArray","oneDtoTwoD","len","flatBooleanEval","expression","match","split","or","every","and","trimmedAnd","trim","topLevelExpressionsPattern","unwrappedExpression","group","String","nestedBooleanEval","keyword","columns","ignoreHiddenColumns","tabular","selector","filter","rowIndex","kw","cellIndex","_ref","hidden","element","RegExp","cellMatches","rowMatches","EventEmitter","ProcessorType","callbacks","init","listeners","on","listener","off","eventName","emit","_arguments","apply","deepEqual","obj1","obj2","keys1","Object","keys","keys2","_keys","_i","hasOwnProperty","PipelineProcessor","_EventEmitter","_props","setProps","process","args","validateProps","_process","concat","updatedProps","_extends","GlobalSearchFilter","search","Filter","className","prefix","reduce","prev","cur","ServerGlobalSearchFilter","options","updates","url","body","ServerFilter","__H","__V","B","__N","F","shift","requestAnimationFrame","clearTimeout","cancelAnimationFrame","useContext","ConfigContext","enUS","placeholder","sortAsc","sortDesc","pagination","previous","next","navigate","page","pages","showing","of","to","results","loading","noRecordsFound","error","Translator","language","_language","_defaultLanguage","getString","message","lang","splitted","val","join","translate","messageFormat","translated","useTranslator","config","useConfig","_config$translator","translator","payload","store","useSelector","useStore","_useState","useState","getState","setCurrent","useEffect","subscribe","updated","Search","_config$className","undefined","processor","setProcessor","dispatch","server","header","actions","pipeline","register","unregister","func","waitFor","timeout","debouncedOnInput","useCallback","target","HTMLInputElement","debounceTimeout","resolve","classJoin","onInput","PaginationLimit","isNaN","Number","limit","Error","Limit","ServerPaginationLimit","ServerLimit","Pagination","summary","_config$pagination$su","_config$pagination$ne","_config$pagination","nextButton","_config$pagination$pr","prevButton","_config$pagination$bu","buttonsCount","_config$pagination$li","_config$pagination$pa","resetPageOnUpdate","_config$pagination$re","useRef","currentPage","setCurrentPage","_useState2","total","setTotal","onUpdate","updatedProcessor","ceil","setPage","Fragment","role","paginationSummary","title","min","tabIndex","disabled","onClick","paginationButton","paginationButtonPrev","maxCount","pagePivot","floor","from","paginationButtonCurrent","renderPages","paginationButtonNext","width","containerWidth","parseInt","px","ShadowTable","shadowTable","tableRef","cloneNode","position","zIndex","visibility","nodeElement","camelCase","str","words","word","charAt","toUpperCase","PluginPosition","log","Logger","format","throwException","msg","console","warn","info","PluginManager","plugins","find","add","plugin","remove","splice","list","order","PluginRenderer","pluginId","component","Header","_columns","adjustWidth","tempRef","container","autoWidth","clientWidth","widths","getShadowTableWidths","querySelector","tableElement","tableClassName","tableStyle","tableLayout","padding","margin","border","outline","querySelectorAll","getAttribute","minWidth","obj","_step","_iterator","_createForOfIteratorHelperLoose","tabularFormat","done","column","setSort","sortConfig","cols","_step2","setResizable","resizable","_step3","_iterator3","setID","_step4","_iterator4","logger","populatePlugins","pluginManager","_step5","_iterator5","fromColumns","_step6","_iterator6","isValidElement","typedColumn","createFromConfig","fromHTMLTable","_step7","_iterator7","th","result","_step8","_iterator8","col","nextRow","leafColumns","_step9","_iterator9","maximumDepth","Storage","MemoryStorage","_Storage","Promise","reject","ServerStorage","handler","response","handle","ok","json","status","statusText","opts","fetch","then","bind","res","StorageUtils","storage","tableElementToArray","display","arr","parsedRow","_iterator2","Node","TEXT_NODE","DOMParser","parseFromString","documentElement","textContent","pact","_settle","observer","_Pact","onFulfilled","onRejected","callback","_isSettledPact","thenable","Pipeline","steps","_steps","cache","Map","lastProcessorIndexUpdated","step","clearCache","priority","findProcessorIndexByID","processorPropsUpdated","addProcessorByPriority","afterRegistered","tryRegister","subSteps","proc","newSubStep","second","first","getStepsByType","getSortedProcessorTypes","_temp3","_result","_this2","_temp2","array","check","_cycle","processorIndex","_processor$process","_catch","processorID","findIndex","setLastProcessorIndex","StorageExtractor","Extractor","arrayResponse","ArrayToTabularTransformer","Transformer","ServerInitiator","_PipelineProcessor","entries","serverStorageOptions","acc","_extends2","Initiator","StorageResponseToArrayTransformer","castData","pad","storageResponse","PipelineUtils","initialState","isDispatching","getListeners","reducer","prevState","lis","Consumer","Provider","createContext","Config","assign","defaultConfig","partialConfig","fromPartialConfig","Store","Init","height","processingThrottleMs","multiColumn","Footer","TD","colSpan","td","messageCell","eventEmitter","formatter","TR","tr","messageRow","getColumn","MessageRow","TBody","headerLength","visibleColumns","tbody","Loading","Rendered","notfound","NativeSort","condition","direction","compare","cellA","cellB","compareWrapper","cmp","sortedRows","sorted","Sort","multi","_state$sort","reset","count","_index2","SortToggle","SortColumn","ServerSort","setDirection","processorType","getSortProcessor","processors","currentColumn","getSortClassName","preventDefault","stopPropagation","shiftKey","throttle","fn","wait","timeoutId","lastTime","Date","now","execute","currentTime","elapsed","Resize","getPageX","MouseEvent","pageX","changedTouches","start","offsetStart","thRef","moveFn","move","end","thElement","onMouseDown","onTouchStart","TH","setStyle","fixedHeader","offsetTop","top","isSortable","SortActions","onKeyDown","which","rowSpan","THead","thead","renderRow","totalRows","columnIndex","calculateRowColSpans","depth","remainingRows","_calculateRowColSpans","renderColumn","SetHeader","Table","table","HeaderContainer","isActive","setIsActive","headerRef","FooterContainer","footerRef","footer","Container","processPipeline","Loaded","_temp","Grid","instance","_assertThisInitialized","updateConfig","forceRender","destroy"],"mappings":"k5DAiECA,GAND,SAAYA,GACVA,EAAAA,EAAA,KAAA,GAAA,OACAA,EAAAA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,MAAA,GAAA,OACD,CAND,CAAYA,IAAAA,EAMX,CAAA,ICjED,IAAIC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAE,CAAE,EAACC,EAAE,GAAGC,EAAE,oEAAoE,SAASC,EAAEV,EAAEC,GAAG,IAAI,IAAIC,KAAKD,EAAED,EAAEE,GAAGD,EAAEC,GAAG,OAAOF,CAAC,CAAC,SAASW,EAAEX,GAAG,IAAIC,EAAED,EAAEY,WAAWX,GAAGA,EAAEY,YAAYb,EAAE,CAAC,SAASc,EAAEb,EAAEC,EAAEC,GAAG,IAAIC,EAAEC,EAAEC,EAAEC,EAAE,CAAE,EAAC,IAAID,KAAKJ,EAAE,OAAOI,EAAEF,EAAEF,EAAEI,GAAG,OAAOA,EAAED,EAAEH,EAAEI,GAAGC,EAAED,GAAGJ,EAAEI,GAAG,GAAGS,UAAUC,OAAO,IAAIT,EAAEU,SAASF,UAAUC,OAAO,EAAEhB,EAAEkB,KAAKH,UAAU,GAAGZ,GAAG,mBAAmBF,GAAG,MAAMA,EAAEkB,aAAa,IAAIb,KAAKL,EAAEkB,kBAAa,IAASZ,EAAED,KAAKC,EAAED,GAAGL,EAAEkB,aAAab,IAAI,OAAOc,EAAEnB,EAAEM,EAAEH,EAAEC,EAAE,KAAK,CAAC,SAASe,EAAEpB,EAAEG,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,EAAE,CAACc,KAAKrB,EAAEsB,MAAMnB,EAAEoB,IAAInB,EAAEoB,IAAInB,EAAEoB,IAAI,KAAKC,GAAG,KAAKC,IAAI,EAAEC,IAAI,KAAKC,SAAI,EAAOC,IAAI,KAAKC,IAAI,KAAKC,iBAAY,EAAOC,IAAI,MAAM3B,IAAIJ,EAAEI,GAAG,OAAO,MAAMA,GAAG,MAAML,EAAEiC,OAAOjC,EAAEiC,MAAM3B,GAAGA,CAAC,CAAC,SAAS4B,IAAI,MAAM,CAACC,QAAQ,KAAK,CAAC,SAASC,EAAErC,GAAG,OAAOA,EAAEiB,QAAQ,CAAC,SAASqB,EAAEtC,EAAEC,GAAGsC,KAAKjB,MAAMtB,EAAEuC,KAAKC,QAAQvC,CAAC,CAAC,SAASwC,EAAEzC,EAAEC,GAAG,GAAG,MAAMA,EAAE,OAAOD,EAAE0B,GAAGe,EAAEzC,EAAE0B,GAAG1B,EAAE0B,GAAGD,IAAIiB,QAAQ1C,GAAG,GAAG,KAAK,IAAI,IAAIE,EAAED,EAAED,EAAEyB,IAAIT,OAAOf,IAAI,GAAG,OAAOC,EAAEF,EAAEyB,IAAIxB,KAAK,MAAMC,EAAE0B,IAAI,OAAO1B,EAAE0B,IAAI,MAAM,mBAAmB5B,EAAEqB,KAAKoB,EAAEzC,GAAG,IAAI,CAAC,SAAS2C,EAAE3C,GAAG,IAAIC,EAAEC,EAAE,GAAG,OAAOF,EAAEA,EAAE0B,KAAK,MAAM1B,EAAE8B,IAAI,CAAC,IAAI9B,EAAE4B,IAAI5B,EAAE8B,IAAIc,KAAK,KAAK3C,EAAE,EAAEA,EAAED,EAAEyB,IAAIT,OAAOf,IAAI,GAAG,OAAOC,EAAEF,EAAEyB,IAAIxB,KAAK,MAAMC,EAAE0B,IAAI,CAAC5B,EAAE4B,IAAI5B,EAAE8B,IAAIc,KAAK1C,EAAE0B,IAAI,KAAK,CAAC,OAAOe,EAAE3C,EAAE,CAAC,CAAC,SAAS6C,EAAE7C,KAAKA,EAAE6B,MAAM7B,EAAE6B,KAAI,IAAKzB,EAAE0C,KAAK9C,KAAK+C,EAAEC,OAAO3C,IAAIJ,EAAEgD,sBAAsB5C,EAAEJ,EAAEgD,oBAAoBC,YAAYH,EAAE,CAAC,SAASA,IAAI,IAAI,IAAI/C,EAAE+C,EAAEC,IAAI5C,EAAEY,QAAQhB,EAAEI,EAAE+C,KAAK,SAASnD,EAAEC,GAAG,OAAOD,EAAEiC,IAAIN,IAAI1B,EAAEgC,IAAIN,GAAG,GAAGvB,EAAE,GAAGJ,EAAEoD,KAAK,SAASpD,GAAG,IAAIC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEN,EAAE6B,MAAMxB,GAAGD,GAAGH,EAAED,GAAGiC,KAAKL,KAAKtB,EAAEL,EAAEoD,OAAOnD,EAAE,IAAIC,EAAEO,EAAE,CAAA,EAAGN,IAAI6B,IAAI7B,EAAE6B,IAAI,EAAEqB,EAAEhD,EAAEF,EAAED,EAAEF,EAAEsD,SAAI,IAASjD,EAAEkD,gBAAgB,MAAMpD,EAAE2B,IAAI,CAAC1B,GAAG,KAAKH,EAAE,MAAMG,EAAEoC,EAAErC,GAAGC,EAAED,EAAE2B,KAAK0B,EAAEvD,EAAEE,GAAGA,EAAEwB,KAAKvB,GAAGsC,EAAEvC,IAAI,EAAE,CAAC,SAASsD,EAAE1D,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEG,EAAEC,EAAEC,GAAG,IAAIG,EAAEqB,EAAEG,EAAEK,EAAEE,EAAEE,EAAEW,EAAEC,EAAExD,GAAGA,EAAEsB,KAAKjB,EAAEoD,EAAED,EAAE3C,OAAO,IAAId,EAAEuB,IAAI,GAAGX,EAAE,EAAEA,EAAEb,EAAEe,OAAOF,IAAI,GAAG,OAAO6B,EAAEzC,EAAEuB,IAAIX,GAAG,OAAO6B,EAAE1C,EAAEa,KAAK,kBAAkB6B,EAAE,KAAK,iBAAiBA,GAAG,iBAAiBA,GAAG,iBAAiBA,EAAEvB,EAAE,KAAKuB,EAAE,KAAK,KAAKA,GAAGkB,MAAMC,QAAQnB,GAAGvB,EAAEiB,EAAE,CAACpB,SAAS0B,GAAG,KAAK,KAAK,MAAMA,EAAEhB,IAAI,EAAEP,EAAEuB,EAAEtB,KAAKsB,EAAErB,MAAMqB,EAAEpB,IAAIoB,EAAEnB,IAAImB,EAAEnB,IAAI,KAAKmB,EAAEV,KAAKU,GAAG,CAAC,GAAGA,EAAEjB,GAAGxB,EAAEyC,EAAEhB,IAAIzB,EAAEyB,IAAI,EAAE,QAAQW,EAAEqB,EAAE7C,KAAKwB,GAAGK,EAAEpB,KAAKe,EAAEf,KAAKoB,EAAEtB,OAAOiB,EAAEjB,KAAKsC,EAAE7C,QAAG,OAAY,IAAIqB,EAAE,EAAEA,EAAEyB,EAAEzB,IAAI,CAAC,IAAIG,EAAEqB,EAAExB,KAAKQ,EAAEpB,KAAKe,EAAEf,KAAKoB,EAAEtB,OAAOiB,EAAEjB,KAAK,CAACsC,EAAExB,QAAG,EAAO,KAAK,CAACG,EAAE,IAAI,CAACgB,EAAEtD,EAAE2C,EAAEL,EAAEA,GAAG/B,EAAEH,EAAEC,EAAEC,EAAEG,EAAEC,EAAEC,GAAGkC,EAAEF,EAAEf,KAAKO,EAAEQ,EAAEnB,MAAMc,EAAEd,KAAKW,IAAIuB,IAAIA,EAAE,IAAIpB,EAAEd,KAAKkC,EAAEZ,KAAKR,EAAEd,IAAI,KAAKmB,GAAGe,EAAEZ,KAAKX,EAAEQ,EAAEb,KAAKe,EAAEF,IAAI,MAAME,GAAG,MAAME,IAAIA,EAAEF,GAAG,mBAAmBF,EAAEtB,MAAMsB,EAAElB,MAAMa,EAAEb,IAAIkB,EAAEd,IAAInB,EAAEqD,EAAEpB,EAAEjC,EAAEV,GAAGU,EAAEsD,EAAEhE,EAAE2C,EAAEL,EAAEqB,EAAEd,EAAEnC,GAAG,mBAAmBR,EAAEmB,OAAOnB,EAAE2B,IAAInB,IAAIA,GAAG4B,EAAEV,KAAKlB,GAAGA,EAAEE,YAAYZ,IAAIU,EAAE+B,EAAEH,GAAG,CAAC,IAAIpC,EAAE0B,IAAImB,EAAEjC,EAAE8C,EAAE9C,KAAK,MAAM6C,EAAE7C,IAAImD,EAAEN,EAAE7C,GAAG6C,EAAE7C,IAAI,GAAG4C,EAAE,IAAI5C,EAAE,EAAEA,EAAE4C,EAAE1C,OAAOF,IAAIoD,EAAER,EAAE5C,GAAG4C,IAAI5C,GAAG4C,IAAI5C,GAAG,CAAC,SAASiD,EAAE/D,EAAEC,EAAEC,GAAG,IAAI,IAAIC,EAAEC,EAAEJ,EAAEyB,IAAIpB,EAAE,EAAED,GAAGC,EAAED,EAAEY,OAAOX,KAAKF,EAAEC,EAAEC,MAAMF,EAAEuB,GAAG1B,EAAEC,EAAE,mBAAmBE,EAAEkB,KAAK0C,EAAE5D,EAAEF,EAAEC,GAAG8D,EAAE9D,EAAEC,EAAEA,EAAEC,EAAED,EAAEyB,IAAI3B,IAAI,OAAOA,CAAC,CAAyH,SAAS+D,EAAEhE,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,EAAEC,EAAEC,EAAE,QAAG,IAASP,EAAE4B,IAAIvB,EAAEL,EAAE4B,IAAI5B,EAAE4B,SAAI,OAAY,GAAG,MAAM3B,GAAGE,GAAGC,GAAG,MAAMD,EAAEQ,WAAWZ,EAAE,GAAG,MAAMK,GAAGA,EAAEO,aAAaZ,EAAEA,EAAEmE,YAAY/D,GAAGE,EAAE,SAAS,CAAC,IAAIC,EAAEF,EAAEG,EAAE,GAAGD,EAAEA,EAAE6D,cAAc5D,EAAEL,EAAEa,OAAOR,GAAG,EAAE,GAAGD,GAAGH,EAAE,MAAMJ,EAAEA,EAAEqE,aAAajE,EAAEC,GAAGC,EAAED,CAAC,CAAC,YAAO,IAASC,EAAEA,EAAEF,EAAEgE,WAAW,CAA4N,SAASE,EAAEtE,EAAEC,EAAEC,GAAG,MAAMD,EAAE,GAAGD,EAAEuE,YAAYtE,EAAEC,GAAGF,EAAEC,GAAG,MAAMC,EAAE,GAAG,iBAAiBA,GAAGO,EAAE+D,KAAKvE,GAAGC,EAAEA,EAAE,IAAI,CAAC,SAASuE,EAAEzE,EAAEC,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,EAAEL,EAAE,GAAG,UAAUC,EAAE,GAAG,iBAAiBC,EAAEF,EAAE0E,MAAMC,QAAQzE,MAAM,CAAC,GAAG,iBAAiBC,IAAIH,EAAE0E,MAAMC,QAAQxE,EAAE,IAAIA,EAAE,IAAIF,KAAKE,EAAED,GAAGD,KAAKC,GAAGoE,EAAEtE,EAAE0E,MAAMzE,EAAE,IAAI,GAAGC,EAAE,IAAID,KAAKC,EAAEC,GAAGD,EAAED,KAAKE,EAAEF,IAAIqE,EAAEtE,EAAE0E,MAAMzE,EAAEC,EAAED,GAAG,MAAM,GAAG,MAAMA,EAAE,IAAI,MAAMA,EAAE,GAAGI,EAAEJ,KAAKA,EAAEA,EAAE2E,QAAQ,WAAW,KAAK3E,EAAEA,EAAE4E,gBAAgB7E,EAAEC,EAAE4E,cAAcC,MAAM,GAAG7E,EAAE6E,MAAM,GAAG9E,EAAEC,IAAID,EAAEC,EAAE,CAAE,GAAED,EAAEC,EAAEA,EAAEI,GAAGH,EAAEA,EAAEC,GAAGH,EAAE+E,iBAAiB9E,EAAEI,EAAE2E,EAAEC,EAAE5E,GAAGL,EAAEkF,oBAAoBjF,EAAEI,EAAE2E,EAAEC,EAAE5E,QAAQ,GAAG,4BAA4BJ,EAAE,CAAC,GAAGG,EAAEH,EAAEA,EAAE2E,QAAQ,cAAc,KAAKA,QAAQ,SAAS,UAAU,GAAG,SAAS3E,GAAG,SAASA,GAAG,SAASA,GAAG,aAAaA,GAAG,aAAaA,GAAGA,KAAKD,EAAE,IAAIA,EAAEC,GAAG,MAAMC,EAAE,GAAGA,EAAE,MAAMF,EAAE,MAAMA,IAAI,mBAAmBE,IAAI,MAAMA,IAAG,IAAKA,IAAI,GAAGD,EAAEyC,QAAQ,KAAK1C,EAAEmF,gBAAgBlF,GAAGD,EAAEoF,aAAanF,EAAEC,GAAG,CAAC,CAAC,SAAS+E,EAAEjF,GAAGuC,KAAKtC,EAAED,EAAEqB,MAAK,GAAIpB,EAAEoF,MAAMpF,EAAEoF,MAAMrF,GAAGA,EAAE,CAAC,SAASgF,EAAEhF,GAAGuC,KAAKtC,EAAED,EAAEqB,MAAK,GAAIpB,EAAEoF,MAAMpF,EAAEoF,MAAMrF,GAAGA,EAAE,CAAC,SAASsD,EAAEtD,EAAEE,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,GAAG,IAAIE,EAAEG,EAAEM,EAAEe,EAAEM,EAAEE,EAAEE,EAAEE,EAAEgB,EAAEJ,EAAEK,EAAEJ,EAAEU,EAAEG,EAAEQ,EAAED,EAAE9E,EAAEmB,KAAK,QAAG,IAASnB,EAAE8B,YAAY,OAAO,KAAK,MAAM7B,EAAE4B,MAAMtB,EAAEN,EAAE4B,IAAIvB,EAAEN,EAAE0B,IAAIzB,EAAEyB,IAAI1B,EAAE6B,IAAI,KAAKzB,EAAE,CAACE,KAAKG,EAAEV,EAAE0B,MAAMhB,EAAET,GAAG,IAAIF,EAAE,GAAG,mBAAmBgF,EAAE,CAAC,GAAGjC,EAAE7C,EAAEoB,MAAMyC,GAAGpD,EAAEqE,EAAEM,cAAclF,EAAEO,EAAEmB,KAAK6B,EAAEhD,EAAEoD,EAAEA,EAAEzC,MAAMiE,MAAM5E,EAAEe,GAAGtB,EAAED,EAAE2B,IAAIe,GAAG/B,EAAEZ,EAAE4B,IAAI3B,EAAE2B,KAAKJ,GAAGZ,EAAE0E,KAAK,cAAcR,GAAGA,EAAES,UAAUC,OAAOxF,EAAE4B,IAAIhB,EAAE,IAAIkE,EAAEjC,EAAEY,IAAIzD,EAAE4B,IAAIhB,EAAE,IAAIwB,EAAES,EAAEY,GAAG7C,EAAEkB,YAAYgD,EAAElE,EAAE4E,OAAOC,GAAG5B,GAAGA,EAAE6B,IAAI9E,GAAGA,EAAEQ,MAAMyB,EAAEjC,EAAE+E,QAAQ/E,EAAE+E,MAAM,IAAI/E,EAAE0B,QAAQmB,EAAE7C,EAAEyC,IAAInD,EAAEgB,EAAEN,EAAEe,KAAI,EAAGf,EAAEiB,IAAI,GAAGjB,EAAEgF,IAAI,IAAI,MAAMhF,EAAEiF,MAAMjF,EAAEiF,IAAIjF,EAAE+E,OAAO,MAAMb,EAAEgB,2BAA2BlF,EAAEiF,KAAKjF,EAAE+E,QAAQ/E,EAAEiF,IAAIrF,EAAE,CAAE,EAACI,EAAEiF,MAAMrF,EAAEI,EAAEiF,IAAIf,EAAEgB,yBAAyBjD,EAAEjC,EAAEiF,OAAO5D,EAAErB,EAAEQ,MAAMmB,EAAE3B,EAAE+E,MAAMzE,EAAE,MAAM4D,EAAEgB,0BAA0B,MAAMlF,EAAEmF,oBAAoBnF,EAAEmF,qBAAqB,MAAMnF,EAAEoF,mBAAmBpF,EAAEiB,IAAIe,KAAKhC,EAAEoF,uBAAuB,CAAC,GAAG,MAAMlB,EAAEgB,0BAA0BjD,IAAIZ,GAAG,MAAMrB,EAAEqF,2BAA2BrF,EAAEqF,0BAA0BpD,EAAEY,IAAI7C,EAAEc,KAAK,MAAMd,EAAEsF,wBAAuB,IAAKtF,EAAEsF,sBAAsBrD,EAAEjC,EAAEiF,IAAIpC,IAAIzD,EAAE+B,MAAM9B,EAAE8B,IAAI,CAAC,IAAInB,EAAEQ,MAAMyB,EAAEjC,EAAE+E,MAAM/E,EAAEiF,IAAI7F,EAAE+B,MAAM9B,EAAE8B,MAAMnB,EAAEe,KAAI,GAAIf,EAAEmB,IAAI/B,EAAEA,EAAE0B,IAAIzB,EAAEyB,IAAI1B,EAAEuB,IAAItB,EAAEsB,IAAIvB,EAAEuB,IAAI4E,QAAQ,SAASrG,GAAGA,IAAIA,EAAE0B,GAAGxB,EAAE,GAAG8D,EAAE,EAAEA,EAAElD,EAAEgF,IAAI9E,OAAOgD,IAAIlD,EAAEiB,IAAIe,KAAKhC,EAAEgF,IAAI9B,IAAIlD,EAAEgF,IAAI,GAAGhF,EAAEiB,IAAIf,QAAQT,EAAEuC,KAAKhC,GAAG,MAAMd,CAAC,CAAC,MAAMc,EAAEwF,qBAAqBxF,EAAEwF,oBAAoBvD,EAAEjC,EAAEiF,IAAIpC,GAAG,MAAM7C,EAAEyF,oBAAoBzF,EAAEiB,IAAIe,KAAK,WAAWhC,EAAEyF,mBAAmBpE,EAAEM,EAAEE,EAAE,EAAE,CAAC,GAAG7B,EAAE0B,QAAQmB,EAAE7C,EAAEQ,MAAMyB,EAAEjC,EAAEmB,IAAI/B,EAAEY,EAAEuC,IAAIrD,EAAE4D,EAAE3D,EAAE+C,IAAIsB,EAAE,EAAE,cAAcU,GAAGA,EAAES,UAAUC,OAAO,CAAC,IAAI5E,EAAE+E,MAAM/E,EAAEiF,IAAIjF,EAAEe,KAAI,EAAG+B,GAAGA,EAAE1D,GAAGS,EAAEG,EAAE4E,OAAO5E,EAAEQ,MAAMR,EAAE+E,MAAM/E,EAAE0B,SAASiC,EAAE,EAAEA,EAAE3D,EAAEgF,IAAI9E,OAAOyD,IAAI3D,EAAEiB,IAAIe,KAAKhC,EAAEgF,IAAIrB,IAAI3D,EAAEgF,IAAI,EAAE,MAAM,GAAGhF,EAAEe,KAAI,EAAG+B,GAAGA,EAAE1D,GAAGS,EAAEG,EAAE4E,OAAO5E,EAAEQ,MAAMR,EAAE+E,MAAM/E,EAAE0B,SAAS1B,EAAE+E,MAAM/E,EAAEiF,UAAUjF,EAAEe,OAAOyC,EAAE,IAAIxD,EAAE+E,MAAM/E,EAAEiF,IAAI,MAAMjF,EAAE0F,kBAAkBpG,EAAEM,EAAEA,EAAE,CAAA,EAAGN,GAAGU,EAAE0F,oBAAoBpF,GAAG,MAAMN,EAAE2F,0BAA0B9D,EAAE7B,EAAE2F,wBAAwBtE,EAAEM,IAAIwC,EAAE,MAAMtE,GAAGA,EAAEU,OAAOgB,GAAG,MAAM1B,EAAEY,IAAIZ,EAAEW,MAAML,SAASN,EAAE+C,EAAE1D,EAAE6D,MAAMC,QAAQmB,GAAGA,EAAE,CAACA,GAAG/E,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,GAAGK,EAAE8B,KAAK1C,EAAE0B,IAAI1B,EAAE6B,IAAI,KAAKjB,EAAEiB,IAAIf,QAAQT,EAAEuC,KAAKhC,GAAG+B,IAAI/B,EAAE0E,IAAI1E,EAAEY,GAAG,MAAMZ,EAAEc,KAAI,CAAE,MAAM,MAAMtB,GAAGJ,EAAE+B,MAAM9B,EAAE8B,KAAK/B,EAAEuB,IAAItB,EAAEsB,IAAIvB,EAAE0B,IAAIzB,EAAEyB,KAAK1B,EAAE0B,IAAI8E,EAAEvG,EAAEyB,IAAI1B,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEE,IAAIE,EAAEV,EAAE0G,SAAShG,EAAET,EAA0F,CAAvF,MAAMF,GAAGE,EAAE+B,IAAI,MAAMxB,GAAG,MAAMH,KAAKJ,EAAE0B,IAAIpB,EAAEN,EAAE6B,MAAMtB,EAAEH,EAAEA,EAAEoC,QAAQlC,IAAI,MAAMP,EAAE2B,IAAI5B,EAAEE,EAAEC,EAAE,CAAC,CAAC,SAASsD,EAAEzD,EAAEE,GAAGD,EAAE6B,KAAK7B,EAAE6B,IAAI5B,EAAEF,GAAGA,EAAEoD,KAAK,SAASlD,GAAG,IAAIF,EAAEE,EAAE6B,IAAI7B,EAAE6B,IAAI,GAAG/B,EAAEoD,KAAK,SAASpD,GAAGA,EAAEkB,KAAKhB,EAAE,EAA0B,CAAvB,MAAMF,GAAGC,EAAE2B,IAAI5B,EAAEE,EAAE+B,IAAI,CAAC,EAAE,CAAC,SAASyE,EAAEzG,EAAEC,EAAEC,EAAEC,EAAEC,EAAEC,EAAEE,EAAEC,GAAG,IAAIC,EAAEI,EAAEM,EAAEe,EAAEhC,EAAEmB,MAAMe,EAAEnC,EAAEoB,MAAMgB,EAAEpC,EAAEmB,KAAKsB,EAAE,EAAE,GAAG,QAAQL,IAAIjC,GAAE,GAAI,MAAMC,EAAE,KAAKqC,EAAErC,EAAEU,OAAO2B,IAAI,IAAIjC,EAAEJ,EAAEqC,KAAK,iBAAiBjC,KAAK4B,IAAIA,EAAE5B,EAAEkG,YAAYtE,EAAE,IAAI5B,EAAEmG,UAAU,CAAC5G,EAAES,EAAEJ,EAAEqC,GAAG,KAAK,KAAK,CAAC,GAAG,MAAM1C,EAAE,CAAC,GAAG,OAAOqC,EAAE,OAAOwE,SAASC,eAAe1E,GAAGpC,EAAEI,EAAEyG,SAASE,gBAAgB,6BAA6B1E,GAAGwE,SAASG,cAAc3E,EAAED,EAAE6E,IAAI7E,GAAG/B,EAAE,KAAKG,GAAE,CAAE,CAAC,GAAG,OAAO6B,EAAEH,IAAIE,GAAG5B,GAAGR,EAAEkH,OAAO9E,IAAIpC,EAAEkH,KAAK9E,OAAO,CAAC,GAAG/B,EAAEA,GAAGN,EAAEkB,KAAKjB,EAAEmH,YAAYtG,GAAGqB,EAAEhC,EAAEmB,OAAOf,GAAG8G,wBAAwBjG,EAAEiB,EAAEgF,yBAAyB5G,EAAE,CAAC,GAAG,MAAMH,EAAE,IAAI6B,EAAE,CAAA,EAAGQ,EAAE,EAAEA,EAAE1C,EAAEqH,WAAWtG,OAAO2B,IAAIR,EAAElC,EAAEqH,WAAW3E,GAAG4E,MAAMtH,EAAEqH,WAAW3E,GAAG4C,OAAOnE,GAAGN,KAAKM,IAAIN,GAAGM,EAAEoG,QAAQ1G,EAAE0G,QAAQpG,EAAEoG,SAASvH,EAAEwH,aAAaxH,EAAEwH,UAAUrG,GAAGA,EAAEoG,QAAQ,IAAI,CAAC,GAAtqI,SAAWxH,EAAEC,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,EAAE,IAAIA,KAAKH,EAAE,aAAaG,GAAG,QAAQA,GAAGA,KAAKJ,GAAGwE,EAAEzE,EAAEK,EAAE,KAAKH,EAAEG,GAAGF,GAAG,IAAIE,KAAKJ,EAAEG,GAAG,mBAAmBH,EAAEI,IAAI,aAAaA,GAAG,QAAQA,GAAG,UAAUA,GAAG,YAAYA,GAAGH,EAAEG,KAAKJ,EAAEI,IAAIoE,EAAEzE,EAAEK,EAAEJ,EAAEI,GAAGH,EAAEG,GAAGF,EAAE,CAA+8HyD,CAAE3D,EAAEoC,EAAEF,EAAE9B,EAAEI,GAAGW,EAAElB,EAAEuB,IAAI,QAAQ,GAAGkB,EAAEzC,EAAEoB,MAAML,SAASyC,EAAEzD,EAAE4D,MAAMC,QAAQnB,GAAGA,EAAE,CAACA,GAAGzC,EAAEC,EAAEC,EAAEC,GAAG,kBAAkBiC,EAAEhC,EAAEE,EAAEF,EAAEA,EAAE,GAAGH,EAAEsB,KAAKgB,EAAEtC,EAAE,GAAGM,GAAG,MAAMH,EAAE,IAAIqC,EAAErC,EAAEU,OAAO2B,KAAK,MAAMrC,EAAEqC,IAAIhC,EAAEL,EAAEqC,IAAIlC,IAAI,UAAU4B,QAAG,KAAUM,EAAEN,EAAEkD,SAAS5C,IAAI1C,EAAEsF,OAAO,aAAajD,IAAIK,GAAG,WAAWL,GAAGK,IAAIR,EAAEoD,QAAQd,EAAExE,EAAE,QAAQ0C,EAAER,EAAEoD,OAAM,GAAI,YAAYlD,QAAG,KAAUM,EAAEN,EAAEqF,UAAU/E,IAAI1C,EAAEyH,SAASjD,EAAExE,EAAE,UAAU0C,EAAER,EAAEuF,SAAQ,GAAI,CAAC,OAAOzH,CAAC,CAAC,SAASiE,EAAElE,EAAEE,EAAEC,GAAG,IAAI,mBAAmBH,EAAEA,EAAEE,GAAGF,EAAEoC,QAAQlC,CAAqB,CAAnB,MAAMF,GAAGC,EAAE2B,IAAI5B,EAAEG,EAAE,CAAC,CAAC,SAAS8D,EAAEjE,EAAEE,EAAEC,GAAG,IAAIC,EAAEC,EAAE,GAAGJ,EAAE0H,SAAS1H,EAAE0H,QAAQ3H,IAAII,EAAEJ,EAAEwB,OAAOpB,EAAEgC,SAAShC,EAAEgC,UAAUpC,EAAE4B,KAAKsC,EAAE9D,EAAE,KAAKF,IAAI,OAAOE,EAAEJ,EAAE8B,KAAK,CAAC,GAAG1B,EAAEwH,qBAAqB,IAAIxH,EAAEwH,sBAA0C,CAAnB,MAAM5H,GAAGC,EAAE2B,IAAI5B,EAAEE,EAAE,CAACE,EAAEwC,KAAKxC,EAAEiD,IAAI,KAAKrD,EAAE8B,SAAI,CAAM,CAAC,GAAG1B,EAAEJ,EAAEyB,IAAI,IAAIpB,EAAE,EAAEA,EAAED,EAAEY,OAAOX,IAAID,EAAEC,IAAI4D,EAAE7D,EAAEC,GAAGH,EAAEC,GAAG,mBAAmBH,EAAEqB,MAAMlB,GAAG,MAAMH,EAAE4B,KAAKjB,EAAEX,EAAE4B,KAAK5B,EAAE0B,GAAG1B,EAAE4B,IAAI5B,EAAE6B,SAAI,CAAM,CAAC,SAAS8D,EAAE3F,EAAEC,EAAEC,GAAG,OAAOqC,KAAKP,YAAYhC,EAAEE,EAAE,CAAC,SAAS2H,EAAE3H,EAAEC,EAAEC,GAAG,IAAIC,EAAEC,EAAEE,EAAEP,EAAEyB,IAAIzB,EAAEyB,GAAGxB,EAAEC,GAAGG,GAAGD,EAAE,mBAAmBD,GAAG,KAAKA,GAAGA,EAAEqB,KAAKtB,EAAEsB,IAAIjB,EAAE,GAAG8C,EAAEnD,EAAED,IAAIG,GAAGD,GAAGD,GAAGsB,IAAIX,EAAEuB,EAAE,KAAK,CAACnC,IAAII,GAAGC,EAAEA,OAAE,IAASJ,EAAEqD,iBAAiBnD,GAAGD,EAAE,CAACA,GAAGE,EAAE,KAAKH,EAAE2H,WAAW9H,EAAEkB,KAAKf,EAAEiH,YAAY,KAAK5G,GAAGH,GAAGD,EAAEA,EAAEE,EAAEA,EAAEsB,IAAIzB,EAAE2H,WAAWzH,GAAGoD,EAAEjD,EAAEN,EAAE,cCG9zQ,MAAO,uCAAuC0E,QAAQ,QAAS,SAAUnE,GACvE,IAAMH,EAAqB,GAAhByH,KAAKC,SAAiB,EAEjC,OADW,KAALvH,EAAWH,EAAS,EAAJA,EAAW,GACxB2H,SAAS,GACpB,EACF,CDRkhSjI,EAAEQ,EAAEsE,MAAM7E,EAAE,CAAC2B,IAAI,SAAS5B,EAAEC,EAAEC,EAAEC,GAAG,IAAI,IAAIC,EAAEC,EAAEC,EAAEL,EAAEA,EAAEyB,IAAI,IAAItB,EAAEH,EAAE6B,OAAO1B,EAAEsB,GAAG,IAAI,IAAIrB,EAAED,EAAE4B,cAAc,MAAM3B,EAAE6H,2BAA2B9H,EAAE+H,SAAS9H,EAAE6H,yBAAyBlI,IAAIM,EAAEF,EAAEyB,KAAK,MAAMzB,EAAEgI,oBAAoBhI,EAAEgI,kBAAkBpI,EAAEG,GAAG,CAAE,GAAEG,EAAEF,EAAEyB,KAAKvB,EAAE,OAAOF,EAAEoF,IAAIpF,CAAc,CAAZ,MAAMH,GAAGD,EAAEC,CAAC,CAAC,MAAMD,CAAC,GAAGE,EAAE,EAAEC,EAAE,SAASH,GAAG,OAAO,MAAMA,QAAG,IAASA,EAAEgC,WAAW,EAAEM,EAAEmD,UAAU0C,SAAS,SAASnI,EAAEC,GAAG,IAAIC,EAAEA,EAAE,MAAMqC,KAAKwD,KAAKxD,KAAKwD,MAAMxD,KAAKsD,MAAMtD,KAAKwD,IAAIxD,KAAKwD,IAAIrF,EAAE,CAAE,EAAC6B,KAAKsD,OAAO,mBAAmB7F,IAAIA,EAAEA,EAAEU,EAAE,GAAGR,GAAGqC,KAAKjB,QAAQtB,GAAGU,EAAER,EAAEF,GAAG,MAAMA,GAAGuC,KAAKN,MAAMhC,GAAGsC,KAAKuD,IAAIhD,KAAK7C,GAAG4C,EAAEN,MAAM,EAAED,EAAEmD,UAAU4C,YAAY,SAASrI,GAAGuC,KAAKN,MAAMM,KAAKX,KAAI,EAAG5B,GAAGuC,KAAKR,IAAIe,KAAK9C,GAAG6C,EAAEN,MAAM,EAAED,EAAEmD,UAAUC,OAAOrD,EAAEjC,EAAE,GAAG2C,EAAEC,IAAI,EAAE1C,EAAE,EEAnqT,IAEnCgI,eAAA,WAGR,SAAYC,EAAAA,GAAOhG,KAFFiG,SAAG,EAGlBjG,KAAKiG,IAAMD,GAAME,GACnB,CAIC,OAJAC,mBAED,WACE,OAAOnG,KAAKiG,GACd,KAACF,CAAA,CATO,GCKJ,SAAqBK,EAACrH,GAC1B,SAASA,EAAMsH,eAAiB,OAAQ,CACtCvB,wBAAyB,CAAEG,OAAQlG,EAAMuH,UAE7C,CCHgBC,SAAAA,EAAKD,EAAiBD,GACpC,OAAO9H,EAAE6H,EAAa,CAAEE,QAASA,EAASD,cAAeA,GAC3D,CCLMG,mBAIJ,SAAAC,GAAA,SAAAD,EAAY5B,SAGQ,OAFlB8B,EAAOD,EAAA9H,KAAAqB,OAAAA,MAHF4E,YAKL8B,EAAKC,OAAO/B,GAAM8B,CACpB,CAJAE,EAAAJ,EAAAC,GAIC,IAAAI,EAAAL,EAAAtD,iBAAA2D,EAEOC,KAAA,SAAKlC,GACX,OAAIA,aAA2BwB,YACtBG,EAAK3B,EAAKmC,YAIrB,EAACF,EAOMF,OAAA,SAAO/B,GAEZ,OADA5E,KAAK4E,KAAO5E,KAAK8G,KAAKlC,GAExB5E,IAAA,IAtBA,CAJiB+F,GCDTiB,eAAA,SAAAP,GAGR,SAAYQ,EAAAA,GAAc,IAAAP,EAGC,OAFzBA,EAAOD,EAAA9H,KAAAqB,OAAAA,MAHDkH,YAKN,EAAAR,EAAKO,MAAQA,GAAS,GACxBP,CAAA,CAPQE,EAAAI,EAAAP,GAOP,IAEMU,EAAAA,EAAAA,UA6BN,OA7BMA,EAAAA,KAAA,SAAKC,GACV,OAAWpH,KAACkH,OAAOE,EACrB,EAACP,EAUMQ,QAAA,WACL,OAAOrH,KAAKiH,MAAMK,IAAI,SAACH,GAAI,SAAUvC,IAAI,EAC3C,EASO2C,EAAAA,UAAP,SAAiBN,GACf,OAAWD,IAAAA,EAAIC,EAAMK,IAAI,SAACH,GAAI,OAASX,IAAAA,EAAKW,EAAKvC,KAAK,GACxD,EArBAuB,EAAAa,EAAA,CAAA,CAAAhI,IAAA,QAAAwI,IAAA,WACE,OAAWxH,KAACkH,MACd,EAEAO,IAAA,SAAiBR,GACfjH,KAAKkH,OAASD,CAChB,GAAC,CAAAjI,IAAA,SAAAwI,IAiBD,WACE,OAAOxH,KAAKiH,MAAMxI,MACpB,KAACuI,CAAA,CAtCO,CAAQjB,GCEJ2B,eAAA,SAAAjB,GAIZ,SAAYkB,EAAAA,GACV,IAAAjB,EAQC,OARDA,EAAAD,EAAA9H,KAAAqB,aAJM4H,eACAC,aAAO,EAMXnB,EAAKiB,KADHA,aAAgBrG,MACNqG,EACHA,aAAgBX,EACb,CAACW,GAED,GAEhBjB,CAAA,CAdoBX,OAARa,EAAAc,EAAAjB,GAiCLY,EAAAA,UAAAA,QAAA,WACL,OAAOrH,KAAK2H,KAAKL,IAAI,SAACQ,UAAWA,EAACT,SAAS,EAC7C,EAACK,EASMK,SAAP,SAAgBJ,GACd,OAAWD,IAAAA,EAAQC,EAAKL,IAAI,SAACQ,UAAWd,EAACO,UAAUO,EAAIb,MAAM,GAC/D,EAACS,EASMM,UAAP,SACEpD,GAIA,OAAW8C,IAAAA,GAFX9C,EC9DE,SAAwBA,GAC5B,OAAIA,EAAK,IAAQA,EAAK,aAActD,MAKtCsD,EAJW,CAACA,EAIZ,CDwDWqD,CAAWrD,IAGX0C,IAAI,SAACQ,GAAG,OAASd,IAAAA,EAAIc,EAAIR,IAAI,SAACH,UAAaX,IAAAA,EAAKW,EAAK,GAAE,GAEhE,EA/CAhB,EAAAuB,EAAA,CAAA,CAAA1I,IAAA,OAAAwI,IAAA,WACE,OAAOxH,KAAK4H,KACd,EAACH,IAED,SAASE,GACP3H,KAAK4H,MAAQD,CACf,GAEA,CAAA3I,IAAA,SAAAwI,IAAA,WACE,YAAYK,SAAW7H,KAAK2H,KAAKlJ,MACnC,EAACgJ,IAGD,SAAWS,GACTlI,KAAK6H,QAAUK,CACjB,KA/BoBnC,CAAAA,CAAR,CAAQA,GEmDtB,SAASoC,EAAgBC,EAAoBC,GAC3C,OAAOD,EAAWE,MAAM,cAAczH,KAAK,SAAC0H,GAC1C,OAASA,EAACD,MAAM,eAAeE,MAAM,SAACC,GACpC,IAAMC,EAAaD,EAAIE,OAEvB,MAAmB,SAAfD,GAAwC,KAAfA,GAIV,UAAfA,GAIQL,EAACK,EACf,EACF,EACF,CAEA,IAAgCE,EAAG,oBAEnC,WAA2BR,EAAoBC,GAC7C,IAAyBQ,EAAGT,EAAW/F,QACrCuG,EACA,SAAC1I,EAAG4I,UAAgBC,OAACZ,EAAgBW,EAAOT,GAAO,GAGrD,OAAIO,EAA2B3G,KAAK4G,GACVG,EAACH,EAAqBR,GAG1BF,EAACU,EAAqBR,EAC9C,CAEc,YACZY,EACAC,EACAC,EACAC,EACAC,GAcA,OAXAJ,EAAUA,EAAQ5G,QAAQ,yBAA0B,QAW7C,IAAWqF,EAChB0B,EAAQzB,KAAK2B,OAAO,SAACxB,EAAKyB,GACxB,OAAwBP,EAACC,EAXV,SAACnB,EAAKyB,GAAQ,gBAAMC,GAAE,OACpC1B,EAACb,MAAMpG,KAAK,SAACsG,EAAMsC,UA/F1B,SACEF,EACAE,EACAtC,EACA8B,EASCS,GAAA,MAPCR,EAAAA,QAEAG,EAAQK,EAARL,SAOF,IAAKlC,EACH,OACD,EAED,GAZEgC,EAAAA,qBAcED,GACAA,EAAQO,IACsB,mBAAfA,IAEKP,EAAQO,GACZE,OACd,OAAO,EAKb,IAAI/E,EAAO,GAEX,GAAwB,mBAAbyE,EACTzE,EAAOyE,EAASlC,EAAKvC,KAAM2E,EAAUE,QAC5B,GAAqB,mBAAT7E,KAAmB,CAExC,IAAMgF,EAAUzC,EAAKvC,KACjBgF,GAAWA,EAAQ7K,OAAS6K,EAAQ7K,MAAMuH,UAE5C1B,EAAOgF,EAAQ7K,MAAMuH,QAExB,MAEC1B,EAAOmE,OAAO5B,EAAKvC,MAGrB,OAAWiF,IAAAA,OAAOZ,EAAS,MAAMhH,KAAK2C,EACxC,CA+CiBkF,CAACP,EAAUE,EAAWtC,EAAMqC,EAAI,CACzCN,QAAAA,EACAC,oBAAAA,EACAE,SAAAA,GACA,EACH,EAImCU,CAAWjC,EAAKyB,GACpD,GAEJ,CC9EaS,ICpBZC,GDoBYD,6CACHE,eAAS,CAAA,CAAA,IAAArD,EAAAmD,EAAA9G,UA8DhB,OA9DgB2D,EAKTsD,KAAA,SAAKrH,GACN9C,KAAKkK,YACRlK,KAAKkK,UAAY,CAClB,GAEGpH,IAAU9C,KAAKkK,UAAUpH,KAC3B9C,KAAKkK,UAAUpH,GAAS,GAE5B,EAAC+D,EAEDuD,UAAA,WACE,OAAWpK,KAACkK,SACd,EAACrD,EAEDwD,GAAA,SACEvH,EACAwH,GAIA,OAFAtK,KAAKmK,KAAKrH,GACV9C,KAAKkK,UAAUpH,GAAiBvC,KAAK+J,GAEvCtK,IAAA,EAEAuK,EAAAA,IAAA,SACEzH,EACAwH,GAEA,IAAME,EAAY1H,EAIlB,OAFA9C,KAAKmK,OAEAnK,KAAKkK,UAAUM,IAAmD,IAArCxK,KAAKkK,UAAUM,GAAW/L,QAK5DuB,KAAKkK,UAAUM,GAAaxK,KAAKkK,UAAUM,GAAWlB,OACpD,SAACtG,GAAK,OAAUA,GAAIsH,CAAQ,GAGvBtK,MAPEA,IAQX,EAAC6G,EAED4D,KAAA,SACE3H,GACyC,IAAA4H,EAAAlM,UAE1BgM,EAAG1H,EAIlB,OAFA9C,KAAKmK,KAAKK,GAENxK,KAAKkK,UAAUM,GAAW/L,OAAS,IACrCuB,KAAKkK,UAAUM,GAAW1G,QAAQ,SAACd,GAAK,OAAUA,EAAA2H,WAAA,EAAA,GAAApI,MAAA5D,KAAA+L,EAAA,GAAS,IAE5D,EAGH,EAACV,CAAA,aE7FsBY,GAAOC,EAASC,GAEvC,UAAeD,UAAgBC,EAC7B,OAAO,EAGT,GAAa,OAATD,GAA0B,OAATC,EACnB,OACD,EAED,GAAoB,iBAATD,EAGT,OAAOA,IAASC,EAGlB,GAAIxJ,MAAMC,QAAQsJ,IAASvJ,MAAMC,QAAQuJ,GAAO,CAC9C,GAAID,EAAKpM,SAAWqM,EAAKrM,OACvB,OAAO,EAET,IAAK,MAAQ,EAAGb,EAAIiN,EAAKpM,OAAQb,IAC/B,IAAKgN,GAAUC,EAAKjN,GAAIkN,EAAKlN,IAC3B,OAAO,EAGX,QACD,CAED,IAAWmN,EAAGC,OAAOC,KAAKJ,GACpBK,EAAQF,OAAOC,KAAKH,GAC1B,GAAIC,EAAMtM,SAAWyM,EAAMzM,OACzB,OAAO,EAET,IAAkBsM,IAAAA,EAAAA,EAAAA,EAAAA,iBAAO,CAApB,MAEHI,EAAAC,GAAA,IAAKN,EAAKO,eAAerM,KAAS4L,GAAUC,EAAK7L,GAAM8L,EAAK9L,IAC1D,QAEH,CACD,OACF,CAAA,EDxCA,SAAYiL,GACVA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,aAAA,GAAA,eACAA,EAAAA,EAAA,WAAA,GAAA,aACAA,EAAAA,EAAA,YAAA,GAAA,cACAA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,YAAA,GAAA,cACAA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,KAAA,GAAA,OACAA,EAAAA,EAAA,MAAA,GAAA,OACD,CAVD,CAAYA,KAAAA,GAUX,CAAA,IAWD,IAGEqB,gBAAA,SAAAC,GAQA,WAAYxM,GACV,IAAA2H,EAKgC,OALhCA,EAAA6E,EAAA5M,KAAAqB,OAAQA,MARMgG,QAAE,EAAAU,EACV8E,YASN,EAAA9E,EAAK8E,OAAS,CAAO,EACrB9E,EAAKV,GAAKE,IAENnH,GAAO2H,EAAK+E,SAAS1M,IAC3B,CAfA6H,EAAA0E,EAAAC,GAeC,IAAA1E,EAAAyE,EAAApI,iBAAA2D,EAQD6E,QAAA,WAAWC,IAAAA,EACT,GAAApJ,MAAA5D,KAAAH,WAAIwB,KAAK4L,mCACP5L,KAAK4L,cAALjB,MAAA3K,KAAsB2L,GAGxB3L,KAAKyK,KAALE,MAAA3K,KAAU,CAAA,wBAAoB2L,IAC9B,MAAe3L,KAAK6L,eAAL7L,KAAiB2L,GAEhC,OADA3L,KAAKyK,WAALzK,KAAI,CAAM,gBAAc8L,OAAKH,KAE/B,EAAC9E,EAED4E,SAAA,SAAS1M,GACP,IAAkBgN,EAAAC,EAAA,CAAA,EACbhM,KAAKwL,OACLzM,GAQL,OALK6L,GAAUmB,EAAc/L,KAAKwL,UAChCxL,KAAKwL,OAASO,EACd/L,KAAKyK,KAAK,eAAgBzK,WAI9B,EAACmG,EAAAmF,EAAA,CAAA,CAAAtM,IAAA,QAAAwI,IAED,WACE,OAAWxH,KAACwL,MACd,OAlDA,CAAQxB,IEdJiC,gBAQJJ,SAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,YAAAA,IAAAA,QAAAA,EAAAA,EAAAA,GAAAA,EAAAA,UAAAA,SAAA,SAASjH,GACP,OAAI5E,KAAKjB,MAAMkK,QACNiD,GACLnD,OAAO/I,KAAKjB,MAAMkK,SAASN,OAC3B3I,KAAKjB,MAAMmK,QACXlJ,KAAKjB,MAAMoK,oBACXvE,EACA5E,KAAKjB,MAAMsK,UAKjBzE,CAAA,uBAhBA,WACE,OAAOqF,GAAckC,MACvB,OAEAN,CAR+BP,aCdRc,KACvB,MAAe,SAEf,MAAA,GAAUC,EAAS,GAAA9J,MAAA5D,KAAAH,WAAK8N,OACtB,SAACC,EAAcC,GAAW,SAAgBA,IAAAA,CAAG,EAC7C,GAEJ,CAEgB,cAGd,MAAO,GAAAjK,MAAA5D,KAAAH,WACJ8I,IAAI,SAAClG,GAAC,SAAUA,EAAEsE,WAAa,EAAE,GACjC4D,OAAO,SAAClI,UAAOA,CAAA,GACfkL,OAAO,SAACF,EAAWG,UAAYH,GAAa,IAAE,IAAIG,CAAI,EAAI,IAC1D5D,MACL,CCfsB,ICJe9K,GAAEE,GAAEJ,GAAEC,GDarC6O,gBAQJZ,SAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,YAAAA,IAAAA,CARqCP,OAQrCO,EAAAA,EAAAA,GAAAA,EAAAA,UAAAA,SAAA,SAASa,GACP,IAAK1M,KAAKjB,MAAMkK,QAAS,OAAcyD,EAEvC,IAAaC,EAAG,CAAE,EAUlB,OARI3M,KAAKjB,MAAM6N,MACbD,EAAa,IAAI3M,KAAKjB,MAAM6N,IAAIF,EAAQE,IAAK5M,KAAKjB,MAAMkK,UAGtDjJ,KAAKjB,MAAM8N,OACbF,EAAc,KAAI3M,KAAKjB,MAAM8N,KAAKH,EAAQG,KAAM7M,KAAKjB,MAAMkK,UAG7D+C,EAAA,GACKU,EACAC,EAEP,EArBAxG,EAAAsG,EAAA,CAAA,CAAAzN,IAAA,OAAAwI,IAAA,WACE,OAAoByC,GAAC6C,YACvB,KANqCxB,CAAAA,CAQrCO,CARqCP,ICbMxN,GAAE,EAAEE,GAAE,GAAGE,GAAE,GAAGD,GAAER,EAAE2B,IAAIhB,GAAEX,EAAEgD,IAAI5B,GAAEpB,EAAE2G,OAAO1G,GAAED,EAAE8B,IAAIiC,GAAE/D,EAAE2H,QAAQ,SAASrF,GAAElC,EAAEF,GAAGF,EAAE+B,KAAK/B,EAAE+B,IAAIzB,GAAEF,EAAEC,IAAGH,GAAGG,GAAE,EAAE,IAAIF,EAAEG,GAAEgP,MAAMhP,GAAEgP,IAAI,CAAC5N,GAAG,GAAGK,IAAI,KAAK,OAAO3B,GAAGD,EAAEuB,GAAGV,QAAQb,EAAEuB,GAAGoB,KAAK,CAACyM,IAAI9O,KAAIN,EAAEuB,GAAGtB,EAAE,CAAC,SAASiC,GAAErC,GAAG,OAAOK,GAAE,EAAS,SAAWL,EAAEE,EAAEC,GAAG,IAAIE,EAAEiC,GAAElC,KAAI,GAAG,GAAGC,EAAED,EAAEJ,GAAGK,EAAEyB,MAAMzB,EAAEqB,GAAG,CAAQ8N,QAAE,EAAOtP,GAAG,SAASF,GAAG,IAAII,EAAEC,EAAEoP,IAAIpP,EAAEoP,IAAI,GAAGpP,EAAEqB,GAAG,GAAGpB,EAAED,EAAED,EAAEA,EAAEJ,GAAGI,IAAIE,IAAID,EAAEoP,IAAI,CAACnP,EAAED,EAAEqB,GAAG,IAAIrB,EAAEyB,IAAIqG,SAAS,CAAA,GAAI,GAAG9H,EAAEyB,IAAIxB,IAAGA,GAAEJ,GAAG,CAACI,GAAEJ,GAAE,EAAG,IAAIK,EAAED,GAAE8F,sBAAsB9F,GAAE8F,sBAAsB,SAASpG,EAAEI,EAAEE,GAAG,IAAID,EAAEyB,IAAIwN,IAAI,OAAM,EAAG,IAAIpP,EAAEG,EAAEyB,IAAIwN,IAAI5N,GAAGmK,OAAO,SAAS7L,GAAG,OAAOA,EAAE8B,GAAG,GAAG,GAAG5B,EAAE6K,MAAM,SAAS/K,GAAG,OAAOA,EAAEyP,GAAG,GAAG,OAAOlP,GAAGA,EAAEW,KAAKqB,KAAKvC,EAAEI,EAAEE,GAAG,IAAIH,GAAE,EAAG,OAAOD,EAAEmG,QAAQ,SAASrG,GAAG,GAAGA,EAAEyP,IAAI,CAAC,IAAIrP,EAAEJ,EAAE0B,GAAG,GAAG1B,EAAE0B,GAAG1B,EAAEyP,IAAIzP,EAAEyP,SAAI,EAAOrP,IAAIJ,EAAE0B,GAAG,KAAKvB,GAAE,EAAG,CAAC,MAAMA,GAAGE,EAAEyB,IAAIR,QAAQtB,MAAMO,GAAGA,EAAEW,KAAKqB,KAAKvC,EAAEI,EAAEE,GAAG,CAAC,CAAC,OAAOD,EAAEoP,KAAKpP,EAAEqB,EAAE,CAAnlBS,CAAEqN,GAAExP,EAAE,CAA8kB,SAASc,GAAEZ,EAAEC,GAAG,IAAIE,EAAEiC,GAAElC,KAAI,IAAIJ,EAAE+F,KAAKtC,GAAEpD,EAAEiP,IAAInP,KAAKE,EAAEqB,GAAGxB,EAAEG,EAAEF,EAAEA,EAAEG,GAAEgP,IAAIvN,IAAIe,KAAKzC,GAAG,CAAiF,SAASoC,GAAEzC,GAAG,OAAOK,GAAE,EAAEqP,GAAE,WAAW,MAAM,CAACtN,QAAQpC,EAAE,EAAE,GAAG,CAAsL,SAAS0P,GAAE1P,EAAEM,GAAG,IAAIJ,EAAEoC,GAAElC,KAAI,GAAG,OAAOqD,GAAEvD,EAAEoP,IAAIhP,IAAIJ,EAAEqP,IAAIvP,IAAIE,EAAEC,EAAEG,EAAEJ,EAAE6B,IAAI/B,EAAEE,EAAEqP,KAAKrP,EAAEwB,EAAE,CAAqiB,SAASmB,KAAI,IAAI,IAAIzC,EAAEA,EAAEG,GAAEoP,SAAS,GAAGvP,EAAEiD,KAAKjD,EAAEkP,IAAI,IAAIlP,EAAEkP,IAAIvN,IAAIsE,QAAQ1D,IAAGvC,EAAEkP,IAAIvN,IAAIsE,QAAQ3C,IAAGtD,EAAEkP,IAAIvN,IAAI,EAAuC,CAApC,MAAMzB,GAAGF,EAAEkP,IAAIvN,IAAI,GAAG/B,EAAE4B,IAAItB,EAAEF,EAAE6B,IAAI,CAAC,CAACjC,EAAE2B,IAAI,SAAS3B,GAAGM,GAAE,KAAKE,IAAGA,GAAER,EAAE,EAAEA,EAAEgD,IAAI,SAAShD,GAAGW,IAAGA,GAAEX,GAAGI,GAAE,EAAE,IAAID,GAAGG,GAAEN,EAAE8B,KAAKwN,IAAInP,IAAID,KAAII,IAAGH,EAAE4B,IAAI,GAAGzB,GAAEyB,IAAI,GAAG5B,EAAEuB,GAAG2E,QAAQ,SAASrG,GAAGA,EAAEyP,MAAMzP,EAAE0B,GAAG1B,EAAEyP,KAAKzP,EAAEuP,IAAI9O,GAAET,EAAEyP,IAAIzP,EAAEG,OAAE,CAAM,KAAKA,EAAE4B,IAAIsE,QAAQ1D,IAAGxC,EAAE4B,IAAIsE,QAAQ3C,IAAGvD,EAAE4B,IAAI,KAAK7B,GAAEI,EAAC,EAAEN,EAAE2G,OAAO,SAASvG,GAAGgB,IAAGA,GAAEhB,GAAG,IAAIC,EAAED,EAAE0B,IAAIzB,GAAGA,EAAEiP,MAAMjP,EAAEiP,IAAIvN,IAAIf,SAAS,IAAIT,GAAEuC,KAAKzC,IAAIF,KAAIH,EAAE4P,yBAAyBzP,GAAEH,EAAE4P,wBAAwBtM,IAAGT,KAAIxC,EAAEiP,IAAI5N,GAAG2E,QAAQ,SAASrG,GAAGA,EAAEG,IAAIH,EAAEsP,IAAItP,EAAEG,GAAGH,EAAEuP,MAAM9O,KAAIT,EAAE0B,GAAG1B,EAAEuP,KAAKvP,EAAEG,OAAE,EAAOH,EAAEuP,IAAI9O,EAAC,IAAIP,GAAEI,GAAE,IAAI,EAAEN,EAAE8B,IAAI,SAAS1B,EAAEE,GAAGA,EAAE8C,KAAK,SAAShD,GAAG,IAAIA,EAAE2B,IAAIsE,QAAQ1D,IAAGvC,EAAE2B,IAAI3B,EAAE2B,IAAI8J,OAAO,SAAS7L,GAAG,OAAOA,EAAE0B,IAAIgC,GAAE1D,EAAE,EAAsE,CAAnE,MAAME,GAAGI,EAAE8C,KAAK,SAASpD,GAAGA,EAAE+B,MAAM/B,EAAE+B,IAAI,GAAG,GAAGzB,EAAE,GAAGN,EAAE4B,IAAI1B,EAAEE,EAAE6B,IAAI,CAAC,GAAGhC,IAAGA,GAAEG,EAAEE,EAAE,EAAEN,EAAE2H,QAAQ,SAASvH,GAAG2D,IAAGA,GAAE3D,GAAG,IAAIE,EAAEJ,EAAEE,EAAE0B,IAAI5B,GAAGA,EAAEoP,MAAMpP,EAAEoP,IAAI5N,GAAG2E,QAAQ,SAASrG,GAAG,IAAI2C,GAAE3C,EAAe,CAAZ,MAAMA,GAAGM,EAAEN,CAAC,CAAC,GAAGE,EAAEoP,SAAI,EAAOhP,GAAGN,EAAE4B,IAAItB,EAAEJ,EAAE+B,KAAK,EAAE,IAAIc,GAAE,mBAAmB6M,sBAAsB,SAAStM,GAAEtD,GAAG,IAAII,EAAEE,EAAE,WAAWuP,aAAa3P,GAAG6C,IAAG+M,qBAAqB1P,GAAG8C,WAAWlD,EAAE,EAAEE,EAAEgD,WAAW5C,EAAE,KAAKyC,KAAI3C,EAAEwP,sBAAsBtP,GAAG,CAAC,SAASqC,GAAE3C,GAAG,IAAII,EAAEE,GAAEJ,EAAEF,EAAE8B,IAAI,mBAAmB5B,IAAIF,EAAE8B,SAAI,EAAO5B,KAAKI,GAAEF,CAAC,CAAC,SAASsD,GAAE1D,GAAG,IAAII,EAAEE,GAAEN,EAAE8B,IAAI9B,EAAE0B,KAAKpB,GAAEF,CAAC,CAAC,SAASqD,GAAEzD,EAAEI,GAAG,OAAOJ,GAAGA,EAAEgB,SAASZ,EAAEY,QAAQZ,EAAEgD,KAAK,SAAShD,EAAEE,GAAG,OAAOF,IAAIJ,EAAEM,EAAE,EAAE,CAAC,SAASkP,GAAExP,EAAEI,GAAG,MAAM,mBAAmBA,EAAEA,EAAEJ,GAAGI,CAAC,eCI5uG,ODJu3C,SAAWJ,GAAG,IAAIE,EAAEI,GAAEkC,QAAQxC,EAAE8B,KAAK3B,EAAEmC,GAAElC,KAAI,GAAG,OAAOD,EAAEM,EAAET,EAAEE,GAAG,MAAMC,EAAEuB,KAAKvB,EAAEuB,IAAG,EAAGxB,EAAE0F,IAAItF,KAAIJ,EAAEoB,MAAMiE,OAAOvF,EAAE0B,EAAE,CCIx9CqO,CAACC,GACpB,CCLA,IAAeC,GAAA,CACbxB,OAAQ,CACNyB,YAAa,qBAEf/M,KAAM,CACJgN,QAAS,wBACTC,SAAU,0BAEZC,WAAY,CACVC,SAAU,WACVC,KAAM,OACNC,SAAU,SAACC,EAAMC,GAAkBD,MAAAA,QAAAA,EAAWC,OAAAA,CAAK,EACnDD,KAAM,SAACA,GAAiBA,MAAAA,QAAAA,CAAI,EAC5BE,QAAS,UACTC,GAAI,KACJC,GAAI,KACJC,QAAS,WAEXC,QAAS,aACTC,eAAgB,4BAChBC,MAAO,6CCdIC,2BAIX,SAAYC,EAAAA,GAAmB5O,KAHd6O,eAAS,EAAA7O,KACT8O,sBAGf,EAAA9O,KAAK6O,UAAYD,EACjB5O,KAAK8O,iBAAmBpB,EAC1B,CAAC,kBA6CA,SApCDqB,UAAA,SAAUC,EAAiBC,GACzB,IAAKA,IAASD,EAAS,OAAW,KAElC,IAAME,EAAWF,EAAQ1G,MAAM,KACzBtJ,EAAMkQ,EAAS,GAErB,GAAID,EAAKjQ,GAAM,CACb,IAASmQ,EAAGF,EAAKjQ,GAEjB,MAAmB,iBAALmQ,EACL,WAAA,OAAiBA,CAAA,EACA,mBAARA,EAEjBA,EACYnP,KAAC+O,UAAUG,EAAS3M,MAAM,GAAG6M,KAAK,KAAMD,EAEtD,CAED,OAAO,IACT,EAACtI,EAEDwI,UAAA,SAAUL,GACR,IACiBM,EADDC,EAAGvP,KAAK+O,UAAUC,EAAShP,KAAK6O,WAShD,OALES,EADEC,GAGcvP,KAAK+O,UAAUC,EAAShP,KAAK8O,qBAK9CnE,WAAA,EAAA,GAAApI,MAAA5D,KAAAH,UAAA,IAEMwQ,CACT,EAACL,CAAA,IAGaa,SAAAA,KACd,IAAMC,EAASC,KAEf,OAAiBV,SAAAA,GACf,IAAAW,EAAA,OAAOF,EAAAA,EAAOG,YAAWP,UAAS1E,MAAAgF,EAAA,CAACX,GAAOlD,OAAA,GAAAvJ,MAAA5D,KAAAH,UAAA,IAC5C,CACF,CCnEO,OAAsB,SAACqR,GAAY,OAAA,SAACvM,GACzC,OACKA,EAAAA,CAAAA,EAAAA,EACH4I,CAAAA,OAAQ,CACNjD,QAAS4G,IAGf,CAAC,gBCHC,OADeH,KACDI,KAChB,CCFwBC,SAAAA,GAAe1G,GACrC,IAAMyG,EAAQE,KACdC,EAA8BC,GAAS7G,EAASyG,EAAMK,aAA/CtQ,OAASuQ,EAAUH,EAAA,GAc1B,OAZAI,GAAU,WASR,OARoBP,EAAMQ,UAAU,WAClC,IAAaC,EAAGlH,EAASyG,EAAMK,YAE3BtQ,IAAY0Q,GACdH,EAAWG,EAEf,EAGF,EAAG,IAGL1Q,CAAA,CCIgB2Q,SAAAA,KACd,IAAAC,EAAAR,EAAkCC,QAEhCQ,GAFKC,EAAWC,EAAAA,GAAAA,EAGlBX,EAAA,KAAeP,OACDD,EAAOvD,SACXsD,KACFqB,EAAab,KAAba,WACMd,GAAY,SAACzM,UAAeA,EAAC4I,MAAM,GAEjDmE,GAAU,WACHM,GAELA,EAAUlF,SAAS,CACjBxC,cAAS3F,SAAAA,EAAO2F,SAEpB,EAAG,CAAC3F,EAAOqN,IAEXN,GAAU,WAENO,EADE7R,EAAM+R,OAEN,IAA4BrE,GAAC,CAC3BxD,QAASlK,EAAMkK,QACf2D,IAAK7N,EAAM+R,OAAOlE,IAClBC,KAAM9N,EAAM+R,OAAOjE,OAKrB,IAAIZ,GAAmB,CACrBhD,QAASlK,EAAMkK,QACfC,QAASuG,EAAOsB,QAAUtB,EAAOsB,OAAO7H,QACxCC,oBACEpK,EAAMoK,0BACwBuH,IAA9B3R,EAAMoK,oBACRE,SAAUtK,EAAMsK,YAMlBtK,EAAMkK,SAAS4H,EAASG,GAAsBjS,EAAMkK,SAC1D,EAAG,CAAClK,IAEJsR,GAAU,WACR,GAAKM,EAIL,OAFAlB,EAAOwB,SAASC,SAAyBP,GAE5BlB,WAAAA,OAAAA,EAAOwB,SAASE,WAA2BR,EAAU,CACpE,EAAG,CAAClB,EAAQkB,IAEZ,IC3EAS,EACAC,EAEWC,EDwEWC,EP5E4yC,SAAW9T,EAAEI,GAAG,OAAOC,GAAE,EAAEqP,GAAE,WAAW,OAAO1P,CAAC,EAAEI,EAAE,CO4E71C2T,EC3EzBJ,ED6EI,SAACtO,GACKA,EAAM2O,kBAAkBC,kBAC1Bb,EAASG,GAAsBlO,EAAM2O,OAAOzO,OAEhD,EChFJqO,EDiFIV,aAAqBlE,GACjB1N,EAAM4S,iBAAmB,IACzB,EC9EN,WAAA,IAAAjH,EAAAlM,UAAA,OAAA,YAAY,SAACoT,GACPN,GACFhE,aAAagE,GAGfA,EAAU3Q,WAAW,WAAA,SAAcyQ,iCAAc,EAAEC,EACrD,EAAE,GD0EF,CAACtS,EAAO4R,IAGV,OACOpS,EAAA,MAAA,CAAA6N,UAAWA,GAAUyF,GAAU,SAAU,OAAFpB,EAAEhB,EAAOrD,gBAAP,EAAAqE,EAAkBvE,UAC9D3N,EAAA,QAAA,CACEO,KAAK,SACL6O,YAAazN,EAAE,sBACf,aAAYA,EAAE,sBACd4R,QAASP,EACTnF,UAAWyF,GAAUzF,GAAU,SAAUA,GAAU,SAAU,UAC7DpJ,OAAOM,MAAAA,OAAAA,EAAAA,EAAO2F,UAAW,KAIjC,CEjGsB,IAOhB8I,gBACMnG,SAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,YAAAA,IAAAA,CAAAA,EAAAA,EAAAA,GAAAA,IAAAA,EAAAA,EAAAA,UADkBN,OAClBM,EAAAA,cAAA,WACR,GAAIoG,MAAMC,OAAOjS,KAAKjB,MAAMmT,SAAWF,MAAMC,OAAOjS,KAAKjB,MAAMmP,OAC7D,MAAMiE,MAAM,4BAEhB,EAACtL,EAMSgF,SAAA,SAASjH,GACjB,IAAMsJ,EAAOlO,KAAKjB,MAAMmP,KAIxB,OAAO,IAAWxG,EAAC9C,EAAK+C,KAAKpF,MAHf2L,EAAOlO,KAAKjB,MAAMmT,OACnBhE,EAAO,GAAKlO,KAAKjB,MAAMmT,OAGtC,EAVA/L,EAAA4L,EAAA,CAAA,CAAA/S,IAAA,OAAAwI,IAAA,WACE,OAAoByC,GAACmI,KACvB,KAT4B9G,CAAAA,CAClBM,CADkBN,ICExB+G,gBAQJxG,SAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,YAAAA,IAAAA,CARkCP,OAQlCO,EAAAA,EAAAA,GAAAA,EAAAA,UAAAA,SAAA,SAASa,GACP,IAAMC,EAAU,CAAA,EAkBhB,OAhBI3M,KAAKjB,MAAM6N,MACbD,EAAa,IAAI3M,KAAKjB,MAAM6N,IAC1BF,EAAQE,IACR5M,KAAKjB,MAAMmP,KACXlO,KAAKjB,MAAMmT,QAIXlS,KAAKjB,MAAM8N,OACbF,EAAc,KAAI3M,KAAKjB,MAAM8N,KAC3BH,EAAQG,KACR7M,KAAKjB,MAAMmP,KACXlO,KAAKjB,MAAMmT,QAIflG,EAAA,GACKU,EACAC,EAEP,EA3BAxG,EAAAkM,EAAA,CAAA,CAAArT,IAAA,OAAAwI,IAAA,WACE,OAAoByC,GAACqI,WACvB,KANkChH,CAAAA,CAQlCO,CARkCP,aCQViH,KACxB,IAAM9C,EAASC,KAUXD,EAAAA,EAAO3B,WARTgD,EAAAA,EAAAA,OACA0B,EAAAA,EAAAA,QAAAA,OAAO,IAAAC,GAAOA,EAAAC,EAAAC,EACdC,WAAAA,OAAU,IAAAF,GAAOA,EAAAG,EAAAF,EACjBG,WAAAA,OAAU,IAAAD,GAAOA,EAAAE,EAAAJ,EACjBK,aAAAA,OAAe,IAAAD,EAAA,EACfb,EAAAA,EAAAA,EAAAA,MAAAA,OAAQ,IAAAe,EAAA,GACR/E,EAAAA,EAAAA,EAAAA,KAAAA,OAAO,IAAAgF,EAAA,QACPC,kBAAAA,OAAiB,IAAAC,GAAOA,EAGpBzC,EAAY0C,GAAgD,MAC5BnD,EAAAA,GAAShC,GAAxCoF,EAAaC,EAAAA,GAAAA,EACpBtD,EAAA,GAAAuD,EAA0BtD,GAAS,GAA5BuD,EAAOC,EAAAA,GAAAA,OACRxT,EAAIsP,KAEVa,GAAU,WAuCR,OAtCIS,GACFH,EAAU9Q,QAAU,IAAyBwS,GAAC,CAC5CH,MAAOA,EACPhE,KAAMoF,EACN1G,IAAKkE,EAAOlE,IACZC,KAAMiE,EAAOjE,OAGf4C,EAAOwB,SAASC,SAASP,EAAU9Q,WAEnC8Q,EAAU9Q,QAAU,IAAIkS,GAAgB,CACtCG,MAAOA,EACPhE,KAAMoF,IAGR7D,EAAOwB,SAASC,SAASP,EAAU9Q,UAGjC8Q,EAAU9Q,mBAAwCwS,GACpD5C,EAAOwB,SAAS5G,GAAG,eAAgB,SAACjB,GAAYsK,OAAAA,EAAStK,EAAQ3K,OAAO,GAC/DkS,EAAU9Q,mBAAkCkS,IAIrDpB,EAAU9Q,QAAQwK,GAAG,gBAAiB,SAACjB,GACrCsK,OAAAA,EAAStK,EAAQ3K,OAAO,GAI5BgR,EAAOwB,SAAS5G,GAAG,UAAWsJ,GAI9BlE,EAAOwB,SAAS5G,GAAG,QAAS,WAC1BqJ,EAAS,GACTH,EAAe,EACjB,GAEY,WACV9D,EAAOwB,SAASE,WAA2BR,EAAU9Q,SACrD4P,EAAOwB,SAAS1G,IAAI,UAAWoJ,EACjC,CACF,EAAG,IAEH,IAAcA,EAAG,SAACC,GAGZT,GAAqBS,IAAqBjD,EAAU9Q,SACtD0T,EAAe,EAEnB,EAEMpF,EAAQ,WAAH,OAAa3I,KAACqO,KAAKJ,EAAQvB,EAAM,EAEtC4B,EAAU,SAAC5F,GACf,GAAIA,GAAQC,KAAWD,EAAO,GAAKA,IAASoF,EAC1C,OAAO,KAGTC,EAAerF,GAEfyC,EAAU9Q,QAAQ4L,SAAS,CACzByC,KAAMA,GAEV,EAmHA,OACE3P,EAAA,MAAA,CACE6N,UAAWyF,GACTzF,GAAU,cACVqD,EAAOrD,UAAU0B,aA1BnBvP,EAACwV,EACEvB,KAAAA,GAAWiB,EAAQ,GAClBlV,EAAA,MAAA,CACEyV,KAAK,SACL,YAAU,SACV5H,UAAWyF,GACTzF,GAAU,WACVqD,EAAOrD,UAAU6H,mBAEnBC,MAAOhU,EAAE,sBAAuBoT,EAAc,EAAGnF,MAEhDjO,EAAE,sBAAuB,IAAIA,EAAAA,IAAAA,KAAAA,EAAKoT,IAAAA,EAAcpB,EAAQ,KAAU,IAClEhS,EAAE,iBAAkB,IACrB3B,EAAA,IAAA,KAAI2B,EAAC,GAAIsF,KAAK2O,KAAKb,EAAc,GAAKpB,EAAOuB,KAAe,IAC3DvT,EAAE,iBAAkB,IAAIA,EAAAA,IAAAA,KAAAA,EAAKuT,GAAAA,IAAc,IAC3CvT,EAAE,wBAgBT3B,SAAK6N,UAAWA,GAAU,UACvB0G,GACCvU,EACE,SAAA,CAAA6V,SAAU,EACVJ,KAAK,SACLK,SAA0B,IAAhBf,EACVgB,QAAS,WAAMR,OAAAA,EAAQR,EAAc,EAAE,EACvCY,MAAOhU,EAAE,uBACT,aAAYA,EAAE,uBACdkM,UAAWyF,GACTpC,EAAOrD,UAAUmI,iBACjB9E,EAAOrD,UAAUoI,uBAGlBtU,EAAE,wBAxIO,WAClB,GAAI8S,GAAgB,EAClB,OACD,KAGD,IAAcyB,EAAWjP,KAAK2O,IAAIhG,IAAS6E,GAEvC0B,EAAYlP,KAAK2O,IAAIb,EAAa9N,KAAKmP,MAAMF,EAAW,IAK5D,OAJInB,EAAc9N,KAAKmP,MAAMF,EAAW,IAAMtG,MAC5CuG,EAAYD,GAAYtG,IAAUmF,IAIlC/U,EAACwV,EAAQ,KACN5F,IAAUsG,GAAYnB,EAAcoB,EAAY,GAC/CnW,EAACwV,EACC,KAAAxV,EAAA,SAAA,CACE6V,SAAU,EACVJ,KAAK,SACLM,QAAS,WAAA,OAAaR,EAAC,EAAE,EACzBI,MAAOhU,EAAE,wBACT,aAAYA,EAAE,wBACdkM,UAAWqD,EAAOrD,UAAUmI,kBAE3BrU,EAAE,MAEL3B,EACE,SAAA,CAAA6V,UAAW,EACXhI,UAAWyF,GACTzF,GAAU,UACVqD,EAAOrD,UAAUmI,mBAGnB,QAKLjT,MAAMsT,KAAKtT,MAAMmT,GAAUxJ,QACzB3D,IAAI,SAAC1J,GAAC,OAAgB0V,GAAI1V,EAAI8W,EAAU,GACxCpN,IAAI,SAAC1J,GAAC,OAEHW,EAAA,SAAA,CAAA6V,SAAU,EACVJ,KAAK,SACLM,QAAS,WAAMR,OAAAA,EAAQlW,EAAE,EACzBwO,UAAWyF,GACTyB,IAAgB1V,EACZiU,GACEzF,GAAU,eACVqD,EAAOrD,UAAUyI,yBAEnB,KACJpF,EAAOrD,UAAUmI,kBAEnBL,MAAOhU,EAAE,kBAAmBtC,EAAI,GAChC,aAAYsC,EAAE,kBAAmBtC,EAAI,IAEpCsC,EAAC,IAAItC,EAAI,IACH,GAGZuQ,IAAUsG,GAAYtG,IAAUmF,EAAcoB,EAAY,GACzDnW,EAACwV,EACC,KAAAxV,EAAA,SAAA,CACE6V,UAAW,EACXhI,UAAWyF,GACTzF,GAAU,UACVqD,EAAOrD,UAAUmI,mBAGnB,OAEFhW,EAAA,SAAA,CACE6V,SAAU,EACVJ,KAAK,SACLM,QAAS,WAAA,OAAaR,EAAC3F,IAAU,EAAE,EACnC+F,MAAOhU,EAAE,kBAAmBiO,KAC5B,aAAYjO,EAAE,kBAAmBiO,KACjC/B,UAAWqD,EAAOrD,UAAUmI,kBAE3BrU,EAAC,GAAIiO,OAMlB,CAqDO2G,GAEAlC,GACCrU,YACE6V,SAAU,EACVJ,KAAK,SACLK,SAAUlG,MAAYmF,EAAc,GAAiB,IAAZnF,IACzCmG,QAAS,WAAA,OAAaR,EAACR,EAAc,EAAE,EACvCY,MAAOhU,EAAE,mBACT,aAAYA,EAAE,mBACdkM,UAAWyF,GACTpC,EAAOrD,UAAUmI,iBACjB9E,EAAOrD,UAAU2I,uBAGlB7U,EAAE,qBAMf,CC5QgB8U,SAAAA,GAAMA,EAAwBC,GAC5C,MAAoB,iBAAJD,EACVA,EAAM7U,QAAQ,MAAQ,EAChB8U,EAAiB,IAAOC,SAASF,EAAO,IAEzCE,SAASF,EAAO,IAK7BA,CAAA,CAEgBG,SAAAA,GAAGH,GACjB,OAAKA,OACUL,MAAMK,GACvB,KAFqB,EAErB,CCRgBI,SAAAA,GAAYrW,GAC1B,IAAiBsW,EAAGtW,EAAMuW,SAASC,WAAU,GAO7C,OALAF,EAAYlT,MAAMqT,SAAW,WAC7BH,EAAYlT,MAAM6S,MAAQ,OAC1BK,EAAYlT,MAAMsT,OAAS,cAC3BJ,EAAYlT,MAAMuT,WAAa,SAI3BnX,EAAA,MAAA,CAAAU,IAAK,SAAC0W,GACJA,GAAeA,EAAY/T,YAAYyT,EACzC,GAGN,UCtByBO,GAACC,GACxB,IAAKA,EAAK,MAAO,GAEjB,IAAMC,EAAQD,EAAIvN,MAAM,KAGxB,OAAqB,IAAjBwN,EAAMrX,QAAgB,iBAAiBwD,KAAK4T,OAK7CvO,IAAI,SAAUyO,EAAM3O,GAEnB,OAAa,GAATA,IACU9E,gBAIF0T,OAAO,GAAGC,cAAgBF,EAAKxT,MAAM,GAAGD,aACtD,GACC8M,KAAK,GACV,KCjBY8G,GCyBZC,GAAe,iBAxBH,WAAA,SAAAC,IAAA,CAAA,IAAAvP,EAAAuP,EAAAlT,UAqBT,OArBS2D,EACFwP,OAAA,SAAOrH,EAAiBlQ,GAC9B,MAAA,cAAqBA,EAAKmX,cAAa,MAAMjH,CAC/C,EAEAN,EAAAA,MAAA,SAAMM,EAAiBsH,QAAAA,IAAAA,IAAAA,GAAiB,GACtC,MAAYtW,KAAKqW,OAAOrH,EAAS,SAEjC,GAAIsH,EACF,MAAMnE,MAAMoE,GAEZC,QAAQ9H,MAAM6H,EAElB,EAEAE,EAAAA,KAAA,SAAKzH,GACHwH,QAAQC,KAAKzW,KAAKqW,OAAOrH,EAAS,QACpC,EAEA0H,EAAAA,KAAA,SAAK1H,GACHwH,QAAQE,KAAK1W,KAAKqW,OAAOrH,EAAS,QACpC,EAACoH,CAAA,CArBS,KDDZ,SAAYF,GACVA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,KAAA,GAAA,MACD,CAJD,CAAYA,KAAAA,GAIX,KASD,IAA0BS,gBAAA,WAGxB,aAFiBC,KAAAA,eAGf5W,KAAK4W,QAAU,EACjB,CAAC,IAAA/P,EAAA8P,EAAAzT,iBAAA2D,EAEDW,IAAA,SAAiCxB,GAC/B,OAAOhG,KAAK4W,QAAQC,KAAK,SAAC/W,UAAOA,EAACkG,KAAOA,CAAE,EAC7C,EAACa,EAEDiQ,IAAA,SAAsCC,GACpC,OAAKA,EAAO/Q,GAKRhG,KAAKwH,IAAIuP,EAAO/Q,KAClBmQ,GAAIzH,MAAK,wBAAyBqI,EAAO/Q,IAClChG,OAGTA,KAAK4W,QAAQrW,KAAKwW,GAEpB/W,OAXImW,GAAIzH,MAAM,6BACH1O,KAUX,IAEAgX,OAAA,SAAOhR,GACL,IAAY+Q,EAAG/W,KAAKwH,IAAIxB,GAMxB,OAJI+Q,GACF/W,KAAK4W,QAAQK,OAAOjX,KAAK4W,QAAQzW,QAAQ4W,GAAS,GAItD/W,IAAA,IAEAkX,KAAA,SAAkC1B,GAChC,IAAIoB,EAQJ,OALEA,EADc,MAAZpB,GAAgC9E,MAAZ8E,EACZxV,KAAK4W,QAAQtN,OAAO,SAACxJ,GAAMA,OAAAA,EAAE0V,WAAaA,CAAQ,GAElDxV,KAAK4W,QAGVA,EAAQhW,KAAK,SAACxC,EAAGkC,GAAOlC,OAAAA,EAAE+Y,OAAS7W,EAAE6W,MAAQ/Y,EAAE+Y,MAAQ7W,EAAE6W,MAAQ,CAAC,EAC3E,IA9CwB,GAiDpB,SAAwBC,GAACrY,cAOvB0Q,EAASC,KAEf,GAAI3Q,EAAMsY,SAAU,CAElB,IAAYN,EAAGtH,EAAOsH,OAAOvP,IAAIzI,EAAMsY,UAEvC,OAAKN,EAEExY,EACLwV,EACA,CAAA,EACAxV,EAAEwY,EAAOO,UACPP,EAAAA,CAAAA,OAAQA,GACLhY,EAAMA,SAPW,IAUzB,CAAM,YAAuB2R,IAAnB3R,EAAMyW,SAEPjX,EACNwV,EACA,CAAE,EACFtE,EAAOsH,OAAOG,KAAKnY,EAAMyW,UAAUlO,IAAI,SAACxH,GACtC,SAASA,EAAEwX,UAAStL,EAAA,CAAI+K,OAAQjX,GAAM4G,EAAK3H,MAAMA,OACnD,IAKN,IAAA,CE5FyD,IAGnDwY,4BAGJ,SAAAA,IAAA,IAAA7Q,EAGqB,OAFnBA,EAAOD,EAAA9H,KAAAqB,OAAAA,MAHDwX,cAKN,EAAA9Q,EAAK8Q,SAAW,GAAG9Q,CACrB,QAAC,IAAAG,EAAA0Q,EAAArU,UAYA,OAZA2D,EAsBD4Q,YAAA,SACEhI,EACA6F,EACAoC,GAEA,MAA2BjI,EAAOkI,UACnBC,EAAGnI,EAAOmI,UAEzB,IAAKD,EAGH,OACD3X,KAGD,IAAMiV,EAAiB0C,EAAUE,YAE7BC,EAAS,GAETxC,EAASzV,SAAW+X,IAMtBzU,EACE5E,EAAE6W,GAAa,CACbE,SAAUA,EAASzV,UAErB6X,EAAQ7X,SAGViY,EJjDUC,SAAqBL,GAGnC,MAAuCA,EAAQM,cAC7C,SAGF,IAAKC,EACH,MAAO,CACR,EAED,IAAMC,EAAiBD,EAAa7L,UACpB+L,EAAGF,EAAa9V,MAAMC,QACtC6V,EAAa7L,UAAe8L,EAAc,IAAI9L,GAAU,eAExD6L,EAAa9V,MAAMiW,YAAc,OACjCH,EAAa9V,MAAM6S,MAAQ,OAC3BiD,EAAa9V,MAAMkW,QAAU,IAC7BJ,EAAa9V,MAAMmW,OAAS,IAC5BL,EAAa9V,MAAMoW,OAAS,OAC5BN,EAAa9V,MAAMqW,QAAU,OAE7B,MAAUlX,MAAMsT,KACdqD,EAAa5Z,WAAWoa,iBAA8B,aACtDnM,OAAO,SAACC,EAAM1M,GACdA,IAAAA,EAEA,OAFAA,EAAQsC,MAAM6S,MAAWnV,EAAQgY,YAAe,eAG7ChY,EAAQ6Y,aAAa,mBAAoB,CACxCC,SAAU9Y,EAAQgY,gBAEjBtL,EAEP,EAAG,CAAA,GAcH,OAZA0L,EAAa7L,UAAY8L,EACzBD,EAAa9V,MAAMC,QAAU+V,EAC7BF,EAAa9V,MAAMiW,YAAc,OAE3B9W,MAAMsT,KACVqD,EAAa5Z,WAAWoa,iBAA8B,aACtDnM,OAAO,SAACC,EAAM1M,GAGd,OAFA0M,EAAK1M,EAAQ6Y,aAAa,mBAA0B,MAAI7Y,EAAQgY,YAEzDtL,CACT,EAAGqM,EAGL,CICeb,CAAqBL,EAAQ7X,UAGxC,IAAA,IAAgEgZ,EAAhEC,EAAAC,EAA6BxB,EAAOyB,cAAchZ,KAAKkJ,SzBjE3CoD,OAAO,SAACC,EAAMnL,GAAC,OAASmL,EAACT,OAAO1K,EAAE,EAAE,OyBiEgByX,EAAAC,KAAAG,MAAE,CAAvDC,IAAAA,EAETL,EAAA7V,MAAIkW,EAAOhQ,SAAWgQ,EAAOhQ,QAAQzK,OAAS,KAIzCya,EAAOlE,OAAS4C,EAIfsB,EAAOlT,UAETkT,EAAOlE,MAAQG,GAAG2C,EAAOoB,EAAOlT,IAAW,OAC3CkT,EAAOP,SAAWxD,GAAG2C,EAAOoB,EAAOlT,IAAc,WAKnDkT,EAAOlE,MAAQG,GAAGH,GAAMkE,EAAOlE,MAAOC,IAEzC,CAOD,OALIK,EAASzV,SAAW+X,GAEtBzU,EAAO,KAAMuU,EAAQ7X,SAIzBG,IAAA,EAEQmZ,EAAAA,QAAA,SACNC,EACAlQ,GAIA,IAFA,MAEqBmQ,EAAAA,EAFRnQ,GAAWlJ,KAAKkJ,SAAW,mBAEb,CAAhBgQ,IAAAA,EAETI,EAAAtW,MAAIkW,EAAOhQ,SAAWgQ,EAAOhQ,QAAQzK,OAAS,EAC5Cya,EAAOtY,UAAO8P,OACWA,IAAhBwI,EAAOtY,MAAsBwY,EACtCF,EAAOtY,KAAO,CAAA,EACJsY,EAAOtY,KAGe,iBAAVsY,EAACtY,OACvBsY,EAAOtY,KAAIoL,EAAA,CAAA,EACNkN,EAAOtY,OAHZsY,EAAOtY,UAAO8P,EAOZwI,EAAOhQ,SACTlJ,KAAKmZ,QAAQC,EAAYF,EAAOhQ,QAEnC,CACH,EAACrC,EAEO0S,aAAA,SAAaC,EAAoBtQ,GAGvC,IAFA,IAEyBuQ,EAAzBC,EAAAX,EAFa7P,GAAWlJ,KAAKkJ,SAAW,MAEfuQ,EAAAC,KAAAT,MAAE,KAAVC,EAAAO,EAAAzW,WACU0N,IAArBwI,EAAOM,YACTN,EAAOM,UAAYA,GAGjBN,EAAOhQ,SACTlJ,KAAKuZ,aAAaC,EAAWN,EAAOhQ,QAEvC,CACH,IAEQyQ,MAAA,SAAMzQ,GAGZ,IAFA,IAEyB0Q,MAFZ1Q,GAAWlJ,KAAKkJ,SAAW,MAEf0Q,EAAAC,KAAAZ,MAAE,CAAhBC,IAAAA,EACTU,EAAA5W,MAAKkW,EAAOlT,IAA6B,iBAAhBkT,EAAOlU,OAE9BkU,EAAOlT,GAAK4P,GAAUsD,EAAOlU,OAG1BkU,EAAOlT,IACV8T,GAAOpL,MAGR,oGAGGwK,EAAOhQ,SACTlJ,KAAK2Z,MAAMT,EAAOhQ,QAErB,CACH,EAACrC,EAEOkT,gBAAA,SACNC,EACA9Q,GAGA,IAAA,IAA4B+Q,EAA5BC,EAAAnB,EAAqB7P,KAAO+Q,EAAAC,KAAAjB,MAAE,KAAbC,EAAAe,EAAAjX,WACO0N,IAAlBwI,EAAOnC,QACTiD,EAAclD,IACZ9Q,EAAAA,CAAAA,GAAIkT,EAAOlT,IACRkT,EAAOnC,OAAM,CAChBvB,SAAUU,GAAe1P,OAG9B,CACH,EAAC+Q,EAEM4C,YAAP,SACEjR,GAIA,IAFA,IAE8BkR,EAFlBrJ,EAAG,IAAIwG,EAEErO,EAAAA,EAAAA,KAASkR,EAAAC,KAAApB,MAAA,CAAA,IAAbC,EAAAkB,EAAApX,MACf,GAAsB,oBAAYsX,EAAepB,GAC/CnI,EAAO7H,QAAQ3I,KAAK,CAClByE,KAAMkU,SAEH,GAAsB,iBAAXA,EAAqB,CACrC,IAAiBqB,EAAGrB,EAEhBqB,EAAYrR,UACdqR,EAAYrR,QAAUqO,EAAO4C,YAAYI,EAAYrR,SAASA,SAK9B,iBAAZqR,EAACxD,aACIrG,IAArB6J,EAAY3V,OACd2V,EAAY3V,KAAO,MAKvBmM,EAAO7H,QAAQ3I,KAAK2Y,EACrB,CACF,CAED,OAAOnI,CACT,EAACwG,EAEMiD,iBAAP,SAAwB/K,GACtB,IAAYsB,EAAG,IAAIwG,EAmBnB,OAhBI9H,EAAOmF,KACT7D,EAAO7H,QAAUqO,EAAOkD,cAAchL,EAAOmF,MAAM1L,QAC1CuG,EAAOvG,QAChB6H,EAAO7H,QAAUqO,EAAO4C,YAAY1K,EAAOvG,SAASA,SAEpDuG,EAAO7K,MACmB,iBAAnB6K,EAAO7K,KAAK,IACjB6K,EAAO7K,KAAK,aAAmBtD,QAIjCyP,EAAO7H,QAAU8B,OAAOC,KAAKwE,EAAO7K,KAAK,IAAI0C,IAAI,SAACtC,GAChD,MAAO,CAAEA,KAAMA,EACjB,IAGE+L,EAAO7H,QAAQzK,QACjBsS,EAAO4I,QACP5I,EAAOoI,QAAQ1J,EAAO7O,MACtBmQ,EAAOwI,aAAa9J,EAAO+J,WAC3BzI,EAAOgJ,gBAAgBtK,EAAOsH,OAAQhG,EAAO7H,SACtC6H,GAIX,IAAA,EAEO0J,EAAAA,cAAP,SAAqB7Q,GAKnB,IAJA,IAI2B8Q,EAJrB3J,EAAS,MAIf4J,EAAA5B,EAHcnP,EAAQoO,cAAc,SAClBS,iBAAiB,SAERiC,EAAAC,KAAA1B,MAAE,CAAlB2B,IAAAA,UACT7J,EAAO7H,QAAQ3I,KAAK,CAClByE,KAAM4V,EAAG1V,UACT8P,MAAO4F,EAAG5F,OAEb,CAED,OACFjE,CAAA,EAqBOiI,EAAAA,cAAP,SAAqB9P,GACnB,IAAI2R,EAA6B,GAC3BxB,EAAOnQ,GAAW,KACV,GAEd,GAAImQ,GAAQA,EAAK5a,OAAQ,CACvBoc,EAAOta,KAAK8Y,GAEZ,IAAkBA,IAAMyB,EAANzB,EAAAA,EAAAA,KAAMyB,EAAAC,KAAA9B,MAAA,CAAA,IAAV+B,EAAAF,EAAA9X,MACRgY,EAAI9R,SAAW8R,EAAI9R,QAAQzK,SAC7Bwc,EAAUA,EAAQnP,OAAOkP,EAAI9R,SAEhC,CAEG+R,EAAQxc,SACVoc,EAASA,EAAO/O,OAAO9L,KAAKgZ,cAAciC,IAE7C,CAED,OAAOJ,CACT,EAOOK,EAAAA,YAAP,SAAmBhS,GACjB,MAAiC,GACvBmQ,EAAGnQ,GAAW,GAExB,GAAImQ,GAAQA,EAAK5a,OACf,IAAkB4a,IAAM8B,EAAN9B,EAAAA,EAAAA,KAAM8B,EAAAC,KAAAnC,MAAA,CAAA,IAAV+B,EAAAG,EAAAnY,MACPgY,EAAI9R,SAAkC,IAAvB8R,EAAI9R,QAAQzK,QAC9Boc,EAAOta,KAAKya,GAGVA,EAAI9R,UACN2R,EAASA,EAAO/O,OAAO9L,KAAKkb,YAAYF,EAAI9R,UAE/C,CAGH,QACF,EAACqO,EAMM8D,aAAP,SAAoBnC,GAClB,OAAWlZ,KAACgZ,cAAc,CAACE,IAASza,OAAS,CAC/C,EA1TA0H,EAAAoR,EAAA,CAAA,CAAAvY,IAAA,UAAAwI,IAAA,WACE,YAAYgQ,QACd,EAAC/P,IAED,SAAYyB,GACVlJ,KAAKwX,SAAWtO,CAClB,GAAC,CAAAlK,IAAA,iBAAAwI,IAED,WACE,OAAWxH,KAACwX,SAASlO,OAAO,SAACpL,UAAOA,EAAEyL,MAAM,EAC9C,KAAC4N,CAAA,EAnBkBxR,GCPCuV,GAAA,WAAA,ECFhBC,4BAGJ,SAAY3W,EAAAA,GACV,IAAA8B,EACe,OADfA,EAAA8U,EAAA7c,KAAAqB,aAHM4E,YAIN8B,EAAKe,IAAI7C,GACX8B,CAAA,QAAC,2BAEYc,IAAG,WAAA,IACS,OAAAiU,QAAA7J,QAAJ5R,KAAK4E,sBAAlBA,GAEN,MAAO,CACLA,KAAMA,EACN6O,MAAO7O,EAAKnG,OACZ,EACH,CAAA,MAAAR,GAAA,OAAAwd,QAAAC,OAAAzd,EAAA,CAAA,EAAA4I,EAEMY,IAAA,SAAI7C,GAOT,OANIA,mBACF5E,KAAK4E,KAAO,WAAaA,OAAAA,CAAI,EACpBA,wBACT5E,KAAK4E,KAAOA,GAIhB5E,IAAA,KAzB0Bsb,ICgBRK,gBAAA,SAAAH,GAGlB,WAAY9O,SAEa,OADvBhG,EAAO8U,EAAA7c,KAAAqB,OAAAA,MAHQ0M,aAAO,EAItBhG,EAAKgG,QAAUA,EAAQhG,CACzB,CANkBE,EAAA+U,EAAAH,GAMjB,IAEOI,EAAAA,EAAAA,iBAAAA,EAAAA,QAAA,SAAQC,GACd,MAAmC,mBAApB7b,KAAC0M,QAAQoP,OACf9b,KAAK0M,QAAQoP,OAAOD,GAGzBA,EAASE,KACKC,QAEhB7F,GAAIzH,MACuBmN,yBAAAA,EAASI,OAAM,MAAMJ,EAASK,YACvD,GAEK,KAEX,EAACrV,EAEMW,IAAA,SAAIkF,GAGT,IAAUyP,EAAAnQ,EAAA,CAAA,EACLhM,KAAK0M,QACLA,GAOL,MAAyB,qBAAT9H,KACPuX,EAAKvX,KAAKuX,GAGPC,MAACD,EAAKvP,IAAKuP,GACpBE,KAAKrc,KAAK4b,QAAQU,KAAKtc,OACvBqc,KAAK,SAACE,GACL,MAAO,CACL3X,KAAMuX,EAAKE,KAAKE,GAChB9I,MAA6B,qBAAVA,MAAuB0I,EAAK1I,MAAM8I,QAAO7L,EAEhE,EACJ,IAhDkB,CAAQ4K,ICZVkB,gBAAA,WAAA,SAAAA,IAAA,CAiElB,OAjEkBA,EAMFhC,iBAAP,SAAwB/K,GAC7B,IAAWgN,EAAG,KAoBd,OAlBIhN,EAAO7K,OACT6X,EAAU,IAAiBlB,GAAC9L,EAAO7K,OAGjC6K,EAAOmF,OACT6H,EAAU,IAAIlB,GAAcvb,KAAK0c,oBAAoBjN,EAAOmF,OAE5DnF,EAAOmF,KAAKzS,MAAMwa,QAAU,QAG1BlN,EAAOqB,SACT2L,EAAU,IAAiBd,GAAClM,EAAOqB,SAGhC2L,GACHtG,GAAIzH,MAAM,wCAAwC,GAG7C+N,CACT,EAACD,EASME,oBAAP,SAA2B9S,GAKzB,IAJA,IAI+BiP,EjC9CZvS,EiC0CVsW,EAAG,GAIZ9D,EAAAC,EAHcnP,EAAQoO,cAAc,SACjBS,iBAAiB,SAELI,EAAAC,KAAAG,MAAA,CAI7B,IAJ6B,IAIHK,EAFXuD,EAAG,GAEC5V,EAAAA,EAJP4R,EAAA7V,MACqByV,iBAAiB,SAGxBa,EAAAwD,KAAA7D,MAAA,CAAA,IAAX9R,EAAAmS,EAAAtW,MAGgB,IAA3BmE,EAAKtC,WAAWpG,QAChB0I,EAAKtC,WAAW,GAAGP,WAAayY,KAAKC,UAErCH,EAAUtc,MjCxDG+F,EiCwDSa,EAAKjC,WjCvDrB,IAAa+X,WAAGC,gBAAgB5W,EAAS,aAC1C6W,gBAAgBC,ciCwDrBP,EAAUtc,KAAKgG,EAAKY,EAAKjC,WAE5B,CAED0X,EAAIrc,KAAKsc,EACV,CAED,OACFD,CAAA,EAGFJ,CAAA,CAjEkB,2GC2Gf,YAAAa,EAAA/Z,EAAAN,GAOD,IAAAqa,EAAAlf,EAAU,CACR,GAAA6E,gBAAc,OAAS7E,EAWtB,YADC6E,EAAAlF,EAAAwf,GAAUhB,UAAWe,EAAA/Z,IATf,EAARA,MAA6DN,EAAA7E,GAI7D6E,EAAIA,EAAQnE,EAmBZ,GAAAmE,GAAYA,EAAAqZ,mBAERA,QAAWC,KAAA,KAAAe,EAAA/Z,GAAAga,GAAAhB,KAAA,KAAAe,EAAA,UAIdA,EAAAxe,EAAAmE,EAED,QAAiBlF,EACfyf,GACDA,EAAAF,EACC,CAEE,CAAA,IA7JQG,gBAAc,WAC9B,aAAS,CA0GJ,OAvECA,EAAAta,eAAmD,SAAAua,EAAAC,GAEtC,IAAA7C,EAGT,IAA4D2C,EAE9Bla,EAAItD,KAAsB7B,KAI/BmF,EAAA,CAEjC,IAAAqa,EAAyD,EAAAra,EAAAma,EAAAC,EACvD,GAAAC,EAAQ,CAER,IACEL,GAAAzC,EAAM,EAAA8C,EAAe3d,KAAGnB,GAO5B,CANG,MAAAZ,GACFqf,GAAAzC,EAAA,EAAA5c,EAKD,CACE,OACA4c,CAAA,CACF,OAQA7a,YAKIA,KAAAlC,EAAA,SAAW4I,GACZ,IAED,MAAaA,EAAK7H,EACV,EAAN6H,EAAAvI,EACDmf,GAAAzC,EAAA,EAAA4C,EAAAA,EAAAza,GAAAA,GAEG0a,KACI7C,EAAA,EAAM6C,EAAgB1a,IAI9Bsa,GAAAzC,EAAa,EAAA7X,GAGb,MAAI/E,GAEJqf,GAAAzC,OAQF,EAIMA,IAEF,CA3GwB,GA8JjB,SAAA+C,GAAAC,GAEL,OAAAA,iBAAwC,EAAlBA,EAAQ1f,sBA/GpC,SAAAoN,GAAA,SAAAuS,EAAYC,GAA6C,IAAArX,EAKtD,OAJDA,gBAAQ1G,MAZOge,OAGb,QAEIC,EAAAA,MAA8B,IAA0BC,IAAAxX,EAIxDyX,2BAA6B,EAK/BJ,GACFA,EAAMja,QAAQ,SAACsa,GAAI,SAAUlN,SAASkN,EAAK,GAC5C1X,CACH,CANAE,EAAAkX,EAAAvS,GAMC,IAAA1E,EAAAiX,EAAA5a,UAiIA,OAjIA2D,EAKDwX,WAAA,WACEre,KAAKie,MAAQ,IAAyBC,IACtCle,KAAKme,2BAA6B,CACpC,EAACtX,EAQDqK,SAAA,SACEP,EACA2N,GAEA,QAFA,IAAAA,IAAAA,EAAmB,OAEd3N,EACH,YAAY,4BAGd,GAAuB,OAAnBA,EAAU7R,KACZ,MAAWqT,MAAC,iCAGd,GAAInS,KAAKue,uBAAuB5N,EAAU3K,KAAO,EAC/C,MAAWmM,MAAA,gBAAiBxB,EAAU3K,GACvC,uBAQD,OALA2K,EAAUtG,GAAG,eAAgBrK,KAAKwe,sBAAsBlC,KAAKtc,OAE7DA,KAAKye,uBAAuB9N,EAAW2N,GACvCte,KAAK0e,gBAAgB/N,GAEdA,CACT,EAAC9J,EAOD8X,YAAA,SACEhO,EACA2N,QAAAA,IAAAA,IAAAA,EAAmB,MAEnB,IACE,OAAWte,KAACkR,SAASP,EAAW2N,GAChC,MAAOpe,IAKX,EAAC2G,EAODsK,WAAA,SAAiBR,GACf,GAAKA,IAC8C,IAA/C3Q,KAAKue,uBAAuB5N,EAAU3K,IAA1C,CAEA,IAAM4Y,EAAW5e,KAAKge,OAAOxW,IAAImJ,EAAU7R,MAEvC8f,GAAYA,EAASngB,SACvBuB,KAAKge,OAAOvW,IACVkJ,EAAU7R,KACV8f,EAAStV,OAAO,SAACuV,GAAI,OAASA,GAAIlO,CAAS,IAE7C3Q,KAAKyK,KAAK,UAAWkG,GAPvB,CASF,EAAC9J,EAQO4X,uBAAA,SACN9N,EACA2N,GAEA,IAAYM,EAAG5e,KAAKge,OAAOxW,IAAImJ,EAAU7R,MAEzC,IAAK8f,EAAU,CACb,IAAME,EAAa,GACnB9e,KAAKge,OAAOvW,IAAIkJ,EAAU7R,KAAMggB,GAChCF,EAAWE,CACZ,CAED,GAAiB,OAAbR,GAAqBA,EAAW,EAClCM,EAASre,KAAKoQ,QAEd,GAAKiO,EAASN,GAGP,CAEL,MAAcM,EAASrc,MAAM,EAAG+b,EAAW,GAC/BS,EAAGH,EAASrc,MAAM+b,EAAW,GAEzCte,KAAKge,OAAOvW,IAAIkJ,EAAU7R,KAAMkgB,EAAMlT,OAAO6E,GAAW7E,OAAOiT,GAChE,MAPCH,EAASN,GAAY3N,CAS3B,EAAC9J,EA0BDoY,eAAA,SAAengB,GACb,OAAWkB,KAAC+d,MAAMzU,OAAO,SAACoC,GAAO,SAAa5M,OAASA,CAAI,EAC7D,EAKQogB,EAAAA,wBAAA,WACN,cAAcjU,KAAKhB,IAChBX,OAAO,SAACtK,GAAQ,OAACgT,MAAMC,OAAOjT,GAAK,GACnCsI,IAAI,SAACtI,UAAciT,OAACjT,EAAI,EAC7B,EAQM0M,EAAAA,QAAQ9G,SAAAA,GAAQ,IAAA,IAAAua,EAAA,SAAAC,GAqCpB,OALAC,EAAKlB,0BAA4BJ,EAAMtf,OAGvC4gB,EAAK5U,KAAK,eAAgB8B,IAEd,EApCsB8S,EAAArf,KAA5Bme,EAA4BkB,EAAKlB,0BAC5BJ,EAAGsB,EAAKtB,MAEXxR,EAAG3H,EAAK0a,4hBAkCjB,SAAAC,EAAA1S,EAAA2S,GAOO,IAAAnC,EAAA3B,KAAA,SACN,kBAQM,OAAA9d,EAAA2hB,EAAA9gB,QAKN,MAFMoO,EAAAjP,KAE4Bid,EAAAwB,KAAA,CAChC,IAAAuB,GAAK/C,GAKP,YADMA,EAAAwB,KAAAoD,EAAsB/D,IAASA,EAAA4B,GAAAhB,KAAA,KAAAe,EAAA,IAAAG,GAAA,KAHpC3C,EAAAA,EAAAhc,CAMD,CAGMwe,EACNC,GAAID,EAAC,EAAAxC,GAELwC,EAAAxC,EAEH,MAAA5c,GAEDqf,GAAAD,MAAwB,QAAA,EAAApf,0CAtEM8f,EAAK,SAAlBpN,GACT,IAAoB+O,EAAGL,EAAKd,uBAAuB5N,EAAU3K,IAEzD0Z,EAAAA,WAAAA,GAAAA,GAAkBvB,EAAyB,OAAA1C,QAAA7J,QAK/BjB,EAAUjF,QAAQa,IAAK8P,KAAA,SAAAsD,GACrCN,EAAKpB,MAAMxW,IAAIkJ,EAAU3K,GADzBuG,EAA2CoT,EACR,GAGnCpT,EAAO8S,EAAKpB,MAAMzW,IAAImJ,EAAU3K,IAT9B0Z,2CAWL,4DAjBaE,CAAA,EAkBP3hB,SAAAA,GAMP,MALAkY,GAAIzH,MAAMzQ,GAEVohB,EAAK5U,KAAK,QAAS8B,GAIpBtO,CAAA,kDASF,CAAA,MAAAA,GAAA,OAAAwd,QAAAC,OAAAzd,EAAA,CAAA,EAAA4I,EAOO0X,uBAAA,SAAuBsB,GAC7B,YAAY9B,MAAM+B,UAAU,SAAChgB,GAAC,SAAOkG,IAAM6Z,CAAW,EACxD,EAOQE,EAAAA,sBAAA,SACNpP,GAEA,IAAM+O,EAAiB1f,KAAKue,uBAAuB5N,EAAU3K,IAEzDhG,KAAKme,0BAA4BuB,IACnC1f,KAAKme,0BAA4BuB,EAErC,EAAC7Y,EAEO2X,sBAAA,SAAsB7N,GAC5B3Q,KAAK+f,sBAAsBpP,GAC3B3Q,KAAKyK,KAAK,gBACVzK,KAAKyK,KAAK,UAAWkG,EACvB,IAEQ+N,gBAAA,SAAgB/N,GACtB3Q,KAAK+f,sBAAsBpP,GAC3B3Q,KAAKyK,KAAK,iBACVzK,KAAKyK,KAAK,UAAWkG,EACvB,EAlHAxK,EAAA2X,EAAA,CAAA,CAAA9e,IAAA,QAAAwI,IAAA,WAGE,IAFA,IAEiDqR,EAF7CkF,EAA+C,OAEhC/d,KAAKkf,6BAAyBrG,EAAAC,KAAAG,MAAE,CAAxCna,MACQkB,KAAKge,OAAOxW,IAA7BqR,EAAA7V,OAEI4b,GAAYA,EAASngB,SACvBsf,EAAQA,EAAMjS,OAAO8S,GAExB,CAGD,OAAYb,EAACzU,OAAO,SAACnL,GAAMA,OAAAA,CAAC,EAC9B,KAAC2f,CAAA,CAvID,CAbwB9T,IC3BpBgW,gBAQEnU,SAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,YAAAA,IAAAA,QAAAA,EAAAA,EAAAA,GAAAA,EAAAA,UAAAA,kBAASsQ,GAAS,IACL,OAAAV,QAAA7J,QAAJ5R,KAAKjB,MAAM0d,QAAQjV,IAAI2U,IACrC,yDAND,WACE,OAAOlS,GAAcgW,SACvB,OAEMpU,CARuBP,oBCC7BO,SAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,YAAAA,IAAAA,CARsCP,OAQtCO,EAAAA,EAAAA,GAAAA,EAAAA,UAAAA,SAAA,SAASqU,GACP,IAAa9W,EAAG1B,EAAQM,UAAUkY,EAActb,MAKhD,OAFAwE,EAAQ3K,OAASyhB,EAAczM,MAExBrK,CACT,EAXAjD,EAAAga,EAAA,CAAA,CAAAnhB,IAAA,OAAAwI,IAAA,WACE,OAAoByC,GAACmW,WACvB,KANsC9U,CAAAA,CAQtCO,CARsCP,ICOlB+U,gBAAA,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA3V,MAAA3K,KAAAxB,YAAAwB,IAAA,CAMnB,OANmB4G,EAAAyZ,EAAAC,GAAAD,EAAAnd,UAQpB2I,SAAA,WACE,OAAab,OAACuV,QAAQvgB,KAAKjB,MAAMyhB,sBAC9BlX,OAAO,YAAQ,MAAqB,mBAArBI,EAAA,EAA+B,GAC9C4C,OACC,SAACmU,EAAMrgB,GAAAA,IAAAA,EAAgBqgB,OAAAA,EAAAA,GAAAA,IAAMrgB,EAAAA,CAAAA,GAAnBvB,EAAAA,IAAa4hB,EAAAA,GAAWC,GAAA,EAClC,CAAE,EAER,EAACva,EAAAka,EAAA,CAAA,CAAArhB,IAAA,OAAAwI,IAXD,WACE,OAAoByC,GAAC0W,SACvB,KAACN,CAAA,CANmB,CAAQ/U,ICSUsV,gBAAA,SAAAN,GAAA,SAAAM,IAAA,OAAAN,EAAA3V,MAAA3K,KAAAxB,YAAAwB,IAAA,CAAA4G,EAAAga,EAAAN,GAAA,IAAAzZ,EAAA+Z,EAAA1d,UAMrC,OANqC2D,EAQ9Bga,SAAA,SAASjc,GACf,IAAKA,IAASA,EAAKnG,OACjB,MAAO,GAGT,IAAKuB,KAAKjB,MAAMgS,SAAW/Q,KAAKjB,MAAMgS,OAAO7H,QAC3C,OACDtE,EAED,IAAMsE,EAAUqO,GAAO2D,YAAYlb,KAAKjB,MAAMgS,OAAO7H,SAGrD,OAAItE,EAAK,aAAmBtD,QACEgG,IAAI,SAACQ,GAC/B,IAAIgZ,EAAM,EAEV,SAAexZ,IAAI,SAAC4R,EAAQtb,GAE1B,YAAoB8S,IAAhBwI,EAAOtU,MACTkc,IAE2B,mBAAhB5H,EAAOtU,KACTsU,EAAOtU,KAAKkD,GAENoR,EAACtU,MAIXkD,EAAIlK,EAAIkjB,EACjB,EACF,GAIqB,iBAARlc,EAAC,IAAqBA,EAAK,aAActD,MAoBjD,GAnBGsD,EAAqB0C,IAAI,SAACQ,GAChCoB,OAAAA,EAAQ5B,IAAI,SAAC4R,EAAQtb,GACnB,YAAoB8S,IAAhBwI,EAAOtU,KACkB,qBAATA,KACTsU,EAAOtU,KAAKkD,GAEZoR,EAAOtU,KAEPsU,EAAOlT,GACN8B,EAACoR,EAAOlT,KAElB8T,GAAOpL,MAAgE9Q,0DAAAA,EACQ,gGAEhF,KACH,EAAE,EAKR,IAEAiO,SAAA,SAASkV,GACP,MAAO,CACLnc,KAAM5E,KAAK6gB,SAASE,EAAgBnc,MACpC6O,MAAOsN,EAAgBtN,MAE3B,EAACtN,EAAAya,EAAA,CAAA,CAAA5hB,IAAA,OAAAwI,IAlED,WACE,OAAoByC,GAACmW,WACvB,KAACQ,CAAA,CANqC,CAAQtV,ICX1C0V,gBACGxG,WAAAA,SAAAA,KAqBT,OArBSA,EAAAA,iBAAP,SAAwB/K,GACtB,IAAcwB,EAAG,IAAI6M,GAgBrB,OAdIrO,EAAOgN,mBAAmBd,IAC5B1K,EAASC,SACP,IAAImP,GAAgB,CAClBG,qBAAsB/Q,EAAOqB,UAKnCG,EAASC,SAAS,IAAoB8O,GAAC,CAAEvD,QAAShN,EAAOgN,WACzDxL,EAASC,SACP,IAAqC0P,GAAC,CAAE7P,OAAQtB,EAAOsB,UAEzDE,EAASC,SAAS,IAA+BiP,IAGnDlP,CAAA,EAGF+P,CAAA,CArBSxG,MCLP,SAAYyG,GAAe,IAAAva,EAAA1G,KAAAA,KAJnBsD,WACA8G,EAAAA,KAAAA,UAAiD,QACjD8W,eAAgB,EAMxB/Q,KAAAA,SAAW,WAAM,OAAAzJ,EAAKpD,KAAK,OAC3B6d,aAAe,kBAAUza,EAAC0D,SAAS,EAEnCyG,KAAAA,SAAW,SAACuQ,GACV,GAAuB,mBAAZA,EACT,MAAM,UAAU,6BAClB,GAAI1a,EAAKwa,cACP,UAAe/O,MAAC,qCAElBzL,EAAKwa,eAAgB,EAErB,IAAMG,EAAY3a,EAAKpD,MACvB,IACEoD,EAAKpD,MAAQ8d,EAAQ1a,EAAKpD,MAG3B,CAFA,QACCoD,EAAKwa,eAAgB,CACtB,CAED,QAAqCrI,MAAdnS,EAAK0D,aAASyO,EAAAC,KAAAG,OACnC3O,EADiBuO,EAAA7V,OACR0D,EAAKpD,MAAO+d,GAGvB,OAAO3a,EAAKpD,KACd,OAEAgN,UAAY,SAAChG,GACX,GAAwB,qBACtB,MAAM,IAAS6H,MAAC,8BAGlB,OADAzL,EAAK0D,oBAAgB1D,EAAK0D,UAAS,CAAEE,IAElC,WAAA,OAAA5D,EAAK0D,UAAY1D,EAAK0D,UAAUd,OAAO,SAACgY,UAAWA,IAAKhX,CAAQ,EAAC,CACtE,EAnCEtK,KAAKsD,MAAQ2d,CACf,ECYWxT,G7CnBkiR,SAAWhQ,EAAEC,GAAG,IAAIC,EAAE,CAAC4B,IAAI7B,EAAE,OAAOK,IAAIoB,G6CmB5iR,K7CnBijRoiB,SAAS,SAAS9jB,EAAEC,GAAG,OAAOD,EAAEiB,SAAShB,EAAE,EAAE8jB,SAAS,SAAS/jB,GAAG,IAAIE,EAAEC,EAAE,OAAOoC,KAAKiE,kBAAkBtG,EAAE,IAAIC,EAAE,CAAA,GAAIF,GAAGsC,KAAKA,KAAKiE,gBAAgB,WAAW,OAAOrG,CAAC,EAAEoC,KAAK6D,sBAAsB,SAASpG,GAAGuC,KAAKjB,MAAMiE,QAAQvF,EAAEuF,OAAOrF,EAAEkD,KAAKP,EAAE,EAAEN,KAAKqD,IAAI,SAAS5F,GAAGE,EAAE4C,KAAK9C,GAAG,IAAIC,EAAED,EAAE4H,qBAAqB5H,EAAE4H,qBAAqB,WAAW1H,EAAEsZ,OAAOtZ,EAAEwC,QAAQ1C,GAAG,GAAGC,GAAGA,EAAEiB,KAAKlB,EAAE,CAAC,GAAGA,EAAEiB,QAAQ,GAAG,OAAOf,EAAE6jB,SAASriB,GAAGxB,EAAE4jB,SAASxe,YAAYpF,CAAC,C6CmBp/R8jB,GAuEVC,gBAAA,WACjB,aACE1W,OAAO2W,OAAO3hB,KAAM0hB,EAAOE,gBAC7B,CAAC,IAAA/a,EAAA6a,EAAAxe,UAoGA,OApGA2D,EAMD8a,OAAA,SAAOE,GACL,OAAa7W,OAAC2W,OAAO3hB,KAAM6hB,EAC7B,IAOAlb,OAAA,SAAOkb,GACL,OAAKA,GAEL7hB,KAAK2hB,OACHD,EAAOI,uBACF9hB,KACA6hB,KAIA7hB,UACT,EAEO4hB,EAAAA,cAAP,WACE,MAAO,CACL9R,MAAO,IAAIiS,GAAM,CACf9F,OAAQze,EAAOwkB,KACfjR,YAAQL,EACR9L,KAAM,OAERmS,OAAQ,IAAIJ,GACZrB,S7CjIksB,CAACzV,QAAQ,M6CkI3sBmV,MAAO,OACPiN,OAAQ,OACRC,qBAAsB,IACtBtK,WAAW,EACXzV,MAAO,CAAE,EACTiK,UAAW,CAAA,EAEf,EAEO0V,EAAAA,kBAAP,SAAyBD,GACvB,OAAe,OAAaF,OAAOE,GAoDnC,MAjDkC,kBAAVA,EAACjhB,MAAsBihB,EAAcjhB,MAC3D6O,EAAOkS,OAAO,CACZ/gB,KAAM,CACJuhB,aAAa,KAMnB1S,EAAOkS,OAAO,CACZ5Q,OAAQwG,GAAOiD,iBAAiB/K,KAGlCA,EAAOkS,OAAO,CACZlF,QAASD,GAAahC,iBAAiB/K,KAGzCA,EAAOkS,OAAO,CACZ1Q,SAAU+P,GAAcxG,iBAAiB/K,KAI3CA,EAAOkS,OAAO,CACZ/R,WAAY,OAAeH,EAAOb,YAGhCa,EAAOvD,QAETuD,EAAOsH,OAAOD,IAAI,CAChB9Q,GAAI,SACJwP,SAAUU,GAAeqB,OACzBD,UAAW9G,KAIXf,EAAO3B,YAET2B,EAAOsH,OAAOD,IAAI,CAChB9Q,GAAI,aACJwP,SAAUU,GAAekM,OACzB9K,UAAW/E,KAKX9C,EAAOmH,SACTnH,EAAOmH,QAAQ9S,QAAQ,SAAChE,GAAM2P,OAAAA,EAAOsH,OAAOD,IAAIhX,EAAE,GAG7C2P,CACT,EAACiS,CAAA,CAvGgB,YChFDW,GAChBtjB,GAQA,IAsCEma,EAtCIzJ,EAASC,KAiDf,OAEInR,EAAA,KAAAyN,EAAA,CAAAgI,KAAMjV,EAAMiV,KACZsO,QAASvjB,EAAMujB,QACf,iBAAgBvjB,EAAMma,QAAUna,EAAMma,OAAOlT,GAC7CoG,UAAWyF,GACTzF,GAAU,MACVrN,EAAMqN,UACNqD,EAAOrD,UAAUmW,IAEnBpgB,WACKpD,EAAMoD,MACNsN,EAAOtN,MAAMogB,IAElBjO,QAxCgB,SAClBrW,GAEIc,EAAMyjB,aAEV/S,EAAOgT,aAAahY,KAClB,YACAxM,EACAc,EAAMoI,KACNpI,EAAMma,OACNna,EAAM+I,IAEV,IAGEoR,EA0B0Bna,EAAMma,QAtBC,mBAAtBA,EAAOnU,WACTmU,EAAOnU,WAAWhG,EAAMoI,KAAKvC,KAAM7F,EAAM+I,IAAK/I,EAAMma,UAE7CnU,WALI,CAAA,GArChBhG,EAAMma,QAA4C,mBAAtBna,EAACma,OAAOwJ,UAC/B3jB,EAAMma,OAAOwJ,UAAU3jB,EAAMoI,KAAKvC,KAAM7F,EAAM+I,IAAK/I,EAAMma,QAG9Dna,EAAMma,QAAUna,EAAMma,OAAOnC,OAE7BxY,EAAC6Y,GAAc,CACbC,SAAUtY,EAAMma,OAAOlT,GACvBjH,MAAO,CACLma,OAAQna,EAAMma,OACd/R,KAAMpI,EAAMoI,KACZW,IAAK/I,EAAM+I,OAMZ/I,EAAMoI,KAAKvC,KAiDtB,CC7EgB+d,SAAAA,GAAG5jB,GAKjB,IAAY0Q,EAAGC,KACTqB,EAAShB,GAAY,SAACzM,GAAK,OAAUA,EAACyN,MAAM,GAmClD,OAEIxS,EAAA,KAAA,CAAA6N,UAAWyF,GAAUzF,GAAU,MAAOqD,EAAOrD,UAAUwW,IACvDtO,QAxBgB,SAClBrW,GAEIc,EAAM8jB,YACVpT,EAAOgT,aAAahY,KAAK,WAAYxM,EAAGc,EAAM+I,IAChD,GAGM/I,EAAML,SACIK,EAACL,SAGHK,EAAC+I,IAAIb,MAAMK,IAAI,SAACH,EAAYvJ,GACtC,IAAYsb,EAzBE,SAACzP,GACjB,GAAIsH,EAAQ,CACV,IAAUsI,EAAG9B,GAAO2D,YAAYnK,EAAO7H,SAEvC,GAAImQ,EACF,OAAOA,EAAK5P,EAEf,CAED,OACF,IAAA,CAemBqZ,CAAUllB,GAEzB,OAAIsb,GAAUA,EAAOvP,OAAmB,KAEjCpL,EAAC8jB,GAAG,CAAArjB,IAAKmI,EAAKnB,GAAImB,KAAMA,EAAMW,IAAK/I,EAAM+I,IAAKoR,OAAQA,GAC/D,GAWJ,CCtDgB6J,SAAAA,GAAWhkB,GAKzB,OACER,EAACokB,GAAG,CAAAE,YAAY,GACdtkB,EAAC8jB,GAAE,CACDrO,KAAK,QACLsO,QAASvjB,EAAMujB,QACfE,aAAa,EACbrb,KAAM,MAASpI,EAAMiQ,SACrB5C,UAAWyF,GACTzF,GAAU,WACVrN,EAAMqN,UAAYrN,EAAMqN,UAAY,QAK9C,CCfgB4W,SAAAA,KACd,IAAYvT,EAAGC,KACT9K,EAAOmL,GAAY,SAACzM,GAAK,SAAWsB,IAAI,GAClCqX,EAAGlM,GAAY,SAACzM,GAAK,OAAUA,EAAC2Y,MAAM,KACnClM,GAAY,SAACzM,GAAK,OAAUA,EAACyN,MAAM,GAC5C7Q,EAAIsP,KAEQyT,EAAG,WACnB,OAAIlS,EACKA,EAAOmS,eAAezkB,QAGjC,EAEA,OACEF,EAAA,QAAA,CAAO6N,UAAWyF,GAAUzF,GAAU,SAAUqD,EAAOrD,UAAU+W,QAC9Dve,GACCA,EAAK+C,KAAKL,IAAI,SAACQ,GACb,OAAQvJ,EAAAokB,GAAG,CAAA3jB,IAAK8I,EAAI9B,GAAI8B,IAAKA,GAC/B,GAEDmU,IAAWze,EAAO4lB,WAAaxe,GAAwB,IAAhBA,EAAKnG,SAC3CF,EAACwkB,GAAU,CACT/T,QAAS9O,EAAE,WACXoiB,QAASW,IACT7W,UAAWyF,GAAUzF,GAAU,WAAYqD,EAAOrD,UAAUoC,WAI/DyN,IAAWze,EAAO6lB,UAAYze,GAAwB,IAAhBA,EAAKnG,QAC1CF,EAACwkB,GACC,CAAA/T,QAAS9O,EAAE,kBACXoiB,QAASW,IACT7W,UAAWyF,GACTzF,GAAU,YACVqD,EAAOrD,UAAUkX,YAKtBrH,IAAWze,EAAO2U,OACjB5T,EAACwkB,GACC,CAAA/T,QAAS9O,EAAE,SACXoiB,QAASW,IACT7W,UAAWyF,GAAUzF,GAAU,SAAUqD,EAAOrD,UAAUsC,SAKpE,CCnDiC,IAWhB6U,gBAAA,SAAAjD,GAAA,SAAAiD,IAAA,OAAAjD,EAAA3V,MAAA3K,KAAAxB,YAAAwB,IAAA,CAAA4G,EAAA2c,EAAAjD,GAAA,IAAAzZ,EAAA0c,EAAArgB,UAed,OAfc2D,EACL+E,cAAA,WACR,IAAwB,MAAAkN,EAAAC,EAAA/Y,KAAKjB,MAAMmK,wBAAS,CAAjCsa,IAAAA,EACT3K,EAAA7V,WAA4B0N,IAAxB8S,EAAUC,YACZD,EAAUC,UAAY,GAGI,IAAxBD,EAAUC,YAA4C,IAAzBD,EAAUC,WACzCtN,GAAIzH,MAAgC8U,0BAAAA,EAAUC,UAEjD,CACH,EAMQC,EAAAA,QAAA,SAAQC,EAAcC,GAC5B,OAAID,EAAQC,EACH,EACED,EAAQC,GACT,EAGH,CACT,EAAC/c,EAEOgd,eAAA,SAAezlB,EAAQkC,GAG7B,IAFA,MAAIwjB,EAAM,EAEWhH,EAAA/D,EAAA/Y,KAAKjB,MAAMmK,wBAAS,CAA9BgQ,IAAAA,EACTI,EAAAtW,MAAA,GAAY,IAAR8gB,EAUF,MATA,IAAMH,EAAQvlB,EAAE6I,MAAMiS,EAAO9R,OAAOxC,KAC9Bgf,EAAQtjB,EAAE2G,MAAMiS,EAAO9R,OAAOxC,KAGlCkf,GAD4B,mBAAnB5K,EAAOwK,QACTxK,EAAOwK,QAAQC,EAAOC,GAAS1K,EAAOuK,UAEtCzjB,KAAK0jB,QAAQC,EAAOC,GAAS1K,EAAOuK,SAKhD,CAED,OAAOK,CACT,EAACjd,EAESgF,SAAA,SAASjH,GACjB,IAAgBmf,EAAA,GAAAjY,OAAOlH,EAAK+C,MAC5Boc,EAAWnjB,KAAKZ,KAAK6jB,eAAevH,KAAKtc,OAEzC,IAAYgkB,EAAG,IAAItc,EAAQqc,GAK3B,OAFAC,EAAOvlB,OAASmG,EAAKnG,OAGvBulB,CAAA,EA7CA7d,EAAAod,EAAA,CAAA,CAAAvkB,IAAA,OAAAwI,IAAA,WACE,OAAOyC,GAAcga,IACvB,KAACV,CAAA,CAfc,CAAQjY,OChBvB,SACElE,EACAqc,EACAS,EACAR,UAEDpgB,SAAAA,GACC,IAAA6gB,WAAcA,EAAA7gB,EAAM1C,OAANujB,EAAYjb,QACtB5F,EAAM1C,KAAKsI,QAAQ5B,IAAI,SAAClG,GACtB,OAAYA,EAAAA,CAAAA,EAAAA,EACd,GACA,KACU8H,EAAQzK,OACVya,EAAGhQ,EAAQ2N,KAAK,SAACzV,UAAOA,EAACgG,QAAUA,CAAK,MAG1C,EACNgd,GAAQ,EACFpN,GAAG,EACTrQ,GAAS,EA8Cb,QAnD0B+J,IAAXwI,EAwBRgL,GAYuB,IAAtBhL,EAAOuK,UAGTzM,GAAS,EAETrQ,GAAS,EAfG,IAAV0d,EACF1d,GAAS,EACA0d,EAAQ,IAGjBD,GAAQ,EACRtN,GAAM,GAvBI,IAAVuN,EAEFvN,GAAM,EACGuN,EAAQ,IAAMH,GAGvBpN,GAAM,EACNsN,GAAQ,GACCC,EAAQ,GAAKH,IAGtBpN,GAAM,GA0BNsN,IAEFlb,EAAU,IAGR4N,EACF5N,EAAQ3I,KAAK,CACX6G,MAAOA,EACPqc,UAAWA,EACXC,QAASA,YAEF/c,EAAQ,CACjB,IAAMS,EAAQ8B,EAAQ/I,QAAQ+Y,GAC9BhQ,EAAQ9B,GAAOqc,UAAYA,CAC5B,MAAM,GAAIzM,EAAQ,CACjB,IAAWsN,EAAGpb,EAAQ/I,QAAQ+Y,GAC9BhQ,EAAQ+N,OAAO7P,EAAO,EACvB,CAED,YACK9D,EAAK,CACR1C,KAAM,CACJsI,QAASA,IAGf,CAAC,EAEUqb,GACX,SAACnd,EAAe8c,EAAgBR,UAAiCpgB,SAAAA,GAC/D,IACM4V,GADU5V,EAAM1C,KAAW0C,GAAAA,OAAAA,EAAM1C,KAAKsI,SAAW,IAChC2N,KAAK,SAACzV,GAAMA,OAAAA,EAAEgG,QAAUA,CAAK,GAEpD,OAOA4E,EAAA,CAAA,EACK1I,EARA4V,EASAsL,GACDpd,EACqB,IAArB8R,EAAOuK,WAAmB,EAAI,EAC9BS,EACAR,EAJCc,CAKDlhB,GAXGkhB,GAAWpd,EAAO,EAAG8c,EAAOR,EAA5Bc,CAAqClhB,GAa9C,CAAC,kBCzFDuI,SAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,YAAAA,IAAAA,CARuBP,OAQvBO,EAAAA,EAAAA,GAAAA,EAAAA,UAAAA,SAAA,SAASa,GACP,MAAgB,CAAE,EAUlB,OARI1M,KAAKjB,MAAM6N,MACbD,EAAa,IAAI3M,KAAKjB,MAAM6N,IAAIF,EAAQE,IAAK5M,KAAKjB,MAAMmK,UAGtDlJ,KAAKjB,MAAM8N,OACbF,EAAc,KAAI3M,KAAKjB,MAAM8N,KAAKH,EAAQG,KAAM7M,KAAKjB,MAAMmK,eAIxDwD,EACAC,EAEP,EAACxG,EAAAse,EAAA,CAAA,CAAAzlB,IAAA,OAAAwI,IAnBD,WACE,UAAqBid,UACvB,KANuBnZ,CAAAA,CAQvBO,CARuBP,aCmBL2Y,GAClBllB,GAKA,IAAY0Q,EAAGC,KACPmB,EAAab,KAAba,SACD3Q,EAAGsP,KACVS,EAAkCC,GAAS,GAApCuT,OAAWiB,EAAYzU,EAAA,GACxBmJ,EAAa3J,EAAO7O,KACf0C,EAAGyM,GAAY,SAACzM,GAAUA,OAAAA,EAAM1C,IAAI,GACzC+jB,EAC0B,iBAAb,MAAVvL,OAAU,EAAVA,EAAYtI,QACf7G,GAAcwa,WACdxa,GAAcga,KAEEW,EAAG,WACvB,IAAMC,EAAapV,EAAOwB,SAASgO,eAAe0F,GAClD,GAAIE,EAAWpmB,OACb,OAAOomB,EAAW,EAGtB,EAgFA,OAxDAxU,GAAU,WACR,IAAeM,EATeiU,MAb1BD,IAAkB1a,GAAcwa,WACvBA,IAAAA,GACTvb,EAAAA,CAAAA,QAAS5F,EAAQA,EAAM4F,QAAU,IAC9BkQ,EAAWtI,SAIPyS,IAAAA,GAAW,CACpBra,QAAS5F,EAAQA,EAAM4F,QAAU,MAiBnC,OAFAuG,EAAOwB,SAAS0N,YAAYhO,GAEflB,WAAAA,OAAAA,EAAOwB,SAASE,WAAWR,EAAU,CACpD,EAAG,CAAClB,IAKJY,GAAU,WACR,GAAK/M,EAAL,CAEA,IAAMwhB,EAAgBxhB,EAAM4F,QAAQ2N,KAAK,SAACzV,GAAC,OAAMA,EAACgG,QAAUrI,EAAMqI,KAAK,GAKrEsd,EAHGI,EAGUA,EAAcrB,UAFd,EALH,CASd,EAAG,CAACngB,IAEJ+M,GAAU,WACR,IAAMM,EAAYiU,IAEbjU,GACArN,GAELqN,EAAUlF,SAAS,CACjBvC,QAAS5F,EAAM4F,SAEnB,EAAG,CAAC5F,IA4BA/E,EAAA,SAAA,CAAA6V,UAAW,EACX,aAAYlU,EAAcujB,aAAc,IAAdA,EAAkB,OAAS,QACrDvP,MAAOhU,EAAC,aAA2B,IAAdujB,EAAkB,OAAS,QAChDrX,UAAWyF,GACTzF,GAAU,QACVA,GAAU,OAlBS,SAACqX,GACxB,OAAkB,IAAdA,EACK,OACiB,IAAfA,EACF,OAGF,SACT,CAUwBsB,CAAiBtB,IACnChU,EAAOrD,UAAUxL,MAEnB0T,QAlCoB,SAACrW,GACvBA,EAAE+mB,iBACF/mB,EAAEgnB,kBAEFpU,EACEG,GACEjS,EAAMqI,OACS,IAAfnJ,EAAEinB,UAAqB9L,EAAW+I,YAClCpjB,EAAM2kB,SAGZ,GA0BF,CChJO,IAAcyB,GAAG,SAACC,EAAuBC,GAC9C,IAAIC,WAD0CD,IAAAA,EAAO,KAErD,IAAIE,EAAWC,KAAKC,MAEPC,EAAG,WACdH,EAAWC,KAAKC,MAChBL,EACFza,WAAA,EAAA,GAAApI,MAAA5D,KAAAH,WAAA,EAEA,OAAmB,WAAA,IAAJmN,EAAA,GAAApJ,MAAA5D,KAAAH,WACPmnB,EAAcH,KAAKC,MACZG,EAAGD,EAAcJ,EAE1BK,GAAWP,EAEbK,EAAO/a,WAAA,EAAIgB,IAGP2Z,GACFhY,aAAagY,GAGfA,EAAY3kB,WAAW,WACrB+kB,EAAW/Z,WAAAA,EAAAA,GACX2Z,EAAY,IACd,EAAGD,EAAOO,GAEd,CACF,EC7BgBC,SAAAA,GAAO9mB,GAIrB,MAEc+mB,EAAG,SAAC7nB,GAChB,OAAIA,aAAa8nB,WACJvgB,KAACmP,MAAM1W,EAAE+nB,YAERrR,MAAM1W,EAAEgoB,eAAe,GAAGD,MAE1C,EAEME,EAAQ,SAACjoB,GACbA,EAAEgnB,kBAEF,IAEiBkB,EAAGjR,SAFFnW,EAAMqnB,MAAMvmB,QAESsC,MAAM6S,MAAO,IAAM8Q,EAAS7nB,GAEnEooB,EAASlB,GAAS,SAAClnB,UAAUqoB,EAACroB,EAAGkoB,EAAY,EAAE,IAE/C5hB,SAAS/B,iBAAiB,UAAW+jB,GACrChiB,SAAS/B,iBAAiB,WAAY+jB,GACtChiB,SAAS/B,iBAAiB,YAAa6jB,GACvC9hB,SAAS/B,iBAAiB,YAAa6jB,EACzC,IAEa,SAACpoB,EAA4BkoB,GACxCloB,EAAEgnB,kBAEF,IAAeuB,EAAGznB,EAAMqnB,MAAMvmB,QAE1BsmB,EAAcL,EAAS7nB,IAAMiX,SAASsR,EAAUrkB,MAAMwW,SAAU,MAClE6N,EAAUrkB,MAAM6S,MAAWmR,EAAcL,EAAS7nB,GACnD,KACH,EAESsoB,EAAG,SAANA,EAAOtoB,GACXA,EAAEgnB,kBAEF1gB,SAAS5B,oBAAoB,UAAW4jB,GACxChiB,SAAS5B,oBAAoB,YAAa0jB,GAC1C9hB,SAAS5B,oBAAoB,YAAa0jB,GAC1C9hB,SAAS5B,oBAAoB,WAAY4jB,EAC3C,EAEA,OACEhoB,EAAA,MAAA,CACE6N,UAAWyF,GAAUzF,GAAU,MAAOA,GAAU,cAChDqa,YAAaP,EACbQ,aAAcR,EACd5R,QAAS,SAACrW,UAAOA,EAACgnB,iBAAiB,GAGzC,CCjDM,SAAY0B,GAChB5nB,GAMA,IAAM0Q,EAASC,KACT0W,EAAQ/S,GAAO,MACrBpD,EAA0BC,GAAS,CAAE,GAA9B/N,EAAOykB,EAAAA,GAAAA,EACd3W,EAAA,GAAQY,EAAab,KAAba,SAERR,GAAU,WAER,GAAIZ,EAAOoX,aAAeT,EAAMvmB,QAAS,CACvC,IAAMinB,EAAYV,EAAMvmB,QAAQinB,UAEP,iBAALA,GAClBF,EAAS,CACPG,IAAKD,GAGV,CACH,EAAG,CAACV,IAEJ,IAiDQlN,EAjDQ8N,EAAG,WAAejoB,OAAqB2R,MAArB3R,EAAMma,OAAOtY,IAAiB,IAEhD,SACd3C,GAIAA,EAAEgnB,kBAEE+B,KAGFnW,EACEoW,GACEloB,EAAMqI,OACS,IAAfnJ,EAAEinB,UALazV,EAAO7O,KAKYuhB,YAClCpjB,EAAMma,OAAOtY,KAAK8iB,SAI1B,EAwCA,OACEnlB,EAAA,KAAAyN,EAAA,CACE/M,IAAKmnB,EACL,iBAAgBrnB,EAAMma,QAAUna,EAAMma,OAAOlT,GAC7CoG,UAAWyF,GACTzF,GAAU,MACV4a,IAAe5a,GAAU,KAAM,QAAU,KACzCqD,EAAOoX,YAAcza,GAAU,KAAM,SAAW,KAChDqD,EAAOrD,UAAUwO,IAEnBtG,QAASA,EACTnS,MACKsN,EAAAA,CAAAA,EAAAA,EAAOtN,MAAMyY,GACb,CACDjC,SAAU5Z,EAAMma,OAAOP,SACvB3D,MAAOjW,EAAMma,OAAOlE,OAEnB7S,EACApD,EAAMoD,OAEX+kB,UA1DY,SAACjpB,GAEX+oB,KAA4B,KAAZ/oB,EAAEkpB,OACpB7S,EAAQrW,EAEZ,EAsDImpB,QAASroB,EAAMqoB,QAAU,EAAIroB,EAAMqoB,aAAU1W,EAC7C4R,QAASvjB,EAAMujB,QAAU,EAAIvjB,EAAMujB,aAAU5R,IAjCzCwI,EAASna,EAAMma,QAIY,qBAAfnU,WACTmU,EAAOnU,WAAW,KAAM,KAAMhG,EAAMma,QAEpCA,EAAOnU,WALI,CAAA,EAiCbiiB,IAAe,CAAE5S,SAAU,GAAM,CAAA,GAEtC7V,EAAK,MAAA,CAAA6N,UAAWA,GAAU,KAAM,iBAxDRsE,IAAtB3R,EAAMma,OAAOlU,KACHjG,EAACma,OAAOlU,UAGM0L,IAAxB3R,EAAMma,OAAOnC,OAEbxY,EAAC6Y,GAAc,CACbC,SAAUtY,EAAMma,OAAOnC,OAAO/Q,GAC9BjH,MAAO,CACLma,OAAQna,EAAMma,gBAgDnB8N,KAAgBzoB,EAAC0lB,GAAIjY,EAAA,CAAC5E,MAAOrI,EAAMqI,OAAWrI,EAAMma,OAAOtY,OAtF7B7B,EAAMma,OAAOM,WAwF1Cza,EAAMqI,MAAQqI,EAAOsB,OAAOmS,eAAezkB,OAAS,GAClDF,EAACsnB,GAAM,CAAC3M,OAAQna,EAAMma,OAAQkN,MAAOA,IAI/C,UCzHqBiB,KACnB,IA8CY1f,EA9CA8H,EAAGC,KACHqB,EAAGhB,GAAY,SAACzM,GAAUA,OAAAA,EAAMyN,MAAM,GAkDlD,OAAIA,EAGExS,EAAA,QAAA,CAAAS,IAAK+R,EAAO/K,GACZoG,UAAWyF,GAAUzF,GAAU,SAAUqD,EAAOrD,UAAUkb,SATpD3f,EAAG4P,GAAOyB,cAAcjI,EAAO7H,UAE7B5B,IAAI,SAACQ,EAAKyB,GAAage,OAvBnB,SAACzf,EAAgByB,EAAkBie,GAEnD,IAAiBtM,EAAG3D,GAAO2D,YAAYnK,EAAO7H,SAE9C,OACG3K,EAAAokB,GACE7a,KAAAA,EAAIR,IAAI,SAAC0T,GACR,OAAIA,EAAIrR,OAAmB,KA7Bd,SACnBuP,EACA3P,EACAke,EACAD,GAEA,IAA6BE,ECjBjBA,SACdxO,EACA3P,EACAie,GAEA,IAAMG,EAAQpQ,GAAO8D,aAAanC,GACf0O,EAAGJ,EAAYje,EAIlC,MAAO,CACL6d,QAJc5hB,KAAKmP,MAAMiT,EAAgBD,EAAQA,EAAQC,GAKzDtF,QAJepJ,EAAOhQ,SAAWgQ,EAAOhQ,QAAQzK,QAAW,EAM/D,CDGiCipB,CAC3BxO,EACA3P,EACAie,GAGF,OACGjpB,EAAAooB,GACC,CAAAzN,OAAQA,EACR9R,MAAOqgB,EACPnF,QAVaA,EAAAA,QAWb8E,QAXWS,EAAPT,SAcV,CAWeU,CACL9M,EACAzR,EACA2R,EAAY/a,QAAQ6a,GACpBwM,EAEJ,GAGN,CAKqCD,CAAUzf,EAAKyB,EAAU5B,EAAKlJ,OAAO,IAe5E,IAAA,KElCsBspB,GAAG,SAAChX,GAAc,gBAAMzN,GAC5C,OAAA0I,EAAA,CAAA,EACK1I,EACHyN,CAAAA,OAAQA,GAEZ,CAAC,WCpCoBiX,KACnB,MAAetY,KACT4F,EAAWjC,GAAO,MAChBxC,EAAab,KAAba,SAMR,OAJAR,GAAU,WACJiF,GAAUzE,EDgCS,SAACyE,UAAchS,SAAAA,GACxC,YACKA,EAAK,CACRgS,SAAUA,GAEd,CAAC,CCrC0BtE,CAAoBsE,GAC7C,EAAG,CAACA,IAGF/W,EAAA,QAAA,CACEU,IAAKqW,EACLtB,KAAK,OACL5H,UAAWyF,GAAUzF,GAAU,SAAUqD,EAAOrD,UAAU6b,OAC1D9lB,MAAK6J,EAAA,CAAA,EACAyD,EAAOtN,MAAM8lB,MACb,CACDhG,OAAQxS,EAAOwS,UAInB1jB,EAAC8oB,GACD,MAAA9oB,EAACykB,SAGP,CC5BgBkF,SAAAA,KACd,IAAgChY,EAAAA,IAAS,GAAlCiY,EAAQlY,EAAA,GAAEmY,EAAWnY,EAAA,GACboY,EAAGhV,GAAO,QACV3D,KAQf,OANAW,GAAU,WACkC,IAAtCgY,EAAUxoB,QAAQnB,SAASD,QAC7B2pB,GAAY,EAEhB,EAAG,CAACC,IAEAF,EAGE5pB,EAAA,MAAA,CAAAU,IAAKopB,EACLjc,UAAWyF,GAAUzF,GAAU,QAASqD,EAAOrD,UAAU2E,QACzD5O,MAAK6J,EAAA,CAAA,EAAOyD,EAAOtN,MAAM4O,SAEzBxS,EAAC6Y,IAAe5B,SAAUU,GAAeqB,UAMjD,IAAA,CCxBgB+Q,SAAAA,KACd,IAAMC,EAAYlV,GAAO,MACOnD,EAAAA,IAAS,GAAlCiY,EAAUC,EAAAA,GAAAA,EACjBnY,EAAA,KAAeP,KAQf,OANAW,GAAU,WACkC,IAAtCkY,EAAU1oB,QAAQnB,SAASD,QAC7B2pB,GAAY,EAEhB,EAAG,CAACG,IAEAJ,EAGE5pB,EAAA,MAAA,CAAAU,IAAKspB,EACLnc,UAAWyF,GAAUzF,GAAU,UAAWqD,EAAOrD,UAAUoc,QAC3DrmB,MAAK6J,EAAA,CAAA,EAAOyD,EAAOtN,MAAMqmB,SAEzBjqB,EAAC6Y,IAAe5B,SAAUU,GAAekM,UAMjD,IAAA,CChBgBqG,SAAAA,KACd,IAAYhZ,EAAGC,KACPmB,EAAab,KAAba,SACFoL,EAASlM,GAAY,SAACzM,GAAK,OAAUA,EAAC2Y,MAAM,KACrClM,GAAY,SAACzM,GAAK,OAAUA,EAACsB,IAAI,GAChC0Q,EAAGvF,GAAY,SAACzM,GAAK,OAAUA,EAACgS,QAAQ,GACzCoC,E/DpByrB,CAAC7X,QAAQ,M+DsBzsB6oB,EAAkBvD,GAAoB,WAAA,IAC1CtU,EJRgC,SAACvN,GACnC,OACKA,EAAAA,CAAAA,EAAAA,GACH2Y,OAAQze,EAAO4lB,SAEnB,GIGuC,8BAGd3T,QAAAA,QAAAA,EAAOwB,SAASvF,WAAS2Q,KAAA,SAAtCzX,GACNiM,EJLiB,SAACjM,GAAkB,OAAA,SAACtB,GACzC,OAAKsB,EAELoH,EAAA,GACK1I,EAAK,CACRsB,KAAMA,EACNqX,OAAQze,EAAOmrB,UAEnB,CAAC,CIHc3X,CAAgBpM,IAGzBjE,WAAW,WACTkQ,EJ3BkCvN,SAAAA,GACxC,OAAIA,EAAM2Y,SAAWze,EAAOmrB,OAC1B3c,EAAA,GACK1I,EACH2Y,CAAAA,OAAQze,EAAO6lB,WAIZ/f,CACT,EImBM,EAAG,EAAG,+DACP,SAAQrF,GACPkY,GAAIzH,MAAMzQ,GACV4S,EJH+BvN,SAAAA,GACnC,OAAA0I,EAAA,CAAA,EACK1I,EAAK,CACRsB,KAAM,KACNqX,OAAQze,EAAO2U,OAEnB,EIFK,GAAA,OAAAsJ,QAAA7J,QAAAgX,GAAAA,EAAAvM,KAAAuM,EAAAvM,KAAA,WAAA,QAAA,EACF,CAAA,MAAApe,GAAA,OAAAwd,QAAAC,OAAAzd,EAAA,CAAA,EAAEwR,EAAOyS,sBAwBV,OAtBA7R,GAAU,WASR,OALAQ,EAASG,GAAkBvB,EAAOsB,SAElC2X,IACAjZ,EAAOwB,SAAS5G,GAAG,UAAWqe,GAEvB,WAAA,OAAYjZ,EAACwB,SAAS1G,IAAI,UAAWme,EAAgB,CAC9D,EAAG,IAEHrY,GAAU,WACJZ,EAAOsB,QAAUkL,IAAWze,EAAOmrB,QAAU/jB,MAAAA,GAAAA,EAAMnG,QAGrDoS,EACEG,GAAkBvB,EAAOsB,OAAO0G,YAAYhI,EAAQ6F,EAAUoC,IAGpE,EAAG,CAAC9S,EAAM6K,EAAQiI,IAIdnZ,EAAA,MAAA,CAAAyV,KAAK,gBACL5H,UAAWyF,GACT,SACAzF,GAAU,aACV6P,IAAWze,EAAO4lB,QAAUhX,GAAU,WAAa,KACnDqD,EAAOrD,UAAUuL,WAEnBxV,MAAK6J,EAAA,CAAA,EACAyD,EAAOtN,MAAMwV,UACb,CACD3C,MAAOvF,EAAOuF,SAIjBiH,IAAWze,EAAO4lB,SACjB7kB,EAAA,MAAA,CAAK6N,UAAWA,GAAU,iBAG5B7N,EAAC2pB,GAED,MAAA3pB,SAAK6N,UAAWA,GAAU,WAAYjK,MAAO,CAAE8f,OAAQxS,EAAOwS,SAC5D1jB,EAACypB,GACH,OAEAzpB,EAAC+pB,GAAe,MAEhB/pB,EAAA,MAAA,CAAKU,IAAKyY,EAAS1R,GAAG,cAAcoG,UAAWA,GAAU,UAG/D,CCnFMyc,IAAKA,gBAAA,SAAAtd,GAIT,SAAYkE,EAAAA,GAAwB,IAAA/I,EAKD,OAJjCA,EAAO6E,EAAA5M,KAAAqB,OAAAA,MAJFyP,YACAsH,EAAAA,EAAAA,cAILrQ,EAAK+I,QAAS,IAAUiS,IACrBC,OAAO,CAAEmH,SAAQC,EAAAriB,GAAQ+b,aAAkBsG,EAAAriB,KAC3CC,OAAO8I,GACV/I,EAAKqQ,OAASrQ,EAAK+I,OAAOsH,OAC5BrQ,CAAA,CAVSE,EAAAiiB,EAAAtd,GAUR,kBAmEA,SAjEMyd,aAAA,SAAavZ,GAElB,OADAzP,KAAKyP,OAAO9I,OAAO8I,OAErB,EAAC5I,EAEDnC,cAAA,WACE,OAAOnG,EAAEkP,GAAc+T,SAAU,CAC/Bxe,MAAOhD,KAAKyP,OACZ/Q,SAAUH,EAAEkqB,GAAW,CAAA,IAE3B,EAQAQ,EAAAA,YAAA,WAaE,OAZKjpB,KAAKyP,QAAWzP,KAAKyP,OAAOkI,WAC/BxB,GAAIzH,MACF,wEACA,GAIJ1O,KAAKkpB,UAGL/lB,EAAOnD,KAAK0E,gBAAiB1E,KAAKyP,OAAOkI,WAElC3X,IACT,EAAC6G,EAKDqiB,QAAA,WACElpB,KAAKyP,OAAOwB,SAASoN,aAErBlb,EAAO,KAAMnD,KAAKyP,OAAOkI,UAC3B,EAAC9Q,EAQD1D,OAAA,SAAOwU,GAKL,OAJKA,GACHxB,GAAIzH,MAAM,oCAAoC,GAG5CiJ,EAAU9S,WAAWpG,OAAS,GAChC0X,GAAIzH,MAAK,yBACkBiJ,EAAS,2EAGrC3X,OAEDA,KAAKyP,OAAOkI,UAAYA,EACxBxU,EAAOnD,KAAK0E,gBAAiBiT,GAEtB3X,KACT,EAAC6oB,CAAA,CA7EQ,CAAQ7e"}